const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-DngoxVSz.js","assets/vendor-DbaM0uXi.js"])))=>i.map(i=>d[i]);
var Gm=Object.defineProperty;var Ym=(t,e,s)=>e in t?Gm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ie=(t,e,s)=>Ym(t,typeof e!="symbol"?e+"":e,s);import{r as j,a as Xm,g as Jm,c as Re,u as Oh,L as Tr,b as Zm,R as Ar,d as Dh,B as Qm,e as eg,f as un}from"./vendor-DbaM0uXi.js";import{M as fo,C as Ge,X as Qe,L as mo,A as en,a as $r,U as Mh,b as Lh,c as tg,d as Ih,N as sg,e as vl,S as wl,f as _l,g as rg,u as ng,Q as ig,h as ag,B as og,Z as lg,K as cg,i as pi,I as yi,G as Ot,F as ks,j as go,k as Vr,l as xi,m as po,n as Kn,o as ja,p as Gn,q as dg,r as hg,s as ug,t as Kt,v as fg,w as mg,T as Yn,x as Fh,y as Bh,z as $h,D as gg,E as pg,R as yg,H as xg,J as bg,O as vg,P as wg}from"./ui-XlSEt7C2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var Vh={exports:{}},bi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g=j,kg=Symbol.for("react.element"),jg=Symbol.for("react.fragment"),Sg=Object.prototype.hasOwnProperty,Ng=_g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tg={key:!0,ref:!0,__self:!0,__source:!0};function Uh(t,e,s){var r,n={},i=null,a=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Sg.call(e,r)&&!Tg.hasOwnProperty(r)&&(n[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)n[r]===void 0&&(n[r]=e[r]);return{$$typeof:kg,type:t,key:i,ref:a,props:n,_owner:Ng.current}}bi.Fragment=jg;bi.jsx=Uh;bi.jsxs=Uh;Vh.exports=bi;var c=Vh.exports,zh,kl=Xm;zh=kl.createRoot,kl.hydrateRoot;const Hh=j.createContext(void 0);function Ag({children:t}){const[e,s]=j.useState("dark");j.useEffect(()=>{document.documentElement.classList.add("dark")},[]),j.useEffect(()=>{localStorage.setItem("theme",e),document.documentElement.classList.toggle("dark",e==="dark")},[e]);const r=()=>{s(n=>n==="light"?"dark":"light")};return c.jsx(Hh.Provider,{value:{theme:e,toggleTheme:r},children:t})}function yo(){const t=j.useContext(Hh);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const Wh=j.createContext(void 0);function Pg({children:t}){const[e,s]=j.useState("ml"),r=()=>{s(n=>n==="ml"?"en":"ml")};return c.jsx(Wh.Provider,{value:{language:e,toggleLanguage:r},children:t})}function be(){const t=j.useContext(Wh);if(t===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return t}const Eg="modulepreload",Cg=function(t){return"/"+t},jl={},Ws=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(s.map(l=>{if(l=Cg(l),l in jl)return;jl[l]=!0;const d=l.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":Eg,d||(u.as="script"),u.crossOrigin="",u.href=l,o&&u.setAttribute("nonce",o),document.head.appendChild(u),d)return new Promise((f,m)=>{u.addEventListener("load",f),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Rg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ws(async()=>{const{default:r}=await Promise.resolve().then(()=>Xs);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class xo extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Og extends xo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Dg extends xo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Mg extends xo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Sa;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Sa||(Sa={}));var Lg=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(t,e||[])).next())})};class Ig{constructor(e,{headers:s={},customFetch:r,region:n=Sa.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=Rg(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return Lg(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=s;let o={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let d;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(o["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(o["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:d}).catch(p=>{throw new Og(p)}),u=h.headers.get("x-relay-error");if(u&&u==="true")throw new Dg(h);if(!h.ok)throw new Mg(h);let f=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield h.json():f==="application/octet-stream"?m=yield h.blob():f==="text/event-stream"?m=h:f==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null}}catch(n){return{data:null,error:n}}})}}var He={},bo={},vi={},tn={},wi={},_i={},Fg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qs=Fg();const Bg=qs.fetch,qh=qs.fetch.bind(qs),Kh=qs.Headers,$g=qs.Request,Vg=qs.Response,Xs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Kh,Request:$g,Response:Vg,default:qh,fetch:Bg},Symbol.toStringTag,{value:"Module"})),Ug=Jm(Xs);var ki={};Object.defineProperty(ki,"__esModule",{value:!0});let zg=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ki.default=zg;var Gh=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_i,"__esModule",{value:!0});const Hg=Gh(Ug),Wg=Gh(ki);let qg=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Hg.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let d=null,h=null,u=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=v:h=JSON.parse(v))}const g=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),y=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&y&&y.length>1&&(u=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,u=null,f=406,m="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(h=[],d=null,f=200,m="OK")}catch{i.status===404&&g===""?(f=204,m="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((l=d==null?void 0:d.details)===null||l===void 0)&&l.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new Wg.default(d)}return{error:d,data:h,count:u,status:f,statusText:m}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}};_i.default=qg;var Kg=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wi,"__esModule",{value:!0});const Gg=Kg(_i);let Yg=class extends Gg.default{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${d}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};wi.default=Yg;var Xg=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tn,"__esModule",{value:!0});const Jg=Xg(wi);let Zg=class extends Jg.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}};tn.default=Zg;var Qg=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vi,"__esModule",{value:!0});const or=Qg(tn);let ep=class{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=s,this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new or.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:r=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new or.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(l.length>0){const d=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new or.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),this.headers.Prefer=n.join(","),new or.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new or.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vi.default=ep;var ji={},Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.version=void 0;Si.version="0.0.0-automated";Object.defineProperty(ji,"__esModule",{value:!0});ji.DEFAULT_HEADERS=void 0;const tp=Si;ji.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${tp.version}`};var Yh=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bo,"__esModule",{value:!0});const sp=Yh(vi),rp=Yh(tn),np=ji;let ip=class Xh{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},np.DEFAULT_HEADERS),s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new sp.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Xh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;r||n?(a=r?"HEAD":"GET",Object.entries(s).filter(([h,u])=>u!==void 0).map(([h,u])=>[h,Array.isArray(u)?`{${u.join(",")}}`:`${u}`]).forEach(([h,u])=>{o.searchParams.append(h,u)})):(a="POST",l=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new rp.default({method:a,url:o,headers:d,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};bo.default=ip;var Js=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(He,"__esModule",{value:!0});He.PostgrestError=He.PostgrestBuilder=He.PostgrestTransformBuilder=He.PostgrestFilterBuilder=He.PostgrestQueryBuilder=He.PostgrestClient=void 0;const Jh=Js(bo);He.PostgrestClient=Jh.default;const Zh=Js(vi);He.PostgrestQueryBuilder=Zh.default;const Qh=Js(tn);He.PostgrestFilterBuilder=Qh.default;const eu=Js(wi);He.PostgrestTransformBuilder=eu.default;const tu=Js(_i);He.PostgrestBuilder=tu.default;const su=Js(ki);He.PostgrestError=su.default;var ap=He.default={PostgrestClient:Jh.default,PostgrestQueryBuilder:Zh.default,PostgrestFilterBuilder:Qh.default,PostgrestTransformBuilder:eu.default,PostgrestBuilder:tu.default,PostgrestError:su.default};const{PostgrestClient:op,PostgrestQueryBuilder:FT,PostgrestFilterBuilder:BT,PostgrestTransformBuilder:$T,PostgrestBuilder:VT,PostgrestError:UT}=ap,lp="2.11.2",cp={"X-Client-Info":`realtime-js/${lp}`},dp="1.0.0",ru=1e4,hp=1e3;var Vs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Vs||(Vs={}));var Ke;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ke||(Ke={}));var at;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(at||(at={}));var Na;(function(t){t.websocket="websocket"})(Na||(Na={}));var ps;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ps||(ps={}));class up{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+n));a=a+n;const l=r.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:d}}}class nu{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var me;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(me||(me={}));const Sl=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=fp(a,t,e,n),i),{})},fp=(t,e,s,r)=>{const n=e.find(o=>o.name===t),i=n==null?void 0:n.type,a=s[t];return i&&!r.includes(i)?iu(i,a):Ta(a)},iu=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return yp(e,s)}switch(t){case me.bool:return mp(e);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return gp(e);case me.json:case me.jsonb:return pp(e);case me.timestamp:return xp(e);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return Ta(e);default:return Ta(e)}},Ta=t=>t,mp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},gp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},yp=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,s);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>iu(e,o))}return t},xp=t=>typeof t=="string"?t.replace(" ","T"):t,au=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class zi{constructor(e,s,r={},n=ru){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Nl;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Nl||(Nl={}));class Pr{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pr.syncState(this.state,n,i,a),this.pendingDiffs.forEach(l=>{this.state=Pr.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Pr.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),a=this.transformState(s),o={},l={};return this.map(i,(d,h)=>{a[d]||(l[d]=h)}),this.map(a,(d,h)=>{const u=i[d];if(u){const f=h.map(y=>y.presence_ref),m=u.map(y=>y.presence_ref),p=h.filter(y=>m.indexOf(y.presence_ref)<0),g=u.filter(y=>f.indexOf(y.presence_ref)<0);p.length>0&&(o[d]=p),g.length>0&&(l[d]=g)}else o[d]=h}),this.syncDiff(i,{joins:o,leaves:l},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:a}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(o,l)=>{var d;const h=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(l),h.length>0){const u=e[o].map(m=>m.presence_ref),f=h.filter(m=>u.indexOf(m.presence_ref)<0);e[o].unshift(...f)}r(o,h,l)}),this.map(a,(o,l)=>{let d=e[o];if(!d)return;const h=l.map(u=>u.presence_ref);d=d.filter(u=>h.indexOf(u.presence_ref)<0),e[o]=d,n(o,d,l),d.length===0&&delete e[o]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tl;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Tl||(Tl={}));var Al;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Al||(Al={}));var At;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(At||(At={}));class vo{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new zi(this,at.join,this.params,this.timeout),this.rejoinTimer=new nu(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ke.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(at.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Pr(this),this.broadcastEndpointURL=au(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(h=>e==null?void 0:e(At.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(At.CLOSED));const l={},d={broadcast:i,presence:a,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:h})=>{var u;if(this.socket.setAuth(),h===void 0){e==null||e(At.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,p=[];for(let g=0;g<m;g++){const y=f[g],{filter:{event:v,schema:k,table:S,filter:C}}=y,T=h&&h[g];if(T&&T.event===v&&T.schema===k&&T.table===S&&T.filter===C)p.push(Object.assign(Object.assign({},y),{id:T.id}));else{this.unsubscribe(),e==null||e(At.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(At.SUBSCRIBED);return}}).receive("error",h=>{e==null||e(At.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(At.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ke.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(at.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const n=new zi(this,at.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),a}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new zi(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:d,join:h}=at;if(r&&[o,l,d,h].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,s,r);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var p,g,y;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(m=>m.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var p,g,y,v,k,S;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const C=m.id,T=(p=m.filter)===null||p===void 0?void 0:p.event;return C&&((g=s.ids)===null||g===void 0?void 0:g.includes(C))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((y=s.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const C=(k=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return C==="*"||C===((S=s==null?void 0:s.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:g,table:y,commit_timestamp:v,type:k,errors:S}=p;f=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:v,eventType:k,new:{},old:{},errors:S}),this._getPayloadRecords(p))}m.callback(f,r)})}_isClosed(){return this.state===Ke.closed}_isJoined(){return this.state===Ke.joined}_isJoining(){return this.state===Ke.joining}_isLeaving(){return this.state===Ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&vo.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(at.close,{},e)}_onError(e){this._on(at.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Sl(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Sl(e.columns,e.old_record)),s}}const bp=()=>{},vp=typeof WebSocket<"u",wp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _p{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=cp,this.params={},this.timeout=ru,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=bp,this.conn=null,this.sendBuffer=[],this.serializer=new up,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Ws(async()=>{const{default:l}=await Promise.resolve().then(()=>Xs);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${Na.websocket}`,this.httpEndpoint=au(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,a)=>a(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new nu(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(vp){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new kp(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Ws(async()=>{const{default:e}=await import("./browser-DngoxVSz.js").then(s=>s.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:dp}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vs.connecting:return ps.Connecting;case Vs.open:return ps.Open;case Vs.closing:return ps.Closing;default:return ps.Closed}}isConnected(){return this.connectionState()===ps.Open}channel(e,s={config:{}}){const r=new vo(`realtime:${e}`,s,this);return this.channels.push(r),r}push(e){const{topic:s,event:r,payload:n,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let r=null;try{r=JSON.parse(atob(s.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=s,this.channels.forEach(n=>{s&&n.updateJoinPayload({access_token:s}),n.joinedOnce&&n._isJoined()&&n._push(at.access_token,{access_token:s})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(hp,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:a}=s;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(r)).forEach(o=>o._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(at.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([wp],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class kp{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Vs.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class wo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class jp extends wo{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Aa extends wo{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Sp=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(t,e||[])).next())})};const ou=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ws(async()=>{const{default:r}=await Promise.resolve().then(()=>Xs);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Np=()=>Sp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ws(()=>Promise.resolve().then(()=>Xs),void 0)).Response:Response}),Pa=t=>{if(Array.isArray(t))return t.map(s=>Pa(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Pa(r)}),e};var Ns=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(t,e||[])).next())})};const Hi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Tp=(t,e,s)=>Ns(void 0,void 0,void 0,function*(){const r=yield Np();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{e(new jp(Hi(n),t.status||500))}).catch(n=>{e(new Aa(Hi(n),n))}):e(new Aa(Hi(t),t))}),Ap=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(n.body=JSON.stringify(r)),Object.assign(Object.assign({},n),s))};function sn(t,e,s,r,n,i){return Ns(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(s,Ap(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Tp(l,o,r))})})}function Xn(t,e,s,r){return Ns(this,void 0,void 0,function*(){return sn(t,"GET",e,s,r)})}function zt(t,e,s,r,n){return Ns(this,void 0,void 0,function*(){return sn(t,"POST",e,r,n,s)})}function Pp(t,e,s,r,n){return Ns(this,void 0,void 0,function*(){return sn(t,"PUT",e,r,n,s)})}function Ep(t,e,s,r){return Ns(this,void 0,void 0,function*(){return sn(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function lu(t,e,s,r,n){return Ns(this,void 0,void 0,function*(){return sn(t,"DELETE",e,r,n,s)})}var Ue=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(t,e||[])).next())})};const Cp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Pl={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Rp{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=ou(n)}uploadOrUpdate(e,s,r,n){return Ue(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Pl),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const d=this._removeEmptyFolders(s),h=this._getFinalPath(d),u=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield u.json();return u.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Ne(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Ue(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",s);try{let l;const d=Object.assign({upsert:Pl.upsert},n),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const u=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:h}),f=yield u.json();return u.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Ne(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return Ue(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield zt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new wo("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}update(e,s,r){return Ue(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return Ue(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}copy(e,s,r){return Ue(this,void 0,void 0,function*(){try{return{data:{path:(yield zt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,r){return Ue(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield zt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Ue(this,void 0,void 0,function*(){try{const n=yield zt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}download(e,s){return Ue(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Xn(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Ne(o))return{data:null,error:o};throw o}})}info(e){return Ue(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield Xn(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Pa(r),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}exists(e){return Ue(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Ep(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ne(r)&&r instanceof Aa){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const o=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&n.push(l);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${d}`)}}}remove(e){return Ue(this,void 0,void 0,function*(){try{return{data:yield lu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}list(e,s,r){return Ue(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Cp),s),{prefix:e||""});return{data:yield zt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Op="2.7.1",Dp={"X-Client-Info":`storage-js/${Op}`};var Es=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(t,e||[])).next())})};class Mp{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},Dp),s),this.fetch=ou(r)}listBuckets(){return Es(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ne(e))return{data:null,error:e};throw e}})}getBucket(e){return Es(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Es(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Es(this,void 0,void 0,function*(){try{return{data:yield Pp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Es(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Es(this,void 0,void 0,function*(){try{return{data:yield lu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ne(s))return{data:null,error:s};throw s}})}}class Lp extends Mp{constructor(e,s={},r){super(e,s,r)}from(e){return new Rp(this.url,this.headers,e,this.fetch)}}const Ip="2.48.1";let vr="";typeof Deno<"u"?vr="deno":typeof document<"u"?vr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vr="react-native":vr="node";const Fp={"X-Client-Info":`supabase-js-${vr}/${Ip}`},Bp={headers:Fp},$p={schema:"public"},Vp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Up={};var zp=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(t,e||[])).next())})};const Hp=t=>{let e;return t?e=t:typeof fetch>"u"?e=qh:e=fetch,(...s)=>e(...s)},Wp=()=>typeof Headers>"u"?Kh:Headers,qp=(t,e,s)=>{const r=Hp(s),n=Wp();return(i,a)=>zp(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let d=new n(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:d}))})};var Kp=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(t,e||[])).next())})};function Gp(t){return t.replace(/\/$/,"")}function Yp(t,e){const{db:s,auth:r,realtime:n,global:i}=t,{db:a,auth:o,realtime:l,global:d}=e,h={db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),n),global:Object.assign(Object.assign({},d),i),accessToken:()=>Kp(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const cu="2.67.3",Xp="http://localhost:9999",Jp="supabase.auth.token",Zp={"X-Client-Info":`gotrue-js/${cu}`},El=10,Ea="X-Supabase-Api-Version",du={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Qp(t){return Math.round(Date.now()/1e3)+t}function e0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const pt=()=>typeof window<"u"&&typeof document<"u",ns={tested:!1,writable:!1},Er=()=>{if(!pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ns.tested)return ns.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ns.tested=!0,ns.writable=!0}catch{ns.tested=!0,ns.writable=!1}return ns.writable};function t0(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const hu=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ws(async()=>{const{default:r}=await Promise.resolve().then(()=>Xs);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},s0=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",uu=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},fn=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},mn=async(t,e)=>{await t.removeItem(e)};function r0(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,n,i,a,o,l,d,h=0;for(t=t.replace("-","+").replace("_","/");h<t.length;)a=e.indexOf(t.charAt(h++)),o=e.indexOf(t.charAt(h++)),l=e.indexOf(t.charAt(h++)),d=e.indexOf(t.charAt(h++)),r=a<<2|o>>4,n=(o&15)<<4|l>>2,i=(l&3)<<6|d,s=s+String.fromCharCode(r),l!=64&&n!=0&&(s=s+String.fromCharCode(n)),d!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class Ni{constructor(){this.promise=new Ni.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Ni.promiseConstructor=Promise;function Cl(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=t.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=s[1];return JSON.parse(r0(r))}async function n0(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function i0(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function a0(t){return("0"+t.toString(16)).substr(-2)}function o0(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,a0).join("")}async function l0(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function c0(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function d0(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await l0(t);return c0(s)}async function Cs(t,e,s=!1){const r=o0();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await uu(t,`${e}-code-verifier`,n);const i=await d0(r);return[i,r===i?"plain":"s256"]}const h0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function u0(t){const e=t.headers.get(Ea);if(!e||!e.match(h0))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class _o extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function te(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class f0 extends _o{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function m0(t){return te(t)&&t.name==="AuthApiError"}class fu extends _o{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Ts extends _o{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class Bt extends Ts{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function g0(t){return te(t)&&t.name==="AuthSessionMissingError"}class Wi extends Ts{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gn extends Ts{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pn extends Ts{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function p0(t){return te(t)&&t.name==="AuthImplicitGrantRedirectError"}class Rl extends Ts{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ca extends Ts{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function qi(t){return te(t)&&t.name==="AuthRetryableFetchError"}class Ol extends Ts{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}var y0=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const ds=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),x0=[502,503,504];async function Dl(t){var e;if(!s0(t))throw new Ca(ds(t),0);if(x0.includes(t.status))throw new Ca(ds(t),t.status);let s;try{s=await t.json()}catch(i){throw new fu(ds(i),i)}let r;const n=u0(t);if(n&&n.getTime()>=du["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Ol(ds(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Bt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Ol(ds(s),t.status,s.weak_password.reasons);throw new f0(ds(s),t.status||500,r)}const b0=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function ne(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Ea]||(i[Ea]=du["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await v0(t,e,s+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function v0(t,e,s,r,n,i){const a=b0(e,r,n,i);let o;try{o=await t(s,Object.assign({},a))}catch(l){throw console.error(l),new Ca(ds(l),0)}if(o.ok||await Dl(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await Dl(l)}}function $t(t){var e;let s=null;j0(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Qp(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function Ml(t){const e=$t(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Wt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function w0(t){return{data:t,error:null}}function _0(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,a=y0(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function k0(t){return t}function j0(t){return t.access_token&&t.refresh_token&&t.expires_in}var S0=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class N0{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=hu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await ne(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Wt})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=S0(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:_0,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(te(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await ne(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wt})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,a,o,l;try{const d={nextPage:null,lastPage:0,total:0},h=await ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:k0});if(h.error)throw h.error;const u=await h.json(),f=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);d[`${y}Page`]=g}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(te(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await ne(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wt})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await ne(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Wt})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){try{return await ne(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Wt})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:s,error:r}=await ne(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(te(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await ne(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}}}const T0={getItem:t=>Er()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Er()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Er()&&globalThis.localStorage.removeItem(t)}};function Ll(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function A0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Rs={debug:!!(globalThis&&Er()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class P0 extends mu{}async function E0(t,e,s){Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new P0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Rs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}A0();const C0={url:Xp,storageKey:Jp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Zp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},lr=30*1e3,Il=3;async function Fl(t,e,s){return await s()}class Ur{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ur.nextInstanceID,Ur.nextInstanceID+=1,this.instanceID>0&&pt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},C0),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new N0({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=hu(n.fetch),this.lock=n.lock||Fl,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:pt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=E0:this.lock=Fl,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Er()?this.storage=T0:(this.memoryStorage={},this.storage=Ll(this.memoryStorage)):(this.memoryStorage={},this.storage=Ll(this.memoryStorage)),pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cu}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=t0(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),pt()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),p0(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return te(s)?{error:s}:{error:new fu("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const i=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:$t}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{let i;if("email"in e){const{email:h,password:u,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Cs(this.storage,this.storageKey)),i=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:u,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:$t})}else if("phone"in e){const{phone:h,password:u,options:f}=e;i=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:$t})}else throw new gn("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:a,options:o}=e;s=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ml})}else if("phone"in e){const{phone:i,password:a,options:o}=e;s=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ml})}else throw new gn("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Wi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const s=await fn(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:i,error:a}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:$t});if(await mn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Wi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(te(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:i,nonce:a}=e,o=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:$t}),{data:l,error:d}=o;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Wi}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,a;try{if("email"in e){const{email:o,options:l}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Cs(this.storage,this.storageKey));const{error:u}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:o,options:l}=e,{data:d,error:h}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new gn("You must provide either an email or phone number.")}catch(o){if(te(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var s,r;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:$t});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,d=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Cs(this.storage,this.storageKey)),await ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:w0})}catch(i){if(te(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Bt;const{error:n}=await ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:a}=await ne(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:a,error:o}=await ne(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new gn("You must provide either an email or phone number and a type")}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,d,h)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,h))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wt}):await this._useSession(async s=>{var r,n,i;const{data:a,error:o}=s;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bt}:await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Wt})})}catch(s){if(te(s))return g0(s)&&(await this._removeSession(),await mn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Bt;const a=n.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Cs(this.storage,this.storageKey));const{data:d,error:h}=await ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Wt});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Cl(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bt;const s=Date.now()/1e3;let r=s,n=!0,i=null;const a=Cl(e.access_token);if(a.exp&&(r=a.exp,n=r<=s),n){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(te(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:a,error:o}=s;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Bt;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!pt())throw new pn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Rl("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pn("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Rl("No code detected.");const{data:k,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:d}=e;if(!i||!o||!a||!d)throw new pn("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(o);let f=h+u;l&&(f=parseInt(l));const m=f-h;m*1e3<=lr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${u}s`);const p=f-u;h-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,h):h-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,h);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const v={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:u,expires_at:f,refresh_token:a,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(te(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await fn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const a=(r=n.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(m0(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await mn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=e0(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:a}=s;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Cs(this.storage,this.storageKey,!0));try{return await ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(te(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var a,o,l,d,h;const{data:u,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ne(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(n)throw n;return pt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(te(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)throw a;return await ne(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(te(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await i0(async n=>(n>0&&await n0(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$t})),(n,i)=>{const a=200*Math.pow(2,n);return i&&qi(i)&&Date.now()+a-r<lr})}catch(r){if(this._debug(s,"error",r),te(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),pt()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await fn(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<n+El;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${El}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),qi(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Ni;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Bt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),te(i)){const a={session:null,error:i};return qi(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await uu(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await mn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),lr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/lr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${lr}ms, refresh threshold is ${Il} ticks`),n<=Il&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof mu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Cs(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await ne(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(te(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:a}=s;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:d}=await ne(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(te(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:a,error:o}=await ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(s){if(te(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(te(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(n.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}}Ur.nextInstanceID=0;const R0=Ur;class O0 extends R0{constructor(e){super(e)}}var D0=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(a){a(i)})}return new(s||(s=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(t,e||[])).next())})};class M0{constructor(e,s,r){var n,i,a;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const o=Gp(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:$p,realtime:Up,auth:Object.assign(Object.assign({},Vp),{storageKey:l}),global:Bp},h=Yp(r??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(u,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=qp(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new op(`${o}/rest/v1`,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Ig(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Lp(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return D0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:a,lock:o,debug:l},d,h){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new O0({url:this.authUrl,headers:Object.assign(Object.assign({},u),d),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:a,lock:o,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new _p(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gu=(t,e,s)=>new M0(t,e,s),L0="https://cxjdkqkzmtyudkwwhelq.supabase.co",I0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4amRrcWt6bXR5dWRrd3doZWxxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU4MDE1NzEsImV4cCI6MjA1MTM3NzU3MX0.GIuHV-ov2Zm-G09rOHuy1cIrvrzVaDg7CPQmH3UyrUE",Ee=gu(L0,I0);let F0={data:""},B0=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||F0,$0=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,V0=/\/\*[^]*?\*\/|  +/g,Bl=/\n+/g,qt=(t,e)=>{let s="",r="",n="";for(let i in t){let a=t[i];i[0]=="@"?i[1]=="i"?s=i+" "+a+";":r+=i[1]=="f"?qt(a,i):i+"{"+qt(a,i[1]=="k"?"":e)+"}":typeof a=="object"?r+=qt(a,e?e.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=qt.p?qt.p(i,a):i+":"+a+";")}return s+(e&&n?e+"{"+n+"}":n)+r},kt={},pu=t=>{if(typeof t=="object"){let e="";for(let s in t)e+=s+pu(t[s]);return e}return t},U0=(t,e,s,r,n)=>{let i=pu(t),a=kt[i]||(kt[i]=(l=>{let d=0,h=11;for(;d<l.length;)h=101*h+l.charCodeAt(d++)>>>0;return"go"+h})(i));if(!kt[a]){let l=i!==t?t:(d=>{let h,u,f=[{}];for(;h=$0.exec(d.replace(V0,""));)h[4]?f.shift():h[3]?(u=h[3].replace(Bl," ").trim(),f.unshift(f[0][u]=f[0][u]||{})):f[0][h[1]]=h[2].replace(Bl," ").trim();return f[0]})(t);kt[a]=qt(n?{["@keyframes "+a]:l}:l,s?"":"."+a)}let o=s&&kt.g?kt.g:null;return s&&(kt.g=kt[a]),((l,d,h,u)=>{u?d.data=d.data.replace(u,l):d.data.indexOf(l)===-1&&(d.data=h?l+d.data:d.data+l)})(kt[a],e,r,o),a},z0=(t,e,s)=>t.reduce((r,n,i)=>{let a=e[i];if(a&&a.call){let o=a(s),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=l?"."+l:o&&typeof o=="object"?o.props?"":qt(o,""):o===!1?"":o}return r+n+(a??"")},"");function Ti(t){let e=this||{},s=t.call?t(e.p):t;return U0(s.unshift?s.raw?z0(s,[].slice.call(arguments,1),e.p):s.reduce((r,n)=>Object.assign(r,n&&n.call?n(e.p):n),{}):s,B0(e.target),e.g,e.o,e.k)}let yu,Ra,Oa;Ti.bind({g:1});let Dt=Ti.bind({k:1});function H0(t,e,s,r){qt.p=e,yu=t,Ra=s,Oa=r}function ts(t,e){let s=this||{};return function(){let r=arguments;function n(i,a){let o=Object.assign({},i),l=o.className||n.className;s.p=Object.assign({theme:Ra&&Ra()},o),s.o=/ *go\d+/.test(l),o.className=Ti.apply(s,r)+(l?" "+l:"");let d=t;return t[0]&&(d=o.as||t,delete o.as),Oa&&d[0]&&Oa(o),yu(d,o)}return n}}var W0=t=>typeof t=="function",Da=(t,e)=>W0(t)?t(e):t,q0=(()=>{let t=0;return()=>(++t).toString()})(),K0=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),G0=20,Mn=new Map,Y0=1e3,$l=t=>{if(Mn.has(t))return;let e=setTimeout(()=>{Mn.delete(t),Ai({type:4,toastId:t})},Y0);Mn.set(t,e)},X0=t=>{let e=Mn.get(t);e&&clearTimeout(e)},Ma=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,G0)};case 1:return e.toast.id&&X0(e.toast.id),{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:s}=e;return t.toasts.find(i=>i.id===s.id)?Ma(t,{type:1,toast:s}):Ma(t,{type:0,toast:s});case 3:let{toastId:r}=e;return r?$l(r):t.toasts.forEach(i=>{$l(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let n=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+n}))}}},J0=[],Ki={toasts:[],pausedAt:void 0},Ai=t=>{Ki=Ma(Ki,t),J0.forEach(e=>{e(Ki)})},Z0=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:(s==null?void 0:s.id)||q0()}),rn=t=>(e,s)=>{let r=Z0(e,t,s);return Ai({type:2,toast:r}),r.id},Ce=(t,e)=>rn("blank")(t,e);Ce.error=rn("error");Ce.success=rn("success");Ce.loading=rn("loading");Ce.custom=rn("custom");Ce.dismiss=t=>{Ai({type:3,toastId:t})};Ce.remove=t=>Ai({type:4,toastId:t});Ce.promise=(t,e,s)=>{let r=Ce.loading(e.loading,{...s,...s==null?void 0:s.loading});return t.then(n=>(Ce.success(Da(e.success,n),{id:r,...s,...s==null?void 0:s.success}),n)).catch(n=>{Ce.error(Da(e.error,n),{id:r,...s,...s==null?void 0:s.error})}),t};var Q0=Dt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ey=Dt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ty=Dt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,sy=ts("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Q0} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ey} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ty} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ry=Dt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ny=ts("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${ry} 1s linear infinite;
`,iy=Dt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ay=Dt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,oy=ts("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${iy} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ay} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ly=ts("div")`
  position: absolute;
`,cy=ts("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,dy=Dt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hy=ts("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${dy} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,uy=({toast:t})=>{let{icon:e,type:s,iconTheme:r}=t;return e!==void 0?typeof e=="string"?j.createElement(hy,null,e):e:s==="blank"?null:j.createElement(cy,null,j.createElement(ny,{...r}),s!=="loading"&&j.createElement(ly,null,s==="error"?j.createElement(sy,{...r}):j.createElement(oy,{...r})))},fy=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,my=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,gy="0%{opacity:0;} 100%{opacity:1;}",py="0%{opacity:1;} 100%{opacity:0;}",yy=ts("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,xy=ts("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,by=(t,e)=>{let s=t.includes("top")?1:-1,[r,n]=K0()?[gy,py]:[fy(s),my(s)];return{animation:e?`${Dt(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Dt(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};j.memo(({toast:t,position:e,style:s,children:r})=>{let n=t.height?by(t.position||e||"top-center",t.visible):{opacity:0},i=j.createElement(uy,{toast:t}),a=j.createElement(xy,{...t.ariaProps},Da(t.message,t));return j.createElement(yy,{className:t.className,style:{...n,...s,...t.style}},typeof r=="function"?r({icon:i,message:a}):j.createElement(j.Fragment,null,i,a))});H0(j.createElement);Ti`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Et=Ce;const xu=j.createContext(void 0);function vy({children:t}){const[e,s]=j.useState(null),[r,n]=j.useState(!0),[i,a]=j.useState(null);j.useEffect(()=>{(async()=>{try{const{data:{user:m}}=await Ee.auth.getUser();s(m),m!=null&&m.id&&(localStorage.setItem("userId",m.id),console.log("User ID stored in localStorage:",m.id))}catch(m){console.error("Error checking auth session:",m)}finally{n(!1)}})();const{data:{subscription:f}}=Ee.auth.onAuthStateChange(async(m,p)=>{const g=(p==null?void 0:p.user)??null;s(g),g!=null&&g.id?(localStorage.setItem("userId",g.id),console.log("User ID updated in localStorage:",g.id)):(localStorage.removeItem("userId"),console.log("User ID removed from localStorage")),n(!1)});return()=>{f.unsubscribe()}},[]);const h={user:e,signIn:async(u,f)=>{try{n(!0),a(null);const{data:{user:m},error:p}=await Ee.auth.signInWithPassword({email:u,password:f});if(p)throw p;m&&(s(m),localStorage.setItem("userId",m.id),console.log("User ID stored in localStorage after login:",m.id),Ce.success("Successfully logged in!"))}catch(m){throw a(m.message||"Login failed"),Ce.error(m.message||"Login failed"),m}finally{n(!1)}},signUp:async(u,f,m)=>{try{n(!0),a(null);const{data:{user:p},error:g}=await Ee.auth.signUp({email:u,password:f,options:{data:{name:m}}});if(g)throw g;p&&(s(p),Ce.success("Successfully registered! Please check your email for verification."))}catch(p){throw a(p.message||"Registration failed"),Ce.error(p.message||"Registration failed"),p}finally{n(!1)}},signOut:async()=>{try{n(!0),a(null);const{error:u}=await Ee.auth.signOut();if(u)throw u;s(null),localStorage.removeItem("userId"),console.log("User ID removed from localStorage after logout"),Ce.success("Successfully logged out!")}catch(u){throw a(u.message||"Logout failed"),Ce.error(u.message||"Logout failed"),u}finally{n(!1)}},loading:r,error:i};return c.jsx(xu.Provider,{value:h,children:t})}function ss(){const t=j.useContext(xu);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Oe={ml:{title:"യാ !",home:"ഹോം",analyze:"വിശകലനം",admin:"അഡ്മിൻ",heroTitle:"വ്യാജ വാർത്തകൾ കണ്ടെത്തി സത്യം വെളിപ്പെടുത്തുക",heroSubtitle:"എഐ പവർഡ് ടൂളുകൾ ഉപയോഗിച്ച് വാർത്തകളുടെ വിശ്വാസ്യത പരിശോധിക്കുക",getStarted:"ആരംഭിക്കുക",featureTitle1:"കൃത്യമായ വിശകലനം",featureDesc1:"96% കൃത്യതയോടെ വ്യാജ വാർത്തകൾ തിരിച്ചറിയുന്നു",featureTitle2:"എഐ സാങ്കേതികവിദ്യ",featureDesc2:"ആധുനിക മെഷീൻ ലേണിംഗ് മോഡലുകൾ ഉപയോഗിച്ച് വിശകലനം",featureTitle3:"റിയൽ-ടൈം പരിശോധന",featureDesc3:"സെക്കൻഡുകൾക്കുള്ളിൽ ഫലങ്ങൾ ലഭ്യമാക്കുന്നു",ctaTitle:"ഇന്ന് തന്നെ വാർത്തകൾ പരിശോധിക്കുക",ctaDescription:"ലോകത്തിലെ 65% വാർത്തകളും വ്യാജമോ തെറ്റിദ്ധരിപ്പിക്കുന്നതോ ആണ്",startAnalyzing:"വിശകലനം തുടങ്ങുക",inputLabel:"നിങ്ങളുടെ വാർത്ത ഇവിടെ നൽകുക",placeholder:"വാർത്ത ഇവിടെ പേസ്റ്റ് ചെയ്യുക...",minLengthWarning:"കുറഞ്ഞത് 20 അക്ഷരങ്ങളെങ്കിലും നൽകുക",analyzeButton:"വിശകലനം ചെയ്യുക",reliable:"വിശ്വസനീയം",suspicious:"വ്യാജം",analysisTitle:"വിശകലന സംഗ്രഹം",indicatorsTitle:"വിശ്വാസ്യതാ സൂചികകൾ",reliableAnalysis:"ഞങ്ങളുടെ വിശകലനത്തിൽ ഈ വാർത്ത സത്യമാണ്.",unreliableAnalysis:"ഈ വാർത്ത വ്യാജമാണ്.",confidenceScore:"വിശ്വാസ്യതാ സ്കോർ",footer:"കുറിപ്പ്: ഇതൊരു ഡെമോ പതിപ്പാണ്",adminDashboard:"അഡ്മിൻ ഡാഷ്ബോർഡ്",dashboard:"ഡാഷ്ബോർഡ്",users:"ഉപയോക്താക്കൾ",feedback:"ഫീഡ്ബാക്ക്",totalAnalyses:"ആകെ വിശകലനങ്ങൾ",accuracyRate:"കൃത്യതാ നിരക്ക്",userFeedback:"ഉപയോക്തൃ പ്രതികരണങ്ങൾ",adminPageContent:"സിസ്റ്റം പ്രവർത്തനം മോണിറ്റർ ചെയ്യുക",trending:"ട്രെൻഡിംഗ്",trendingNews:"ട്രെൻഡിംഗ് വാർത്തകൾ",viewAll:"എല്ലാം കാണുക",searchCount:"തിരയൽ എണ്ണം",noTrendingData:"ട്രെൻഡിംഗ് ഡാറ്റ ഇല്ല",trendingTitle:"ട്രെൻഡിംഗ് വാർത്തകൾ",trendingDescription:"ഏറ്റവും കൂടുതൽ പരിശോധിക്കപ്പെട്ട വാർത്തകളും അവയുടെ വിശ്വസനീയതയും",searchInTrending:"ട്രെൻഡിംഗ് വാർത്തകളിൽ തിരയുക",writingStyleAnalysis:"എഴുത്ത് ശൈലി വിശകലനം",sensationalismScore:"അതിശയോക്തി സ്കോർ",writingStyleScore:"എഴുത്ത് ഗുണനിലവാരം",clickbaitScore:"ക്ലിക്ക്ബൈറ്റ് സ്കോർ",highSensationalism:"ഉയർന്ന അതിശയോക്തി കണ്ടെത്തി",analysisHistory:"വിശകലന ചരിത്രം",noAnalysisHistory:"വിശകലന ചരിത്രം ലഭ്യമല്ല"},en:{title:"YEAH!",home:"Home",analyze:"Analyze",admin:"Admin",heroTitle:"Detect Fake News with AI Precision",heroSubtitle:"Verify the credibility of news articles using our advanced AI-powered tools",getStarted:"Get Started",featureTitle1:"Accurate Analysis",featureDesc1:"Detects fake news with 96% accuracy using advanced algorithms",featureTitle2:"AI Technology",featureDesc2:"Powered by state-of-the-art machine learning models",featureTitle3:"Real-time Verification",featureDesc3:"Get results within seconds of submission",ctaTitle:"Start Fact-Checking Today",ctaDescription:"65% of news worldwide is either fake or misleading. Stay informed.",startAnalyzing:"Start Analyzing",inputLabel:"Enter your news text here",placeholder:"Paste your news here...",minLengthWarning:"Please enter at least 20 characters",analyzeButton:"Analyze",reliable:"Real",suspicious:"Fake",analysisTitle:"Analysis Summary",indicatorsTitle:"Credibility Indicators",reliableAnalysis:"Our analysis indicates this is real.",unreliableAnalysis:"This content is fake.",confidenceScore:"Confidence Score",footer:"Note: This is a demo version",adminDashboard:"Admin Dashboard",dashboard:"Dashboard",users:"Users",feedback:"Feedback",totalAnalyses:"Total Analyses",accuracyRate:"Accuracy Rate",userFeedback:"User Feedback",adminPageContent:"Monitor system performance and user activity",trending:"Trending",trendingNews:"Trending News",viewAll:"View All",searchCount:"Search Count",noTrendingData:"No trending data",trendingTitle:"Trending News",trendingDescription:"Most verified news stories and their reliability status",searchInTrending:"Search in trending news",writingStyleAnalysis:"Writing Style Analysis",sensationalismScore:"Sensationalism Score",writingStyleScore:"Writing Quality",clickbaitScore:"Clickbait Score",highSensationalism:"High sensationalism detected",analysisHistory:"Analysis History",noAnalysisHistory:"No analysis history found"}};function wy(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...r)=>t(...r);return new Proxy(s,{get:(r,n)=>n==="create"?t:(e.has(n)||e.set(n,t(n)),e.get(n))})}function Pi(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const La=t=>Array.isArray(t);function bu(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}function zr(t){return typeof t=="string"||Array.isArray(t)}function Vl(t){const e=[{},{}];return t==null||t.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function ko(t,e,s,r){if(typeof e=="function"){const[n,i]=Vl(r);e=e(s!==void 0?s:t.custom,n,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[n,i]=Vl(r);e=e(s!==void 0?s:t.custom,n,i)}return e}function Ei(t,e,s){const r=t.getProps();return ko(r,e,s!==void 0?s:r.custom,t)}const jo=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],So=["initial",...jo],nn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],As=new Set(nn),Ct=t=>t*1e3,Rt=t=>t/1e3,_y={type:"spring",stiffness:500,damping:25,restSpeed:10},ky=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jy={type:"keyframes",duration:.8},Sy={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ny=(t,{keyframes:e})=>e.length>2?jy:As.has(t)?t.startsWith("scale")?ky(e[1]):_y:Sy;function No(t,e){return t?t[e]||t.default||t:void 0}const Ty={skipAnimations:!1,useManualTiming:!1},Ay=t=>t!==null;function Ci(t,{repeat:e,repeatType:s="loop"},r){const n=t.filter(Ay),i=e&&s!=="loop"&&e%2===1?0:n.length-1;return!i||r===void 0?n[i]:r}const Be=t=>t;let Py=Be,Ia=Be;function Ey(t){let e=new Set,s=new Set,r=!1,n=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(d){i.has(d)&&(l.schedule(d),t()),d(a)}const l={schedule:(d,h=!1,u=!1)=>{const m=u&&r?e:s;return h&&i.add(d),m.has(d)||m.add(d),d},cancel:d=>{s.delete(d),i.delete(d)},process:d=>{if(a=d,r){n=!0;return}r=!0,[e,s]=[s,e],s.clear(),e.forEach(o),r=!1,n&&(n=!1,l.process(d))}};return l}const yn=["read","resolveKeyframes","update","preRender","render","postRender"],Cy=40;function vu(t,e){let s=!1,r=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,a=yn.reduce((v,k)=>(v[k]=Ey(i),v),{}),{read:o,resolveKeyframes:l,update:d,preRender:h,render:u,postRender:f}=a,m=()=>{const v=performance.now();s=!1,n.delta=r?1e3/60:Math.max(Math.min(v-n.timestamp,Cy),1),n.timestamp=v,n.isProcessing=!0,o.process(n),l.process(n),d.process(n),h.process(n),u.process(n),f.process(n),n.isProcessing=!1,s&&e&&(r=!1,t(m))},p=()=>{s=!0,r=!0,n.isProcessing||t(m)};return{schedule:yn.reduce((v,k)=>{const S=a[k];return v[k]=(C,T=!1,O=!1)=>(s||p(),S.schedule(C,T,O)),v},{}),cancel:v=>{for(let k=0;k<yn.length;k++)a[yn[k]].cancel(v)},state:n,steps:a}}const{schedule:ce,cancel:ct,state:Te,steps:Gi}=vu(typeof requestAnimationFrame<"u"?requestAnimationFrame:Be,!0),wu=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,Ry=1e-7,Oy=12;function Dy(t,e,s,r,n){let i,a,o=0;do a=e+(s-e)/2,i=wu(a,r,n)-t,i>0?s=a:e=a;while(Math.abs(i)>Ry&&++o<Oy);return a}function an(t,e,s,r){if(t===e&&s===r)return Be;const n=i=>Dy(i,0,1,t,s);return i=>i===0||i===1?i:wu(n(i),e,r)}const _u=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ku=t=>e=>1-t(1-e),ju=an(.33,1.53,.69,.99),To=ku(ju),Su=_u(To),Nu=t=>(t*=2)<1?.5*To(t):.5*(2-Math.pow(2,-10*(t-1))),Ao=t=>1-Math.sin(Math.acos(t)),Tu=ku(Ao),Au=_u(Ao),Pu=t=>/^0[^.\s]+$/u.test(t);function My(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Pu(t):!0}const Eu=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Cu=t=>e=>typeof e=="string"&&e.startsWith(t),Ru=Cu("--"),Ly=Cu("var(--"),Po=t=>Ly(t)?Iy.test(t.split("/*")[0].trim()):!1,Iy=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fy=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function By(t){const e=Fy.exec(t);if(!e)return[,];const[,s,r,n]=e;return[`--${s??r}`,n]}function Ou(t,e,s=1){const[r,n]=By(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return Eu(a)?parseFloat(a):a}return Po(n)?Ou(n,e,s+1):n}const Mt=(t,e,s)=>s>e?e:s<t?t:s,Zs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Hr={...Zs,transform:t=>Mt(0,1,t)},xn={...Zs,default:1},on=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Vt=on("deg"),vt=on("%"),Y=on("px"),$y=on("vh"),Vy=on("vw"),Ul={...vt,parse:t=>vt.parse(t)/100,transform:t=>vt.transform(t*100)},Uy=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),zl=t=>t===Zs||t===Y,Hl=(t,e)=>parseFloat(t.split(", ")[e]),Wl=(t,e)=>(s,{transform:r})=>{if(r==="none"||!r)return 0;const n=r.match(/^matrix3d\((.+)\)$/u);if(n)return Hl(n[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?Hl(i[1],t):0}},zy=new Set(["x","y","z"]),Hy=nn.filter(t=>!zy.has(t));function Wy(t){const e=[];return Hy.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const Ks={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Wl(4,13),y:Wl(5,14)};Ks.translateX=Ks.x;Ks.translateY=Ks.y;const Du=t=>e=>e.test(t),qy={test:t=>t==="auto",parse:t=>t},Mu=[Zs,Y,vt,Vt,Vy,$y,qy],ql=t=>Mu.find(Du(t)),ws=new Set;let Fa=!1,Ba=!1;function Lu(){if(Ba){const t=Array.from(ws).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const n=Wy(r);n.length&&(s.set(r,n),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const n=s.get(r);n&&n.forEach(([i,a])=>{var o;(o=r.getValue(i))===null||o===void 0||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ba=!1,Fa=!1,ws.forEach(t=>t.complete()),ws.clear()}function Iu(){ws.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ba=!0)})}function Ky(){Iu(),Lu()}class Eo{constructor(e,s,r,n,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=n,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ws.add(this),Fa||(Fa=!0,ce.read(Iu),ce.resolveKeyframes(Lu))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:n}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const a=n==null?void 0:n.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&s){const l=r.readValue(s,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),n&&a===void 0&&n.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ws.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ws.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Cr=t=>Math.round(t*1e5)/1e5,Co=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Gy(t){return t==null}const Yy=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ro=(t,e)=>s=>!!(typeof s=="string"&&Yy.test(s)&&s.startsWith(t)||e&&!Gy(s)&&Object.prototype.hasOwnProperty.call(s,e)),Fu=(t,e,s)=>r=>{if(typeof r!="string")return r;const[n,i,a,o]=r.match(Co);return{[t]:parseFloat(n),[e]:parseFloat(i),[s]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Xy=t=>Mt(0,255,t),Yi={...Zs,transform:t=>Math.round(Xy(t))},bs={test:Ro("rgb","red"),parse:Fu("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+Yi.transform(t)+", "+Yi.transform(e)+", "+Yi.transform(s)+", "+Cr(Hr.transform(r))+")"};function Jy(t){let e="",s="",r="",n="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),n=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),n=t.substring(4,5),e+=e,s+=s,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}}const $a={test:Ro("#"),parse:Jy,transform:bs.transform},Ms={test:Ro("hsl","hue"),parse:Fu("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+vt.transform(Cr(e))+", "+vt.transform(Cr(s))+", "+Cr(Hr.transform(r))+")"},Le={test:t=>bs.test(t)||$a.test(t)||Ms.test(t),parse:t=>bs.test(t)?bs.parse(t):Ms.test(t)?Ms.parse(t):$a.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bs.transform(t):Ms.transform(t)},Zy=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qy(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Co))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(Zy))===null||s===void 0?void 0:s.length)||0)>0}const Bu="number",$u="color",ex="var",tx="var(",Kl="${}",sx=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wr(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},n=[];let i=0;const o=e.replace(sx,l=>(Le.test(l)?(r.color.push(i),n.push($u),s.push(Le.parse(l))):l.startsWith(tx)?(r.var.push(i),n.push(ex),s.push(l)):(r.number.push(i),n.push(Bu),s.push(parseFloat(l))),++i,Kl)).split(Kl);return{values:s,split:o,indexes:r,types:n}}function Vu(t){return Wr(t).values}function Uu(t){const{split:e,types:s}=Wr(t),r=e.length;return n=>{let i="";for(let a=0;a<r;a++)if(i+=e[a],n[a]!==void 0){const o=s[a];o===Bu?i+=Cr(n[a]):o===$u?i+=Le.transform(n[a]):i+=n[a]}return i}}const rx=t=>typeof t=="number"?0:t;function nx(t){const e=Vu(t);return Uu(t)(e.map(rx))}const Zt={test:Qy,parse:Vu,createTransformer:Uu,getAnimatableNone:nx},ix=new Set(["brightness","contrast","saturate","opacity"]);function ax(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(Co)||[];if(!r)return t;const n=s.replace(r,"");let i=ix.has(e)?1:0;return r!==s&&(i*=100),e+"("+i+n+")"}const ox=/\b([a-z-]*)\(.*?\)/gu,Va={...Zt,getAnimatableNone:t=>{const e=t.match(ox);return e?e.map(ax).join(" "):t}},lx={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,backgroundPositionX:Y,backgroundPositionY:Y},cx={rotate:Vt,rotateX:Vt,rotateY:Vt,rotateZ:Vt,scale:xn,scaleX:xn,scaleY:xn,scaleZ:xn,skew:Vt,skewX:Vt,skewY:Vt,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:Hr,originX:Ul,originY:Ul,originZ:Y},Gl={...Zs,transform:Math.round},Oo={...lx,...cx,zIndex:Gl,size:Y,fillOpacity:Hr,strokeOpacity:Hr,numOctaves:Gl},dx={...Oo,color:Le,backgroundColor:Le,outlineColor:Le,fill:Le,stroke:Le,borderColor:Le,borderTopColor:Le,borderRightColor:Le,borderBottomColor:Le,borderLeftColor:Le,filter:Va,WebkitFilter:Va},Do=t=>dx[t];function zu(t,e){let s=Do(t);return s!==Va&&(s=Zt),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const hx=new Set(["auto","none","0"]);function ux(t,e,s){let r=0,n;for(;r<t.length&&!n;){const i=t[r];typeof i=="string"&&!hx.has(i)&&Wr(i).values.length&&(n=t[r]),r++}if(n&&s)for(const i of e)t[i]=zu(s,n)}class Hu extends Eo{constructor(e,s,r,n,i){super(e,s,r,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let d=e[l];if(typeof d=="string"&&(d=d.trim(),Po(d))){const h=Ou(d,s.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Uy.has(r)||e.length!==2)return;const[n,i]=e,a=ql(n),o=ql(i);if(a!==o)if(zl(a)&&zl(o))for(let l=0;l<e.length;l++){const d=e[l];typeof d=="string"&&(e[l]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let n=0;n<e.length;n++)My(e[n])&&r.push(n);r.length&&ux(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ks[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const n=s[s.length-1];n!==void 0&&e.getValue(r,n).jump(n,!1)}measureEndState(){var e;const{element:s,name:r,unresolvedKeyframes:n}=this;if(!s||!s.current)return;const i=s.getValue(r);i&&i.jump(this.measuredOrigin,!1);const a=n.length-1,o=n[a];n[a]=Ks[r](s.measureViewportBox(),window.getComputedStyle(s.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,d])=>{s.getValue(l).set(d)}),this.resolveNoneKeyframes()}}function Mo(t){return typeof t=="function"}let Ln;function fx(){Ln=void 0}const wt={now:()=>(Ln===void 0&&wt.set(Te.isProcessing||Ty.useManualTiming?Te.timestamp:performance.now()),Ln),set:t=>{Ln=t,queueMicrotask(fx)}},Yl=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zt.test(t)||t==="0")&&!t.startsWith("url("));function mx(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function gx(t,e,s,r){const n=t[0];if(n===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=Yl(n,e),o=Yl(i,e);return!a||!o?!1:mx(t)||(s==="spring"||Mo(s))&&r}const px=40;class Wu{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=wt.now(),this.options={autoplay:e,delay:s,type:r,repeat:n,repeatDelay:i,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>px?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Ky(),this._resolved}onKeyframesResolved(e,s){this.resolvedAt=wt.now(),this.hasAttemptedResolve=!0;const{name:r,type:n,velocity:i,delay:a,onComplete:o,onUpdate:l,isGenerator:d}=this.options;if(!d&&!gx(e,r,n,i))if(a)this.options.duration=0;else{l==null||l(Ci(e,this.options,s)),o==null||o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,s);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:s,...h},this.onPostResolved())}onPostResolved(){}then(e,s){return this.currentFinishedPromise.then(e,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const js=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r},qu=(t,e,s=10)=>{let r="";const n=Math.max(Math.round(e/s),2);for(let i=0;i<n;i++)r+=t(js(0,n-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function Lo(t,e){return e?t*(1e3/e):0}const yx=5;function Ku(t,e,s){const r=Math.max(e-yx,0);return Lo(s-t(r),e-r)}const we={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xi=.001;function xx({duration:t=we.duration,bounce:e=we.bounce,velocity:s=we.velocity,mass:r=we.mass}){let n,i,a=1-e;a=Mt(we.minDamping,we.maxDamping,a),t=Mt(we.minDuration,we.maxDuration,Rt(t)),a<1?(n=d=>{const h=d*a,u=h*t,f=h-s,m=Ua(d,a),p=Math.exp(-u);return Xi-f/m*p},i=d=>{const u=d*a*t,f=u*s+s,m=Math.pow(a,2)*Math.pow(d,2)*t,p=Math.exp(-u),g=Ua(Math.pow(d,2),a);return(-n(d)+Xi>0?-1:1)*((f-m)*p)/g}):(n=d=>{const h=Math.exp(-d*t),u=(d-s)*t+1;return-Xi+h*u},i=d=>{const h=Math.exp(-d*t),u=(s-d)*(t*t);return h*u});const o=5/t,l=vx(n,i,o);if(t=Ct(t),isNaN(l))return{stiffness:we.stiffness,damping:we.damping,duration:t};{const d=Math.pow(l,2)*r;return{stiffness:d,damping:a*2*Math.sqrt(r*d),duration:t}}}const bx=12;function vx(t,e,s){let r=s;for(let n=1;n<bx;n++)r=r-t(r)/e(r);return r}function Ua(t,e){return t*Math.sqrt(1-e*e)}const za=2e4;function Gu(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<za;)e+=s,r=t.next(e);return e>=za?1/0:e}const wx=["duration","bounce"],_x=["stiffness","damping","mass"];function Xl(t,e){return e.some(s=>t[s]!==void 0)}function kx(t){let e={velocity:we.velocity,stiffness:we.stiffness,damping:we.damping,mass:we.mass,isResolvedFromDuration:!1,...t};if(!Xl(t,_x)&&Xl(t,wx))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),n=r*r,i=2*Mt(.05,1,1-t.bounce)*Math.sqrt(n);e={...e,mass:we.mass,stiffness:n,damping:i}}else{const s=xx(t);e={...e,...s,mass:we.mass},e.isResolvedFromDuration=!0}return e}function Yu(t=we.visualDuration,e=we.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:n}=s;const i=s.keyframes[0],a=s.keyframes[s.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:d,mass:h,duration:u,velocity:f,isResolvedFromDuration:m}=kx({...s,velocity:-Rt(s.velocity||0)}),p=f||0,g=d/(2*Math.sqrt(l*h)),y=a-i,v=Rt(Math.sqrt(l/h)),k=Math.abs(y)<5;r||(r=k?we.restSpeed.granular:we.restSpeed.default),n||(n=k?we.restDelta.granular:we.restDelta.default);let S;if(g<1){const T=Ua(v,g);S=O=>{const M=Math.exp(-g*v*O);return a-M*((p+g*v*y)/T*Math.sin(T*O)+y*Math.cos(T*O))}}else if(g===1)S=T=>a-Math.exp(-v*T)*(y+(p+v*y)*T);else{const T=v*Math.sqrt(g*g-1);S=O=>{const M=Math.exp(-g*v*O),b=Math.min(T*O,300);return a-M*((p+g*v*y)*Math.sinh(b)+T*y*Math.cosh(b))/T}}const C={calculatedDuration:m&&u||null,next:T=>{const O=S(T);if(m)o.done=T>=u;else{let M=0;g<1&&(M=T===0?Ct(p):Ku(S,T,O));const b=Math.abs(M)<=r,x=Math.abs(a-O)<=n;o.done=b&&x}return o.value=o.done?a:O,o},toString:()=>{const T=Math.min(Gu(C),za),O=qu(M=>C.next(T*M).value,T,30);return T+"ms "+O}};return C}function Jl({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:l,restDelta:d=.5,restSpeed:h}){const u=t[0],f={done:!1,value:u},m=b=>o!==void 0&&b<o||l!==void 0&&b>l,p=b=>o===void 0?l:l===void 0||Math.abs(o-b)<Math.abs(l-b)?o:l;let g=s*e;const y=u+g,v=a===void 0?y:a(y);v!==y&&(g=v-u);const k=b=>-g*Math.exp(-b/r),S=b=>v+k(b),C=b=>{const x=k(b),_=S(b);f.done=Math.abs(x)<=d,f.value=f.done?v:_};let T,O;const M=b=>{m(f.value)&&(T=b,O=Yu({keyframes:[f.value,p(f.value)],velocity:Ku(S,b,f.value),damping:n,stiffness:i,restDelta:d,restSpeed:h}))};return M(0),{calculatedDuration:null,next:b=>{let x=!1;return!O&&T===void 0&&(x=!0,C(b),M(b)),T!==void 0&&b>=T?O.next(b-T):(!x&&C(b),f)}}}const jx=an(.42,0,1,1),Sx=an(0,0,.58,1),Xu=an(.42,0,.58,1),Nx=t=>Array.isArray(t)&&typeof t[0]!="number",Io=t=>Array.isArray(t)&&typeof t[0]=="number",Zl={linear:Be,easeIn:jx,easeInOut:Xu,easeOut:Sx,circIn:Ao,circInOut:Au,circOut:Tu,backIn:To,backInOut:Su,backOut:ju,anticipate:Nu},Ql=t=>{if(Io(t)){Ia(t.length===4);const[e,s,r,n]=t;return an(e,s,r,n)}else if(typeof t=="string")return Ia(Zl[t]!==void 0),Zl[t];return t},Tx=(t,e)=>s=>e(t(s)),ln=(...t)=>t.reduce(Tx),xe=(t,e,s)=>t+(e-t)*s;function Ji(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function Ax({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let n=0,i=0,a=0;if(!e)n=i=a=s;else{const o=s<.5?s*(1+e):s+e-s*e,l=2*s-o;n=Ji(l,o,t+1/3),i=Ji(l,o,t),a=Ji(l,o,t-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Jn(t,e){return s=>s>0?e:t}const Zi=(t,e,s)=>{const r=t*t,n=s*(e*e-r)+r;return n<0?0:Math.sqrt(n)},Px=[$a,bs,Ms],Ex=t=>Px.find(e=>e.test(t));function ec(t){const e=Ex(t);if(!e)return!1;let s=e.parse(t);return e===Ms&&(s=Ax(s)),s}const tc=(t,e)=>{const s=ec(t),r=ec(e);if(!s||!r)return Jn(t,e);const n={...s};return i=>(n.red=Zi(s.red,r.red,i),n.green=Zi(s.green,r.green,i),n.blue=Zi(s.blue,r.blue,i),n.alpha=xe(s.alpha,r.alpha,i),bs.transform(n))},Ha=new Set(["none","hidden"]);function Cx(t,e){return Ha.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function Rx(t,e){return s=>xe(t,e,s)}function Fo(t){return typeof t=="number"?Rx:typeof t=="string"?Po(t)?Jn:Le.test(t)?tc:Mx:Array.isArray(t)?Ju:typeof t=="object"?Le.test(t)?tc:Ox:Jn}function Ju(t,e){const s=[...t],r=s.length,n=t.map((i,a)=>Fo(i)(i,e[a]));return i=>{for(let a=0;a<r;a++)s[a]=n[a](i);return s}}function Ox(t,e){const s={...t,...e},r={};for(const n in s)t[n]!==void 0&&e[n]!==void 0&&(r[n]=Fo(t[n])(t[n],e[n]));return n=>{for(const i in r)s[i]=r[i](n);return s}}function Dx(t,e){var s;const r=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][n[a]],l=(s=t.values[o])!==null&&s!==void 0?s:0;r[i]=l,n[a]++}return r}const Mx=(t,e)=>{const s=Zt.createTransformer(e),r=Wr(t),n=Wr(e);return r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length?Ha.has(t)&&!n.values.length||Ha.has(e)&&!r.values.length?Cx(t,e):ln(Ju(Dx(r,n),n.values),s):Jn(t,e)};function Zu(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?xe(t,e,s):Fo(t)(t,e)}function Lx(t,e,s){const r=[],n=s||Zu,i=t.length-1;for(let a=0;a<i;a++){let o=n(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Be:e;o=ln(l,o)}r.push(o)}return r}function Bo(t,e,{clamp:s=!0,ease:r,mixer:n}={}){const i=t.length;if(Ia(i===e.length),i===1)return()=>e[0];if(i===2&&t[0]===t[1])return()=>e[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Lx(e,r,n),o=a.length,l=d=>{let h=0;if(o>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const u=js(t[h],t[h+1],d);return a[h](u)};return s?d=>l(Mt(t[0],t[i-1],d)):l}function Ix(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const n=js(0,e,r);t.push(xe(s,1,n))}}function Qu(t){const e=[0];return Ix(e,t.length-1),e}function Fx(t,e){return t.map(s=>s*e)}function Bx(t,e){return t.map(()=>e||Xu).splice(0,t.length-1)}function Zn({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const n=Nx(r)?r.map(Ql):Ql(r),i={done:!1,value:e[0]},a=Fx(s&&s.length===e.length?s:Qu(e),t),o=Bo(a,e,{ease:Array.isArray(n)?n:Bx(e,n)});return{calculatedDuration:t,next:l=>(i.value=o(l),i.done=l>=t,i)}}const $x=t=>{const e=({timestamp:s})=>t(s);return{start:()=>ce.update(e,!0),stop:()=>ct(e),now:()=>Te.isProcessing?Te.timestamp:wt.now()}},Vx={decay:Jl,inertia:Jl,tween:Zn,keyframes:Zn,spring:Yu},Ux=t=>t/100;class $o extends Wu{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:s,motionValue:r,element:n,keyframes:i}=this.options,a=(n==null?void 0:n.KeyframeResolver)||Eo,o=(l,d)=>this.onKeyframesResolved(l,d);this.resolver=new a(i,o,s,r,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:s="keyframes",repeat:r=0,repeatDelay:n=0,repeatType:i,velocity:a=0}=this.options,o=Mo(s)?s:Vx[s]||Zn;let l,d;o!==Zn&&typeof e[0]!="number"&&(l=ln(Ux,Zu(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});i==="mirror"&&(d=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=Gu(h));const{calculatedDuration:u}=h,f=u+n,m=f*(r+1)-n;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:l,calculatedDuration:u,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,s=!1){const{resolved:r}=this;if(!r){const{keyframes:b}=this.options;return{done:!0,value:b[b.length-1]}}const{finalKeyframe:n,generator:i,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:d,totalDuration:h,resolvedDuration:u}=r;if(this.startTime===null)return i.next(0);const{delay:f,repeat:m,repeatType:p,repeatDelay:g,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),s?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-f*(this.speed>=0?1:-1),k=this.speed>=0?v<0:v>h;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let S=this.currentTime,C=i;if(m){const b=Math.min(this.currentTime,h)/u;let x=Math.floor(b),_=b%1;!_&&b>=1&&(_=1),_===1&&x--,x=Math.min(x,m+1),!!(x%2)&&(p==="reverse"?(_=1-_,g&&(_-=g/u)):p==="mirror"&&(C=a)),S=Mt(0,1,_)*u}const T=k?{done:!1,value:l[0]}:C.next(S);o&&(T.value=o(T.value));let{done:O}=T;!k&&d!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return M&&n!==void 0&&(T.value=Ci(l,this.options,n)),y&&y(T.value),M&&this.finish(),T}get duration(){const{resolved:e}=this;return e?Rt(e.calculatedDuration):0}get time(){return Rt(this.currentTime)}set time(e){e=Ct(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Rt(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=$x,onPlay:s,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),s&&s();const n=this.driver.now();this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=n):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const zx=new Set(["opacity","clipPath","filter","transform"]);function Vo(t){let e;return()=>(e===void 0&&(e=t()),e)}const Hx={linearEasing:void 0};function Wx(t,e){const s=Vo(t);return()=>{var r;return(r=Hx[e])!==null&&r!==void 0?r:s()}}const Qn=Wx(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function ef(t){return!!(typeof t=="function"&&Qn()||!t||typeof t=="string"&&(t in Wa||Qn())||Io(t)||Array.isArray(t)&&t.every(ef))}const wr=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,Wa={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wr([0,.65,.55,1]),circOut:wr([.55,0,1,.45]),backIn:wr([.31,.01,.66,-.59]),backOut:wr([.33,1.53,.69,.99])};function tf(t,e){if(t)return typeof t=="function"&&Qn()?qu(t,e):Io(t)?wr(t):Array.isArray(t)?t.map(s=>tf(s,e)||Wa.easeOut):Wa[t]}function qx(t,e,s,{delay:r=0,duration:n=300,repeat:i=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const d={[e]:s};l&&(d.offset=l);const h=tf(o,n);return Array.isArray(h)&&(d.easing=h),t.animate(d,{delay:r,duration:n,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function sc(t,e){t.timeline=e,t.onfinish=null}const Kx=Vo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ei=10,Gx=2e4;function Yx(t){return Mo(t.type)||t.type==="spring"||!ef(t.ease)}function Xx(t,e){const s=new $o({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const n=[];let i=0;for(;!r.done&&i<Gx;)r=s.sample(i),n.push(r.value),i+=ei;return{times:void 0,keyframes:n,duration:i-ei,ease:"linear"}}const sf={anticipate:Nu,backInOut:Su,circInOut:Au};function Jx(t){return t in sf}class rc extends Wu{constructor(e){super(e);const{name:s,motionValue:r,element:n,keyframes:i}=this.options;this.resolver=new Hu(i,(a,o)=>this.onKeyframesResolved(a,o),s,r,n),this.resolver.scheduleResolve()}initPlayback(e,s){var r;let{duration:n=300,times:i,ease:a,type:o,motionValue:l,name:d,startTime:h}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&Qn()&&Jx(a)&&(a=sf[a]),Yx(this.options)){const{onComplete:f,onUpdate:m,motionValue:p,element:g,...y}=this.options,v=Xx(e,y);e=v.keyframes,e.length===1&&(e[1]=e[0]),n=v.duration,i=v.times,a=v.ease,o="keyframes"}const u=qx(l.owner.current,d,e,{...this.options,duration:n,times:i,ease:a});return u.startTime=h??this.calcStartTime(),this.pendingTimeline?(sc(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:f}=this.options;l.set(Ci(e,this.options,s)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:i,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:s}=e;return Rt(s)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:s}=e;return Rt(s.currentTime||0)}set time(e){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.currentTime=Ct(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:s}=e;return s.playbackRate}set speed(e){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:s}=e;return s.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:s}=e;return s.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:s}=this;if(!s)return Be;const{animation:r}=s;sc(r,e)}return Be}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:s,keyframes:r,duration:n,type:i,ease:a,times:o}=e;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:u,element:f,...m}=this.options,p=new $o({...m,keyframes:r,duration:n,type:i,ease:a,times:o,isGenerator:!0}),g=Ct(this.time);d.setWithVelocity(p.sample(g-ei).value,p.sample(g).value,ei)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:s,name:r,repeatDelay:n,repeatType:i,damping:a,type:o}=e;return Kx()&&r&&zx.has(r)&&s&&s.owner&&s.owner.current instanceof HTMLElement&&!s.owner.getProps().onUpdate&&!n&&i!=="mirror"&&a!==0&&o!=="inertia"}}const rf=Vo(()=>window.ScrollTimeline!==void 0);class Zx{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,s){return Promise.all(this.animations).then(e).catch(s)}getAll(e){return this.animations[0][e]}setAll(e,s){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=s}attachTimeline(e,s){const r=this.animations.map(n=>rf()&&n.attachTimeline?n.attachTimeline(e):s(n));return()=>{r.forEach((n,i)=>{n&&n(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let s=0;s<this.animations.length;s++)e=Math.max(e,this.animations[s].duration);return e}runAll(e){this.animations.forEach(s=>s[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Qx({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:n,repeat:i,repeatType:a,repeatDelay:o,from:l,elapsed:d,...h}){return!!Object.keys(h).length}const Uo=(t,e,s,r={},n,i)=>a=>{const o=No(r,t)||{},l=o.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ct(l);let h={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-d,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:i?void 0:n};Qx(o)||(h={...h,...Ny(t,h)}),h.duration&&(h.duration=Ct(h.duration)),h.repeatDelay&&(h.repeatDelay=Ct(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let u=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(u=!0)),u&&!i&&e.get()!==void 0){const f=Ci(h.keyframes,o);if(f!==void 0)return ce.update(()=>{h.onUpdate(f),h.onComplete()}),new Zx([])}return!i&&rc.supports(h)?new rc(h):new $o(h)},eb=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),tb=t=>La(t)?t[t.length-1]||0:t;function zo(t,e){t.indexOf(e)===-1&&t.push(e)}function Ho(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class Wo{constructor(){this.subscriptions=[]}add(e){return zo(this.subscriptions,e),()=>Ho(this.subscriptions,e)}notify(e,s,r){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](e,s,r);else for(let i=0;i<n;i++){const a=this.subscriptions[i];a&&a(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const nc=30,sb=t=>!isNaN(parseFloat(t)),Rr={current:void 0};class rb{constructor(e,s={}){this.version="11.14.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,n=!0)=>{const i=wt.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=wt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=sb(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Wo);const r=this.events[e].add(s);return e==="change"?()=>{r(),ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Rr.current&&Rr.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=wt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>nc)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,nc);return Lo(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bt(t,e){return new rb(t,e)}function nb(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,bt(s))}function ib(t,e){const s=Ei(t,e);let{transitionEnd:r={},transition:n={},...i}=s||{};i={...i,...r};for(const a in i){const o=tb(i[a]);nb(t,a,o)}}const qo=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ab="framerAppearId",nf="data-"+qo(ab);function af(t){return t.props[nf]}const Ie=t=>!!(t&&t.getVelocity);function ob(t){return!!(Ie(t)&&t.add)}function qa(t,e){const s=t.getValue("willChange");if(ob(s))return s.add(e)}function lb({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function of(t,e,{delay:s=0,transitionOverride:r,type:n}={}){var i;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const d=[],h=n&&t.animationState&&t.animationState.getState()[n];for(const u in l){const f=t.getValue(u,(i=t.latestValues[u])!==null&&i!==void 0?i:null),m=l[u];if(m===void 0||h&&lb(h,u))continue;const p={delay:s,...No(a||{},u)};let g=!1;if(window.MotionHandoffAnimation){const v=af(t);if(v){const k=window.MotionHandoffAnimation(v,u,ce);k!==null&&(p.startTime=k,g=!0)}}qa(t,u),f.start(Uo(u,f,m,t.shouldReduceMotion&&As.has(u)?{type:!1}:p,t,g));const y=f.animation;y&&d.push(y)}return o&&Promise.all(d).then(()=>{ce.update(()=>{o&&ib(t,o)})}),d}function Ka(t,e,s={}){var r;const n=Ei(t,e,s.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(i=s.transitionOverride);const a=n?()=>Promise.all(of(t,n,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:u,staggerDirection:f}=i;return cb(t,e,h+d,u,f,s)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[a,o]:[o,a];return d().then(()=>h())}else return Promise.all([a(),o(s.delay)])}function cb(t,e,s=0,r=0,n=1,i){const a=[],o=(t.variantChildren.size-1)*r,l=n===1?(d=0)=>d*r:(d=0)=>o-d*r;return Array.from(t.variantChildren).sort(db).forEach((d,h)=>{d.notify("AnimationStart",e),a.push(Ka(d,e,{...i,delay:s+l(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(a)}function db(t,e){return t.sortNodePosition(e)}function hb(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const n=e.map(i=>Ka(t,i,s));r=Promise.all(n)}else if(typeof e=="string")r=Ka(t,e,s);else{const n=typeof e=="function"?Ei(t,e,s.custom):e;r=Promise.all(of(t,n,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}const ub=So.length;function lf(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?lf(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<ub;s++){const r=So[s],n=t.props[r];(zr(n)||n===!1)&&(e[r]=n)}return e}const fb=[...jo].reverse(),mb=jo.length;function gb(t){return e=>Promise.all(e.map(({animation:s,options:r})=>hb(t,s,r)))}function pb(t){let e=gb(t),s=ic(),r=!0;const n=l=>(d,h)=>{var u;const f=Ei(t,h,l==="exit"?(u=t.presenceContext)===null||u===void 0?void 0:u.custom:void 0);if(f){const{transition:m,transitionEnd:p,...g}=f;d={...d,...g,...p}}return d};function i(l){e=l(t)}function a(l){const{props:d}=t,h=lf(t.parent)||{},u=[],f=new Set;let m={},p=1/0;for(let y=0;y<mb;y++){const v=fb[y],k=s[v],S=d[v]!==void 0?d[v]:h[v],C=zr(S),T=v===l?k.isActive:null;T===!1&&(p=y);let O=S===h[v]&&S!==d[v]&&C;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),k.protectedKeys={...m},!k.isActive&&T===null||!S&&!k.prevProp||Pi(S)||typeof S=="boolean")continue;const M=yb(k.prevProp,S);let b=M||v===l&&k.isActive&&!O&&C||y>p&&C,x=!1;const _=Array.isArray(S)?S:[S];let E=_.reduce(n(v),{});T===!1&&(E={});const{prevResolvedValues:N={}}=k,B={...N,...E},L=R=>{b=!0,f.has(R)&&(x=!0,f.delete(R)),k.needsAnimating[R]=!0;const V=t.getValue(R);V&&(V.liveStyle=!1)};for(const R in B){const V=E[R],I=N[R];if(m.hasOwnProperty(R))continue;let $=!1;La(V)&&La(I)?$=!bu(V,I):$=V!==I,$?V!=null?L(R):f.add(R):V!==void 0&&f.has(R)?L(R):k.protectedKeys[R]=!0}k.prevProp=S,k.prevResolvedValues=E,k.isActive&&(m={...m,...E}),r&&t.blockInitialAnimation&&(b=!1),b&&(!(O&&M)||x)&&u.push(..._.map(R=>({animation:R,options:{type:v}})))}if(f.size){const y={};f.forEach(v=>{const k=t.getBaseTarget(v),S=t.getValue(v);S&&(S.liveStyle=!0),y[v]=k??null}),u.push({animation:y})}let g=!!u.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(u):Promise.resolve()}function o(l,d){var h;if(s[l].isActive===d)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,d)}),s[l].isActive=d;const u=a(l);for(const f in s)s[f].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>s,reset:()=>{s=ic(),r=!0}}}function yb(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!bu(e,t):!1}function is(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ic(){return{animate:is(!0),whileInView:is(),whileHover:is(),whileTap:is(),whileDrag:is(),whileFocus:is(),exit:is()}}class rs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class xb extends rs{constructor(e){super(e),e.animationState||(e.animationState=pb(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Pi(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let bb=0;class vb extends rs{constructor(){super(...arguments),this.id=bb++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const n=this.node.animationState.setActive("exit",!e);s&&!e&&n.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const wb={animation:{Feature:xb},exit:{Feature:vb}},it={x:!1,y:!1};function cf(){return it.x||it.y}function df(t,e,s){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let n=document;const i=(r=void 0)!==null&&r!==void 0?r:n.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function hf(t,e){const s=df(t),r=new AbortController,n={passive:!0,...e,signal:r.signal};return[s,n,()=>r.abort()]}function ac(t){return e=>{e.pointerType==="touch"||cf()||t(e)}}function _b(t,e,s={}){const[r,n,i]=hf(t,s),a=ac(o=>{const{target:l}=o,d=e(o);if(!d||!l)return;const h=ac(u=>{d(u),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,n)});return r.forEach(o=>{o.addEventListener("pointerenter",a,n)}),i}const Ko=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,_r=new WeakSet;function oc(t){return e=>{e.key==="Enter"&&t(e)}}function Qi(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kb=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=oc(()=>{if(_r.has(s))return;Qi(s,"down");const n=oc(()=>{Qi(s,"up")}),i=()=>Qi(s,"cancel");s.addEventListener("keyup",n,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)},jb=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Sb(t){return jb.has(t.tagName)||t.tabIndex!==-1}const uf=(t,e)=>e?t===e?!0:uf(t,e.parentElement):!1;function lc(t){return Ko(t)&&!cf()}function Nb(t,e,s={}){const[r,n,i]=hf(t,s),a=o=>{const l=o.currentTarget;if(!lc(o)||_r.has(l))return;_r.add(l);const d=e(o),h=(m,p)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",f),!(!lc(m)||!_r.has(l))&&(_r.delete(l),d&&d(m,{success:p}))},u=m=>{h(m,s.useGlobalTarget||uf(l,m.target))},f=m=>{h(m,!1)};window.addEventListener("pointerup",u,n),window.addEventListener("pointercancel",f,n)};return r.forEach(o=>{Sb(o)||(o.tabIndex=0),(s.useGlobalTarget?window:o).addEventListener("pointerdown",a,n),o.addEventListener("focus",d=>kb(d,n),n)}),i}function Tb(t){return t==="x"||t==="y"?it[t]?null:(it[t]=!0,()=>{it[t]=!1}):it.x||it.y?null:(it.x=it.y=!0,()=>{it.x=it.y=!1})}function cn(t){return{point:{x:t.pageX,y:t.pageY}}}const Ab=t=>e=>Ko(e)&&t(e,cn(e));function qr(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function Or(t,e,s,r){return qr(t,e,Ab(s),r)}const cc=(t,e)=>Math.abs(t-e);function Pb(t,e){const s=cc(t.x,e.x),r=cc(t.y,e.y);return Math.sqrt(s**2+r**2)}class ff{constructor(e,s,{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=ta(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=Pb(u.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:p}=u,{timestamp:g}=Te;this.history.push({...p,timestamp:g});const{onStart:y,onMove:v}=this.handlers;f||(y&&y(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,f)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=ea(f,this.transformPagePoint),ce.update(this.updatePoint,!0)},this.handlePointerUp=(u,f)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=ta(u.type==="pointercancel"?this.lastMoveEventInfo:ea(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(u,y),p&&p(u,y)},!Ko(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=r,this.contextWindow=n||window;const a=cn(e),o=ea(a,this.transformPagePoint),{point:l}=o,{timestamp:d}=Te;this.history=[{...l,timestamp:d}];const{onSessionStart:h}=s;h&&h(e,ta(o,this.history)),this.removeListeners=ln(Or(this.contextWindow,"pointermove",this.handlePointerMove),Or(this.contextWindow,"pointerup",this.handlePointerUp),Or(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ct(this.updatePoint)}}function ea(t,e){return e?{point:e(t.point)}:t}function dc(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ta({point:t},e){return{point:t,delta:dc(t,mf(e)),offset:dc(t,Eb(e)),velocity:Cb(e,.1)}}function Eb(t){return t[0]}function mf(t){return t[t.length-1]}function Cb(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const n=mf(t);for(;s>=0&&(r=t[s],!(n.timestamp-r.timestamp>Ct(e)));)s--;if(!r)return{x:0,y:0};const i=Rt(n.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(n.x-r.x)/i,y:(n.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Ls(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const gf=1e-4,Rb=1-gf,Ob=1+gf,pf=.01,Db=0-pf,Mb=0+pf;function Ye(t){return t.max-t.min}function Lb(t,e,s){return Math.abs(t-e)<=s}function hc(t,e,s,r=.5){t.origin=r,t.originPoint=xe(e.min,e.max,t.origin),t.scale=Ye(s)/Ye(e),t.translate=xe(s.min,s.max,t.origin)-t.originPoint,(t.scale>=Rb&&t.scale<=Ob||isNaN(t.scale))&&(t.scale=1),(t.translate>=Db&&t.translate<=Mb||isNaN(t.translate))&&(t.translate=0)}function Dr(t,e,s,r){hc(t.x,e.x,s.x,r?r.originX:void 0),hc(t.y,e.y,s.y,r?r.originY:void 0)}function uc(t,e,s){t.min=s.min+e.min,t.max=t.min+Ye(e)}function Ib(t,e,s){uc(t.x,e.x,s.x),uc(t.y,e.y,s.y)}function fc(t,e,s){t.min=e.min-s.min,t.max=t.min+Ye(e)}function Mr(t,e,s){fc(t.x,e.x,s.x),fc(t.y,e.y,s.y)}function Fb(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?xe(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?xe(s,t,r.max):Math.min(t,s)),t}function mc(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function Bb(t,{top:e,left:s,bottom:r,right:n}){return{x:mc(t.x,s,n),y:mc(t.y,e,r)}}function gc(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function $b(t,e){return{x:gc(t.x,e.x),y:gc(t.y,e.y)}}function Vb(t,e){let s=.5;const r=Ye(t),n=Ye(e);return n>r?s=js(e.min,e.max-r,t.min):r>n&&(s=js(t.min,t.max-n,e.min)),Mt(0,1,s)}function Ub(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const Ga=.35;function zb(t=Ga){return t===!1?t=0:t===!0&&(t=Ga),{x:pc(t,"left","right"),y:pc(t,"top","bottom")}}function pc(t,e,s){return{min:yc(t,e),max:yc(t,s)}}function yc(t,e){return typeof t=="number"?t:t[e]||0}const xc=()=>({translate:0,scale:1,origin:0,originPoint:0}),Is=()=>({x:xc(),y:xc()}),bc=()=>({min:0,max:0}),_e=()=>({x:bc(),y:bc()});function Ze(t){return[t("x"),t("y")]}function yf({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function Hb({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Wb(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function sa(t){return t===void 0||t===1}function Ya({scale:t,scaleX:e,scaleY:s}){return!sa(t)||!sa(e)||!sa(s)}function hs(t){return Ya(t)||xf(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function xf(t){return vc(t.x)||vc(t.y)}function vc(t){return t&&t!=="0%"}function ti(t,e,s){const r=t-s,n=e*r;return s+n}function wc(t,e,s,r,n){return n!==void 0&&(t=ti(t,n,r)),ti(t,s,r)+e}function Xa(t,e=0,s=1,r,n){t.min=wc(t.min,e,s,r,n),t.max=wc(t.max,e,s,r,n)}function bf(t,{x:e,y:s}){Xa(t.x,e.translate,e.scale,e.originPoint),Xa(t.y,s.translate,s.scale,s.originPoint)}const _c=.999999999999,kc=1.0000000000001;function qb(t,e,s,r=!1){const n=s.length;if(!n)return;e.x=e.y=1;let i,a;for(let o=0;o<n;o++){i=s[o],a=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Bs(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,bf(t,a)),r&&hs(i.latestValues)&&Bs(t,i.latestValues))}e.x<kc&&e.x>_c&&(e.x=1),e.y<kc&&e.y>_c&&(e.y=1)}function Fs(t,e){t.min=t.min+e,t.max=t.max+e}function jc(t,e,s,r,n=.5){const i=xe(t.min,t.max,n);Xa(t,e,s,i,r)}function Bs(t,e){jc(t.x,e.x,e.scaleX,e.scale,e.originX),jc(t.y,e.y,e.scaleY,e.scale,e.originY)}function vf(t,e){return yf(Wb(t.getBoundingClientRect(),e))}function Kb(t,e,s){const r=vf(t,s),{scroll:n}=e;return n&&(Fs(r.x,n.offset.x),Fs(r.y,n.offset.y)),r}const wf=({current:t})=>t?t.ownerDocument.defaultView:null,Gb=new WeakMap;class Yb{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_e(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const n=h=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(cn(h).point)},i=(h,u)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Tb(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ze(y=>{let v=this.getAxisMotionValue(y).get()||0;if(vt.test(v)){const{projection:k}=this.visualElement;if(k&&k.layout){const S=k.layout.layoutBox[y];S&&(v=Ye(S)*(parseFloat(v)/100))}}this.originPoint[y]=v}),p&&ce.postRender(()=>p(h,u)),qa(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(h,u)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:y}=u;if(m&&this.currentDirection===null){this.currentDirection=Xb(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,y),this.updateAxis("y",u.point,y),this.visualElement.render(),g&&g(h,u)},o=(h,u)=>this.stop(h,u),l=()=>Ze(h=>{var u;return this.getAnimationState(h)==="paused"&&((u=this.getAxisMotionValue(h).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new ff(e,{onSessionStart:n,onStart:i,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:wf(this.visualElement)})}stop(e,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:n}=s;this.startAnimation(n);const{onDragEnd:i}=this.getProps();i&&ce.postRender(()=>i(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:n}=this.getProps();if(!r||!bn(e,n,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Fb(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;s&&Ls(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&n?this.constraints=Bb(n.layoutBox,s):this.constraints=!1,this.elastic=zb(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ze(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Ub(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Ls(e))return!1;const r=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=Kb(r,n.root,this.visualElement.getTransformPagePoint());let a=$b(n.layout.layoutBox,i);if(s){const o=s(Hb(a));this.hasMutatedConstraints=!!o,o&&(a=yf(o))}return a}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:n,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},d=Ze(h=>{if(!bn(h,s,this.currentDirection))return;let u=l&&l[h]||{};a&&(u={min:0,max:0});const f=n?200:1e6,m=n?40:1e7,p={type:"inertia",velocity:r?e[h]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...u};return this.startAxisValueAnimation(h,p)});return Promise.all(d).then(o)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return qa(this.visualElement,e),r.start(Uo(e,r,0,s,this.visualElement,!1))}stopAnimation(){Ze(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ze(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),n=r[s];return n||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ze(s=>{const{drag:r}=this.getProps();if(!bn(s,r,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(s);if(n&&n.layout){const{min:a,max:o}=n.layout.layoutBox[s];i.set(e[s]-xe(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Ls(s)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Ze(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();n[a]=Vb({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ze(a=>{if(!bn(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:d}=this.constraints[a];o.set(xe(l,d,n[a]))})}addListeners(){if(!this.visualElement.current)return;Gb.set(this.visualElement,this);const e=this.visualElement.current,s=Or(e,"pointerdown",l=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ls(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ce.read(r);const a=qr(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",({delta:l,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ze(h=>{const u=this.getAxisMotionValue(h);u&&(this.originPoint[h]+=l[h].translate,u.set(u.get()+l[h].translate))}),this.visualElement.render())});return()=>{a(),s(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:a=Ga,dragMomentum:o=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:n,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function bn(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function Xb(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class Jb extends rs{constructor(e){super(e),this.removeGroupControls=Be,this.removeListeners=Be,this.controls=new Yb(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Be}unmount(){this.removeGroupControls(),this.removeListeners()}}const Sc=t=>(e,s)=>{t&&ce.postRender(()=>t(e,s))};class Zb extends rs{constructor(){super(...arguments),this.removePointerDownListener=Be}onPointerDown(e){this.session=new ff(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wf(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:Sc(e),onStart:Sc(s),onMove:r,onEnd:(i,a)=>{delete this.session,n&&ce.postRender(()=>n(i,a))}}}mount(){this.removePointerDownListener=Or(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ri=j.createContext(null);function Qb(){const t=j.useContext(Ri);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:s,register:r}=t,n=j.useId();j.useEffect(()=>r(n),[]);const i=j.useCallback(()=>s&&s(n),[n,s]);return!e&&s?[!1,i]:[!0]}const Go=j.createContext({}),_f=j.createContext({}),In={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Nc(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const cr={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Y.test(t))t=parseFloat(t);else return t;const s=Nc(t,e.target.x),r=Nc(t,e.target.y);return`${s}% ${r}%`}},ev={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,n=Zt.parse(t);if(n.length>5)return r;const i=Zt.createTransformer(t),a=typeof n[0]!="number"?1:0,o=s.x.scale*e.x,l=s.y.scale*e.y;n[0+a]/=o,n[1+a]/=l;const d=xe(o,l,.5);return typeof n[2+a]=="number"&&(n[2+a]/=d),typeof n[3+a]=="number"&&(n[3+a]/=d),i(n)}},si={};function tv(t){Object.assign(si,t)}const{schedule:Yo,cancel:zT}=vu(queueMicrotask,!1);class sv extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:n}=this.props,{projection:i}=e;tv(rv),i&&(s.group&&s.group.add(i),r&&r.register&&n&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),In.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:n,isPresent:i}=this.props,a=r.projection;return a&&(a.isPresent=i,n||e.layoutDependency!==s||s===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||ce.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Yo.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kf(t){const[e,s]=Qb(),r=j.useContext(Go);return c.jsx(sv,{...t,layoutGroup:r,switchLayoutGroup:j.useContext(_f),isPresent:e,safeToRemove:s})}const rv={borderRadius:{...cr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cr,borderTopRightRadius:cr,borderBottomLeftRadius:cr,borderBottomRightRadius:cr,boxShadow:ev},jf=["TopLeft","TopRight","BottomLeft","BottomRight"],nv=jf.length,Tc=t=>typeof t=="string"?parseFloat(t):t,Ac=t=>typeof t=="number"||Y.test(t);function iv(t,e,s,r,n,i){n?(t.opacity=xe(0,s.opacity!==void 0?s.opacity:1,av(r)),t.opacityExit=xe(e.opacity!==void 0?e.opacity:1,0,ov(r))):i&&(t.opacity=xe(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,r));for(let a=0;a<nv;a++){const o=`border${jf[a]}Radius`;let l=Pc(e,o),d=Pc(s,o);if(l===void 0&&d===void 0)continue;l||(l=0),d||(d=0),l===0||d===0||Ac(l)===Ac(d)?(t[o]=Math.max(xe(Tc(l),Tc(d),r),0),(vt.test(d)||vt.test(l))&&(t[o]+="%")):t[o]=d}(e.rotate||s.rotate)&&(t.rotate=xe(e.rotate||0,s.rotate||0,r))}function Pc(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const av=Sf(0,.5,Tu),ov=Sf(.5,.95,Be);function Sf(t,e,s){return r=>r<t?0:r>e?1:s(js(t,e,r))}function Ec(t,e){t.min=e.min,t.max=e.max}function Xe(t,e){Ec(t.x,e.x),Ec(t.y,e.y)}function Cc(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Rc(t,e,s,r,n){return t-=e,t=ti(t,1/s,r),n!==void 0&&(t=ti(t,1/n,r)),t}function lv(t,e=0,s=1,r=.5,n,i=t,a=t){if(vt.test(e)&&(e=parseFloat(e),e=xe(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=xe(i.min,i.max,r);t===i&&(o-=e),t.min=Rc(t.min,e,s,o,n),t.max=Rc(t.max,e,s,o,n)}function Oc(t,e,[s,r,n],i,a){lv(t,e[s],e[r],e[n],e.scale,i,a)}const cv=["x","scaleX","originX"],dv=["y","scaleY","originY"];function Dc(t,e,s,r){Oc(t.x,e,cv,s?s.x:void 0,r?r.x:void 0),Oc(t.y,e,dv,s?s.y:void 0,r?r.y:void 0)}function Mc(t){return t.translate===0&&t.scale===1}function Nf(t){return Mc(t.x)&&Mc(t.y)}function Lc(t,e){return t.min===e.min&&t.max===e.max}function hv(t,e){return Lc(t.x,e.x)&&Lc(t.y,e.y)}function Ic(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Tf(t,e){return Ic(t.x,e.x)&&Ic(t.y,e.y)}function Fc(t){return Ye(t.x)/Ye(t.y)}function Bc(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uv{constructor(){this.members=[]}add(e){zo(this.members,e),e.scheduleRender()}remove(e){if(Ho(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(n=>e===n);if(s===0)return!1;let r;for(let n=s;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;n===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fv(t,e,s){let r="";const n=t.x.translate/e.x,i=t.y.translate/e.y,a=(s==null?void 0:s.z)||0;if((n||i||a)&&(r=`translate3d(${n}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:d,rotate:h,rotateX:u,rotateY:f,skewX:m,skewY:p}=s;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),u&&(r+=`rotateX(${u}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),p&&(r+=`skewY(${p}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const mv=(t,e)=>t.depth-e.depth;class gv{constructor(){this.children=[],this.isDirty=!1}add(e){zo(this.children,e),this.isDirty=!0}remove(e){Ho(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(mv),this.isDirty=!1,this.children.forEach(e)}}function Fn(t){const e=Ie(t)?t.get():t;return eb(e)?e.toValue():e}function pv(t,e){const s=wt.now(),r=({timestamp:n})=>{const i=n-s;i>=e&&(ct(r),t(i-e))};return ce.read(r,!0),()=>ct(r)}function yv(t){return t instanceof SVGElement&&t.tagName!=="svg"}function xv(t,e,s){const r=Ie(t)?t:bt(t);return r.start(Uo("",r,e,s)),r.animation}const us={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},kr=typeof window<"u"&&window.MotionDebug!==void 0,ra=["","X","Y","Z"],bv={visibility:"hidden"},$c=1e3;let vv=0;function na(t,e,s,r){const{latestValues:n}=e;n[t]&&(s[t]=n[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Af(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=af(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:n,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",ce,!(n||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Af(r)}function Pf({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:n}){return class{constructor(a={},o=e==null?void 0:e()){this.id=vv++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,kr&&(us.totalNodes=us.resolvedTargetDeltas=us.recalculatedProjection=0),this.nodes.forEach(kv),this.nodes.forEach(Av),this.nodes.forEach(Pv),this.nodes.forEach(jv),kr&&window.MotionDebug.record(us)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new gv)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Wo),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=yv(a),this.instance=a;const{layoutId:l,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(d||l)&&(this.isLayoutDirty=!0),t){let u;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=pv(f,250),In.hasAnimatedSinceResize&&(In.hasAnimatedSinceResize=!1,this.nodes.forEach(Uc))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||d)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||h.getDefaultTransition()||Dv,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=h.getProps(),k=!this.targetLayout||!Tf(this.targetLayout,p)||m,S=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,S);const C={...No(g,"layout"),onPlay:y,onComplete:v};(h.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else f||Uc(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ct(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ev),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Af(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const u=this.path[h];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Vc);return}this.isUpdating||this.nodes.forEach(Nv),this.isUpdating=!1,this.nodes.forEach(Tv),this.nodes.forEach(wv),this.nodes.forEach(_v),this.clearAllSnapshots();const o=wt.now();Te.delta=Mt(0,1e3/60,o-Te.timestamp),Te.timestamp=o,Te.isProcessing=!0,Gi.update.process(Te),Gi.preRender.process(Te),Gi.render.process(Te),Te.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Yo.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Sv),this.sharedNodes.forEach(Cv)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!n)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Nf(this.projectionDelta),l=this.getTransformTemplate(),d=l?l(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;a&&(o||hs(this.latestValues)||h)&&(n(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Mv(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return _e();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Lv))){const{scroll:h}=this.root;h&&(Fs(l.x,h.offset.x),Fs(l.y,h.offset.y))}return l}removeElementScroll(a){var o;const l=_e();if(Xe(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:u,options:f}=h;h!==this.root&&u&&f.layoutScroll&&(u.wasRoot&&Xe(l,a),Fs(l.x,u.offset.x),Fs(l.y,u.offset.y))}return l}applyTransform(a,o=!1){const l=_e();Xe(l,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Bs(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),hs(h.latestValues)&&Bs(l,h.latestValues)}return hs(this.latestValues)&&Bs(l,this.latestValues),l}removeTransform(a){const o=_e();Xe(o,a);for(let l=0;l<this.path.length;l++){const d=this.path[l];if(!d.instance||!hs(d.latestValues))continue;Ya(d.latestValues)&&d.updateSnapshot();const h=_e(),u=d.measurePageBox();Xe(h,u),Dc(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return hs(this.latestValues)&&Dc(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Te.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=Te.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_e(),this.relativeTargetOrigin=_e(),Mr(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Xe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=_e(),this.targetWithTransforms=_e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ib(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xe(this.target,this.layout.layoutBox),bf(this.target,this.targetDelta)):Xe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_e(),this.relativeTargetOrigin=_e(),Mr(this.relativeTargetOrigin,this.target,m.target),Xe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}kr&&us.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ya(this.parent.latestValues)||xf(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Te.timestamp&&(d=!1),d)return;const{layout:h,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||u))return;Xe(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;qb(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=_e());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Cc(this.prevProjectionDelta.x,this.projectionDelta.x),Cc(this.prevProjectionDelta.y,this.projectionDelta.y)),Dr(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!Bc(this.projectionDelta.x,this.prevProjectionDelta.x)||!Bc(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),kr&&us.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Is(),this.projectionDelta=Is(),this.projectionDeltaWithTransform=Is()}setAnimationOrigin(a,o=!1){const l=this.snapshot,d=l?l.latestValues:{},h={...this.latestValues},u=Is();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=_e(),m=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=m!==p,y=this.getStack(),v=!y||y.members.length<=1,k=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(Ov));this.animationProgress=0;let S;this.mixTargetDelta=C=>{const T=C/1e3;zc(u.x,a.x,T),zc(u.y,a.y,T),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mr(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Rv(this.relativeTarget,this.relativeTargetOrigin,f,T),S&&hv(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=_e()),Xe(S,this.relativeTarget)),g&&(this.animationValues=h,iv(h,d,this.latestValues,T,k,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ct(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ce.update(()=>{In.hasAnimatedSinceResize=!0,this.currentAnimation=xv(0,$c,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($c),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:d,latestValues:h}=a;if(!(!o||!l||!d)){if(this!==a&&this.layout&&d&&Ef(this.options.animationType,this.layout.layoutBox,d.layoutBox)){l=this.target||_e();const u=Ye(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+u;const f=Ye(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}Xe(o,l),Bs(o,h),Dr(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new uv),this.sharedNodes.get(a).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const d=this.getStack();d&&d.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const d={};l.z&&na("z",a,d,this.animationValues);for(let h=0;h<ra.length;h++)na(`rotate${ra[h]}`,a,d,this.animationValues),na(`skew${ra[h]}`,a,d,this.animationValues);a.render();for(const h in d)a.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bv;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Fn(a==null?void 0:a.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Fn(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!hs(this.latestValues)&&(g.transform=h?h({},""):"none",this.hasProjected=!1),g}const f=u.animationValues||u.latestValues;this.applyTransformsToTarget(),d.transform=fv(this.projectionDeltaWithTransform,this.treeScale,f),h&&(d.transform=h(f,d.transform));const{x:m,y:p}=this.projectionDelta;d.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,u.animationValues?d.opacity=u===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in si){if(f[g]===void 0)continue;const{correct:y,applyTo:v}=si[g],k=d.transform==="none"?f[g]:y(f[g],u);if(v){const S=v.length;for(let C=0;C<S;C++)d[v[C]]=k}else d[g]=k}return this.options.layoutId&&(d.pointerEvents=u===this?Fn(a==null?void 0:a.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(Vc),this.root.sharedNodes.clear()}}}function wv(t){t.updateLayout()}function _v(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=t.layout,{animationType:i}=t.options,a=s.source!==t.layout.source;i==="size"?Ze(u=>{const f=a?s.measuredBox[u]:s.layoutBox[u],m=Ye(f);f.min=r[u].min,f.max=f.min+m}):Ef(i,s.layoutBox,r)&&Ze(u=>{const f=a?s.measuredBox[u]:s.layoutBox[u],m=Ye(r[u]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+m)});const o=Is();Dr(o,r,s.layoutBox);const l=Is();a?Dr(l,t.applyTransform(n,!0),s.measuredBox):Dr(l,r,s.layoutBox);const d=!Nf(o);let h=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:m}=u;if(f&&m){const p=_e();Mr(p,s.layoutBox,f.layoutBox);const g=_e();Mr(g,r,m.layoutBox),Tf(p,g)||(h=!0),u.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:s,delta:l,layoutDelta:o,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function kv(t){kr&&us.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jv(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Sv(t){t.clearSnapshot()}function Vc(t){t.clearMeasurements()}function Nv(t){t.isLayoutDirty=!1}function Tv(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Uc(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Av(t){t.resolveTargetDelta()}function Pv(t){t.calcProjection()}function Ev(t){t.resetSkewAndRotation()}function Cv(t){t.removeLeadSnapshot()}function zc(t,e,s){t.translate=xe(e.translate,0,s),t.scale=xe(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function Hc(t,e,s,r){t.min=xe(e.min,s.min,r),t.max=xe(e.max,s.max,r)}function Rv(t,e,s,r){Hc(t.x,e.x,s.x,r),Hc(t.y,e.y,s.y,r)}function Ov(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Dv={duration:.45,ease:[.4,0,.1,1]},Wc=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),qc=Wc("applewebkit/")&&!Wc("chrome/")?Math.round:Be;function Kc(t){t.min=qc(t.min),t.max=qc(t.max)}function Mv(t){Kc(t.x),Kc(t.y)}function Ef(t,e,s){return t==="position"||t==="preserve-aspect"&&!Lb(Fc(e),Fc(s),.2)}function Lv(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Iv=Pf({attachResizeListener:(t,e)=>qr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ia={current:void 0},Cf=Pf({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ia.current){const t=new Iv({});t.mount(window),t.setOptions({layoutScroll:!0}),ia.current=t}return ia.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Fv={pan:{Feature:Zb},drag:{Feature:Jb,ProjectionNode:Cf,MeasureLayout:kf}};function Gc(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const n="onHover"+s,i=r[n];i&&ce.postRender(()=>i(e,cn(e)))}class Bv extends rs{mount(){const{current:e}=this.node;e&&(this.unmount=_b(e,s=>(Gc(this.node,s,"Start"),r=>Gc(this.node,r,"End"))))}unmount(){}}class $v extends rs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ln(qr(this.node.current,"focus",()=>this.onFocus()),qr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yc(t,e,s){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const n="onTap"+(s==="End"?"":s),i=r[n];i&&ce.postRender(()=>i(e,cn(e)))}class Vv extends rs{mount(){const{current:e}=this.node;e&&(this.unmount=Nb(e,s=>(Yc(this.node,s,"Start"),(r,{success:n})=>Yc(this.node,r,n?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ja=new WeakMap,aa=new WeakMap,Uv=t=>{const e=Ja.get(t.target);e&&e(t)},zv=t=>{t.forEach(Uv)};function Hv({root:t,...e}){const s=t||document;aa.has(s)||aa.set(s,{});const r=aa.get(s),n=JSON.stringify(e);return r[n]||(r[n]=new IntersectionObserver(zv,{root:t,...e})),r[n]}function Wv(t,e,s){const r=Hv(e);return Ja.set(t,s),r.observe(t),()=>{Ja.delete(t),r.unobserve(t)}}const qv={some:0,all:1};class Kv extends rs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:n="some",once:i}=e,a={root:s?s.current:void 0,rootMargin:r,threshold:typeof n=="number"?n:qv[n]},o=l=>{const{isIntersecting:d}=l;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:u}=this.node.getProps(),f=d?h:u;f&&f(l)};return Wv(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(Gv(e,s))&&this.startObserver()}unmount(){}}function Gv({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const Yv={inView:{Feature:Kv},tap:{Feature:Vv},focus:{Feature:$v},hover:{Feature:Bv}},Xv={layout:{ProjectionNode:Cf,MeasureLayout:kf}},Oi=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Di=j.createContext({}),Xo=typeof window<"u",Mi=Xo?j.useLayoutEffect:j.useEffect,Rf=j.createContext({strict:!1});function Jv(t,e,s,r,n){var i,a;const{visualElement:o}=j.useContext(Di),l=j.useContext(Rf),d=j.useContext(Ri),h=j.useContext(Oi).reducedMotion,u=j.useRef(null);r=r||l.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:o,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const f=u.current,m=j.useContext(_f);f&&!f.projection&&n&&(f.type==="html"||f.type==="svg")&&Zv(u.current,s,n,m);const p=j.useRef(!1);j.useInsertionEffect(()=>{f&&p.current&&f.update(s,d)});const g=s[nf],y=j.useRef(!!g&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,g))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,g)));return Mi(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Yo.render(f.render),y.current&&f.animationState&&f.animationState.animateChanges())}),j.useEffect(()=>{f&&(!y.current&&f.animationState&&f.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,g)}),y.current=!1))}),f}function Zv(t,e,s,r){const{layoutId:n,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:d}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:Of(t.parent)),t.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!a||o&&Ls(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:d})}function Of(t){if(t)return t.options.allowProjection!==!1?t.projection:Of(t.parent)}function Qv(t,e,s){return j.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):Ls(s)&&(s.current=r))},[e])}function Li(t){return Pi(t.animate)||So.some(e=>zr(t[e]))}function Df(t){return!!(Li(t)||t.variants)}function ew(t,e){if(Li(t)){const{initial:s,animate:r}=t;return{initial:s===!1||zr(s)?s:void 0,animate:zr(r)?r:void 0}}return t.inherit!==!1?e:{}}function tw(t){const{initial:e,animate:s}=ew(t,j.useContext(Di));return j.useMemo(()=>({initial:e,animate:s}),[Xc(e),Xc(s)])}function Xc(t){return Array.isArray(t)?t.join(" "):t}const Jc={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Gs={};for(const t in Jc)Gs[t]={isEnabled:e=>Jc[t].some(s=>!!e[s])};function sw(t){for(const e in t)Gs[e]={...Gs[e],...t[e]}}const rw=Symbol.for("motionComponentSymbol");function nw({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:r,Component:n}){t&&sw(t);function i(o,l){let d;const h={...j.useContext(Oi),...o,layoutId:iw(o)},{isStatic:u}=h,f=tw(o),m=r(o,u);if(!u&&Xo){aw();const p=ow(h);d=p.MeasureLayout,f.visualElement=Jv(n,m,h,e,p.ProjectionNode)}return c.jsxs(Di.Provider,{value:f,children:[d&&f.visualElement?c.jsx(d,{visualElement:f.visualElement,...h}):null,s(n,o,Qv(m,f.visualElement,l),m,u,f.visualElement)]})}const a=j.forwardRef(i);return a[rw]=n,a}function iw({layoutId:t}){const e=j.useContext(Go).id;return e&&t!==void 0?e+"-"+t:t}function aw(t,e){j.useContext(Rf).strict}function ow(t){const{drag:e,layout:s}=Gs;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const lw=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jo(t){return typeof t!="string"||t.includes("-")?!1:!!(lw.indexOf(t)>-1||/[A-Z]/u.test(t))}function Mf(t,{style:e,vars:s},r,n){Object.assign(t.style,e,n&&n.getProjectionStyles(r));for(const i in s)t.style.setProperty(i,s[i])}const Lf=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function If(t,e,s,r){Mf(t,e,void 0,r);for(const n in e.attrs)t.setAttribute(Lf.has(n)?n:qo(n),e.attrs[n])}function Ff(t,{layout:e,layoutId:s}){return As.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!si[t]||t==="opacity")}function Zo(t,e,s){var r;const{style:n}=t,i={};for(const a in n)(Ie(n[a])||e.style&&Ie(e.style[a])||Ff(a,t)||((r=s==null?void 0:s.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[a]=n[a]);return i}function Bf(t,e,s){const r=Zo(t,e,s);for(const n in t)if(Ie(t[n])||Ie(e[n])){const i=nn.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[i]=t[n]}return r}function Qs(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}function cw({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:s},r,n,i){const a={latestValues:dw(r,n,i,t),renderState:e()};return s&&(a.mount=o=>s(r,o,a)),a}const $f=t=>(e,s)=>{const r=j.useContext(Di),n=j.useContext(Ri),i=()=>cw(t,e,r,n);return s?i():Qs(i)};function dw(t,e,s,r){const n={},i=r(t,{});for(const f in i)n[f]=Fn(i[f]);let{initial:a,animate:o}=t;const l=Li(t),d=Df(t);e&&d&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=s?s.initial===!1:!1;h=h||a===!1;const u=h?o:a;if(u&&typeof u!="boolean"&&!Pi(u)){const f=Array.isArray(u)?u:[u];for(let m=0;m<f.length;m++){const p=ko(t,f[m]);if(p){const{transitionEnd:g,transition:y,...v}=p;for(const k in v){let S=v[k];if(Array.isArray(S)){const C=h?S.length-1:0;S=S[C]}S!==null&&(n[k]=S)}for(const k in g)n[k]=g[k]}}}return n}const Qo=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Vf=()=>({...Qo(),attrs:{}}),Uf=(t,e)=>e&&typeof t=="number"?e.transform(t):t,hw={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uw=nn.length;function fw(t,e,s){let r="",n=!0;for(let i=0;i<uw;i++){const a=nn[i],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||s){const d=Uf(o,Oo[a]);if(!l){n=!1;const h=hw[a]||a;r+=`${h}(${d}) `}s&&(e[a]=d)}}return r=r.trim(),s?r=s(e,n?"":r):n&&(r="none"),r}function el(t,e,s){const{style:r,vars:n,transformOrigin:i}=t;let a=!1,o=!1;for(const l in e){const d=e[l];if(As.has(l)){a=!0;continue}else if(Ru(l)){n[l]=d;continue}else{const h=Uf(d,Oo[l]);l.startsWith("origin")?(o=!0,i[l]=h):r[l]=h}}if(e.transform||(a||s?r.transform=fw(e,t.transform,s):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:d="50%",originZ:h=0}=i;r.transformOrigin=`${l} ${d} ${h}`}}function Zc(t,e,s){return typeof t=="string"?t:Y.transform(e+s*t)}function mw(t,e,s){const r=Zc(e,t.x,t.width),n=Zc(s,t.y,t.height);return`${r} ${n}`}const gw={offset:"stroke-dashoffset",array:"stroke-dasharray"},pw={offset:"strokeDashoffset",array:"strokeDasharray"};function yw(t,e,s=1,r=0,n=!0){t.pathLength=1;const i=n?gw:pw;t[i.offset]=Y.transform(-r);const a=Y.transform(e),o=Y.transform(s);t[i.array]=`${a} ${o}`}function tl(t,{attrX:e,attrY:s,attrScale:r,originX:n,originY:i,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...d},h,u){if(el(t,d,u),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m,dimensions:p}=t;f.transform&&(p&&(m.transform=f.transform),delete f.transform),p&&(n!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=mw(p,n!==void 0?n:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),s!==void 0&&(f.y=s),r!==void 0&&(f.scale=r),a!==void 0&&yw(f,a,o,l,!1)}const sl=t=>typeof t=="string"&&t.toLowerCase()==="svg",xw={useVisualState:$f({scrapeMotionValuesFromProps:Bf,createRenderState:Vf,onMount:(t,e,{renderState:s,latestValues:r})=>{ce.read(()=>{try{s.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),ce.render(()=>{tl(s,r,sl(e.tagName),t.transformTemplate),If(e,s)})}})},bw={useVisualState:$f({scrapeMotionValuesFromProps:Zo,createRenderState:Qo})};function zf(t,e,s){for(const r in e)!Ie(e[r])&&!Ff(r,s)&&(t[r]=e[r])}function vw({transformTemplate:t},e){return j.useMemo(()=>{const s=Qo();return el(s,e,t),Object.assign({},s.vars,s.style)},[e])}function ww(t,e){const s=t.style||{},r={};return zf(r,s,t),Object.assign(r,vw(t,e)),r}function _w(t,e){const s={},r=ww(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}const kw=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ri(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||kw.has(t)}let Hf=t=>!ri(t);function jw(t){t&&(Hf=e=>e.startsWith("on")?!ri(e):t(e))}try{jw(require("@emotion/is-prop-valid").default)}catch{}function Sw(t,e,s){const r={};for(const n in t)n==="values"&&typeof t.values=="object"||(Hf(n)||s===!0&&ri(n)||!e&&!ri(n)||t.draggable&&n.startsWith("onDrag"))&&(r[n]=t[n]);return r}function Nw(t,e,s,r){const n=j.useMemo(()=>{const i=Vf();return tl(i,e,sl(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};zf(i,t.style,t),n.style={...i,...n.style}}return n}function Tw(t=!1){return(s,r,n,{latestValues:i},a)=>{const l=(Jo(s)?Nw:_w)(r,i,a,s),d=Sw(r,typeof s=="string",t),h=s!==j.Fragment?{...d,...l,ref:n}:{},{children:u}=r,f=j.useMemo(()=>Ie(u)?u.get():u,[u]);return j.createElement(s,{...h,children:f})}}function Aw(t,e){return function(r,{forwardMotionProps:n}={forwardMotionProps:!1}){const a={...Jo(r)?xw:bw,preloadedFeatures:t,useRender:Tw(n),createVisualElement:e,Component:r};return nw(a)}}const Za={current:null},Wf={current:!1};function Pw(){if(Wf.current=!0,!!Xo)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Za.current=t.matches;t.addListener(e),e()}else Za.current=!1}function Ew(t,e,s){for(const r in e){const n=e[r],i=s[r];if(Ie(n))t.addValue(r,n);else if(Ie(i))t.addValue(r,bt(n,{owner:t}));else if(i!==n)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(n):a.hasAnimated||a.set(n)}else{const a=t.getStaticValue(r);t.addValue(r,bt(a!==void 0?a:n,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const Qc=new WeakMap,Cw=[...Mu,Le,Zt],Rw=t=>Cw.find(Du(t)),ed=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ow{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Eo,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=wt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ce.render(this.render,!1,!0))};const{latestValues:l,renderState:d}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=d,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=Li(s),this.isVariantNode=Df(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...u}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in u){const m=u[f];l[f]!==void 0&&Ie(m)&&m.set(l[f],!1)}}mount(e){this.current=e,Qc.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),Wf.current||Pw(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Za.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Qc.delete(this.current),this.projection&&this.projection.unmount(),ct(this.notifyUpdate),ct(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=As.has(e),n=s.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ce.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{n(),i(),a&&a(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Gs){const s=Gs[e];if(!s)continue;const{isEnabled:r,Feature:n}=s;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_e()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<ed.length;r++){const n=ed[r];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,a=e[i];a&&(this.propEventSubscriptions[n]=this.on(n,a))}this.prevMotionValues=Ew(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=bt(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){var r;let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Eu(n)||Pu(n))?n=parseFloat(n):!Rw(n)&&Zt.test(s)&&(n=zu(e,s)),this.setBaseTarget(e,Ie(n)?n.get():n)),Ie(n)?n.get():n}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=ko(this.props,r,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);a&&(n=a[e])}if(r&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ie(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Wo),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class qf extends Ow{constructor(){super(...arguments),this.KeyframeResolver=Hu}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ie(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Dw(t){return window.getComputedStyle(t)}class Mw extends qf{constructor(){super(...arguments),this.type="html",this.renderInstance=Mf}readValueFromInstance(e,s){if(As.has(s)){const r=Do(s);return r&&r.default||0}else{const r=Dw(e),n=(Ru(s)?r.getPropertyValue(s):r[s])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:s}){return vf(e,s)}build(e,s,r){el(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return Zo(e,s,r)}}class Lw extends qf{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_e}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(As.has(s)){const r=Do(s);return r&&r.default||0}return s=Lf.has(s)?s:qo(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return Bf(e,s,r)}build(e,s,r){tl(e,s,this.isSVGTag,r.transformTemplate)}renderInstance(e,s,r,n){If(e,s,r,n)}mount(e){this.isSVGTag=sl(e.tagName),super.mount(e)}}const Iw=(t,e)=>Jo(t)?new Lw(e):new Mw(e,{allowProjection:t!==j.Fragment}),Fw=Aw({...wb,...Yv,...Fv,...Xv},Iw),F=wy(Fw);class Bw extends j.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=s.offsetHeight||0,r.width=s.offsetWidth||0,r.top=s.offsetTop,r.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function $w({children:t,isPresent:e}){const s=j.useId(),r=j.useRef(null),n=j.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=j.useContext(Oi);return j.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:d}=n.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=s;const h=document.createElement("style");return i&&(h.nonce=i),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),c.jsx(Bw,{isPresent:e,childRef:r,sizeRef:n,children:j.cloneElement(t,{ref:r})})}const Vw=({children:t,initial:e,isPresent:s,onExitComplete:r,custom:n,presenceAffectsLayout:i,mode:a})=>{const o=Qs(Uw),l=j.useId(),d=j.useCallback(u=>{o.set(u,!0);for(const f of o.values())if(!f)return;r&&r()},[o,r]),h=j.useMemo(()=>({id:l,initial:e,isPresent:s,custom:n,onExitComplete:d,register:u=>(o.set(u,!1),()=>o.delete(u))}),i?[Math.random(),d]:[s,d]);return j.useMemo(()=>{o.forEach((u,f)=>o.set(f,!1))},[s]),j.useEffect(()=>{!s&&!o.size&&r&&r()},[s]),a==="popLayout"&&(t=c.jsx($w,{isPresent:s,children:t})),c.jsx(Ri.Provider,{value:h,children:t})};function Uw(){return new Map}const vn=t=>t.key||"";function td(t){const e=[];return j.Children.forEach(t,s=>{j.isValidElement(s)&&e.push(s)}),e}const er=({children:t,exitBeforeEnter:e,custom:s,initial:r=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const o=j.useMemo(()=>td(t),[t]),l=o.map(vn),d=j.useRef(!0),h=j.useRef(o),u=Qs(()=>new Map),[f,m]=j.useState(o),[p,g]=j.useState(o);Mi(()=>{d.current=!1,h.current=o;for(let k=0;k<p.length;k++){const S=vn(p[k]);l.includes(S)?u.delete(S):u.get(S)!==!0&&u.set(S,!1)}},[p,l.length,l.join("-")]);const y=[];if(o!==f){let k=[...o];for(let S=0;S<p.length;S++){const C=p[S],T=vn(C);l.includes(T)||(k.splice(S,0,C),y.push(C))}a==="wait"&&y.length&&(k=y),g(td(k)),m(o);return}const{forceRender:v}=j.useContext(Go);return c.jsx(c.Fragment,{children:p.map(k=>{const S=vn(k),C=o===p||l.includes(S),T=()=>{if(u.has(S))u.set(S,!0);else return;let O=!0;u.forEach(M=>{M||(O=!1)}),O&&(v==null||v(),g(h.current),n&&n())};return c.jsx(Vw,{isPresent:C,initial:!d.current||r?void 0:!1,custom:C?void 0:s,presenceAffectsLayout:i,mode:a,onExitComplete:C?void 0:T,children:k},S)})})};function zw(t){const e=Qs(()=>bt(t)),{isStatic:s}=j.useContext(Oi);if(s){const[,r]=j.useState(t);j.useEffect(()=>e.on("change",r),[])}return e}function Kf(t,e){const s=zw(e()),r=()=>s.set(e());return r(),Mi(()=>{const n=()=>ce.preRender(r,!1,!0),i=t.map(a=>a.on("change",n));return()=>{i.forEach(a=>a()),ct(r)}}),s}const Hw=t=>t&&typeof t=="object"&&t.mix,Ww=t=>Hw(t)?t.mix:void 0;function qw(...t){const e=!Array.isArray(t[0]),s=e?0:-1,r=t[0+s],n=t[1+s],i=t[2+s],a=t[3+s],o=Bo(n,i,{mixer:Ww(i[0]),...a});return e?o(r):o}function Kw(t){Rr.current=[],t();const e=Kf(Rr.current,t);return Rr.current=void 0,e}function sd(t,e,s,r){if(typeof t=="function")return Kw(t);const n=typeof e=="function"?e:qw(e,s,r);return Array.isArray(t)?rd(t,n):rd([t],([i])=>n(i))}function rd(t,e){const s=Qs(()=>[]);return Kf(t,()=>{s.length=0;const r=t.length;for(let n=0;n<r;n++)s[n]=t[n].get();return e(s)})}const Bn=new WeakMap;let Ut;function Gw(t,e){if(e){const{inlineSize:s,blockSize:r}=e[0];return{width:s,height:r}}else return t instanceof SVGElement&&"getBBox"in t?t.getBBox():{width:t.offsetWidth,height:t.offsetHeight}}function Yw({target:t,contentRect:e,borderBoxSize:s}){var r;(r=Bn.get(t))===null||r===void 0||r.forEach(n=>{n({target:t,contentSize:e,get size(){return Gw(t,s)}})})}function Xw(t){t.forEach(Yw)}function Jw(){typeof ResizeObserver>"u"||(Ut=new ResizeObserver(Xw))}function Zw(t,e){Ut||Jw();const s=df(t);return s.forEach(r=>{let n=Bn.get(r);n||(n=new Set,Bn.set(r,n)),n.add(e),Ut==null||Ut.observe(r)}),()=>{s.forEach(r=>{const n=Bn.get(r);n==null||n.delete(e),n!=null&&n.size||Ut==null||Ut.unobserve(r)})}}const $n=new Set;let Lr;function Qw(){Lr=()=>{const t={width:window.innerWidth,height:window.innerHeight},e={target:window,size:t,contentSize:t};$n.forEach(s=>s(e))},window.addEventListener("resize",Lr)}function e_(t){return $n.add(t),Lr||Qw(),()=>{$n.delete(t),!$n.size&&Lr&&(Lr=void 0)}}function t_(t,e){return typeof t=="function"?e_(t):Zw(t,e)}const s_=50,nd=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),r_=()=>({time:0,x:nd(),y:nd()}),n_={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function id(t,e,s,r){const n=s[e],{length:i,position:a}=n_[e],o=n.current,l=s.time;n.current=t[`scroll${a}`],n.scrollLength=t[`scroll${i}`]-t[`client${i}`],n.offset.length=0,n.offset[0]=0,n.offset[1]=n.scrollLength,n.progress=js(0,n.scrollLength,n.current);const d=r-l;n.velocity=d>s_?0:Lo(n.current-o,d)}function i_(t,e,s){id(t,"x",e,s),id(t,"y",e,s),e.time=s}function a_(t,e){const s={x:0,y:0};let r=t;for(;r&&r!==e;)if(r instanceof HTMLElement)s.x+=r.offsetLeft,s.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const n=r.getBoundingClientRect();r=r.parentElement;const i=r.getBoundingClientRect();s.x+=n.left-i.left,s.y+=n.top-i.top}else if(r instanceof SVGGraphicsElement){const{x:n,y:i}=r.getBBox();s.x+=n,s.y+=i;let a=null,o=r.parentNode;for(;!a;)o.tagName==="svg"&&(a=o),o=r.parentNode;r=a}else break;return s}const o_={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},Qa={start:0,center:.5,end:1};function ad(t,e,s=0){let r=0;if(t in Qa&&(t=Qa[t]),typeof t=="string"){const n=parseFloat(t);t.endsWith("px")?r=n:t.endsWith("%")?t=n/100:t.endsWith("vw")?r=n/100*document.documentElement.clientWidth:t.endsWith("vh")?r=n/100*document.documentElement.clientHeight:t=n}return typeof t=="number"&&(r=e*t),s+r}const l_=[0,0];function c_(t,e,s,r){let n=Array.isArray(t)?t:l_,i=0,a=0;return typeof t=="number"?n=[t,t]:typeof t=="string"&&(t=t.trim(),t.includes(" ")?n=t.split(" "):n=[t,Qa[t]?t:"0"]),i=ad(n[0],s,r),a=ad(n[1],e),i-a}const d_={x:0,y:0};function h_(t){return"getBBox"in t&&t.tagName!=="svg"?t.getBBox():{width:t.clientWidth,height:t.clientHeight}}function u_(t,e,s){const{offset:r=o_.All}=s,{target:n=t,axis:i="y"}=s,a=i==="y"?"height":"width",o=n!==t?a_(n,t):d_,l=n===t?{width:t.scrollWidth,height:t.scrollHeight}:h_(n),d={width:t.clientWidth,height:t.clientHeight};e[i].offset.length=0;let h=!e[i].interpolate;const u=r.length;for(let f=0;f<u;f++){const m=c_(r[f],d[a],l[a],o[i]);!h&&m!==e[i].interpolatorOffsets[f]&&(h=!0),e[i].offset[f]=m}h&&(e[i].interpolate=Bo(e[i].offset,Qu(r)),e[i].interpolatorOffsets=[...e[i].offset]),e[i].progress=e[i].interpolate(e[i].current)}function f_(t,e=t,s){if(s.x.targetOffset=0,s.y.targetOffset=0,e!==t){let r=e;for(;r&&r!==t;)s.x.targetOffset+=r.offsetLeft,s.y.targetOffset+=r.offsetTop,r=r.offsetParent}s.x.targetLength=e===t?e.scrollWidth:e.clientWidth,s.y.targetLength=e===t?e.scrollHeight:e.clientHeight,s.x.containerLength=t.clientWidth,s.y.containerLength=t.clientHeight}function m_(t,e,s,r={}){return{measure:()=>f_(t,r.target,s),update:n=>{i_(t,s,n),(r.offset||r.target)&&u_(t,s,r)},notify:()=>e(s)}}const dr=new WeakMap,od=new WeakMap,oa=new WeakMap,ld=t=>t===document.documentElement?window:t;function rl(t,{container:e=document.documentElement,...s}={}){let r=oa.get(e);r||(r=new Set,oa.set(e,r));const n=r_(),i=m_(e,t,n,s);if(r.add(i),!dr.has(e)){const o=()=>{for(const f of r)f.measure()},l=()=>{for(const f of r)f.update(Te.timestamp)},d=()=>{for(const f of r)f.notify()},h=()=>{ce.read(o,!1,!0),ce.read(l,!1,!0),ce.update(d,!1,!0)};dr.set(e,h);const u=ld(e);window.addEventListener("resize",h,{passive:!0}),e!==document.documentElement&&od.set(e,t_(e,h)),u.addEventListener("scroll",h,{passive:!0})}const a=dr.get(e);return ce.read(a,!1,!0),()=>{var o;ct(a);const l=oa.get(e);if(!l||(l.delete(i),l.size))return;const d=dr.get(e);dr.delete(e),d&&(ld(e).removeEventListener("scroll",d),(o=od.get(e))===null||o===void 0||o(),window.removeEventListener("resize",d))}}function Gf(t,e){let s;const r=()=>{const{currentTime:n}=e,a=(n===null?0:n.value)/100;s!==a&&t(a),s=a};return ce.update(r,!0),()=>ct(r)}function g_({source:t,container:e,axis:s="y"}){t&&(e=t);const r={value:0},n=rl(i=>{r.value=i[s].progress*100},{container:e,axis:s});return{currentTime:r,cancel:n}}const la=new Map;function Yf({source:t,container:e=document.documentElement,axis:s="y"}={}){t&&(e=t),la.has(e)||la.set(e,{});const r=la.get(e);return r[s]||(r[s]=rf()?new ScrollTimeline({source:e,axis:s}):g_({source:e,axis:s})),r[s]}function p_(t){return t.length===2}function Xf(t){return t&&(t.target||t.offset)}function y_(t,e){return p_(t)||Xf(e)?rl(s=>{t(s[e.axis].progress,s)},e):Gf(t,Yf(e))}function x_(t,e){if(t.flatten(),Xf(e))return t.pause(),rl(s=>{t.time=t.duration*s[e.axis].progress},e);{const s=Yf(e);return t.attachTimeline?t.attachTimeline(s,r=>(r.pause(),Gf(n=>{r.time=r.duration*n},s))):Be}}function b_(t,{axis:e="y",...s}={}){const r={axis:e,...s};return typeof t=="function"?y_(t,r):x_(t,r)}function cd(t,e){Py(!!(!e||e.current))}const v_=()=>({scrollX:bt(0),scrollY:bt(0),scrollXProgress:bt(0),scrollYProgress:bt(0)});function w_({container:t,target:e,layoutEffect:s=!0,...r}={}){const n=Qs(v_);return(s?Mi:j.useEffect)(()=>(cd("target",e),cd("container",t),b_((a,{x:o,y:l})=>{n.scrollX.set(o.current),n.scrollXProgress.set(o.progress),n.scrollY.set(l.current),n.scrollYProgress.set(l.progress)},{...r,container:(t==null?void 0:t.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[t,e,JSON.stringify(r.offset)]),n}const Ii={ml:{login:"ലോഗിൻ",signup:"രജിസ്റ്റർ",loggingIn:"പ്രവേശിക്കുന്നു...",signingUp:"രജിസ്റ്റർ ചെയ്യുന്നു...",email:"ഇമെയിൽ",password:"പാസ്‌വേഡ്",name:"പേര്",emailPlaceholder:"നിങ്ങളുടെ ഇമെയിൽ",passwordPlaceholder:"നിങ്ങളുടെ പാസ്‌വേഡ്",namePlaceholder:"നിങ്ങളുടെ പേര്",loginError:"ലോഗിൻ പരാജയപ്പെട്ടു",signupError:"രജിസ്ട്രേഷൻ പരാജയപ്പെട്ടു",dontHaveAccount:"അക്കൗണ്ട് ഇല്ലേ?",alreadyHaveAccount:"അക്കൗണ്ട് ഉണ്ടോ?",signupSuccess:"രജിസ്ട്രേഷൻ വിജയകരം! ദയവായി നിങ്ങളുടെ ഇമെയിൽ പരിശോധിക്കുക.",loginSuccess:"വിജയകരമായി ലോഗിൻ ചെയ്തു!",logoutSuccess:"വിജയകരമായി ലോഗ്ഔട്ട് ചെയ്തു!",logout:"ലോഗ്ഔട്ട്"},en:{login:"Login",signup:"Sign Up",loggingIn:"Logging in...",signingUp:"Signing up...",email:"Email",password:"Password",name:"Name",emailPlaceholder:"Your email",passwordPlaceholder:"Your password",namePlaceholder:"Your name",loginError:"Login failed",signupError:"Sign up failed",dontHaveAccount:"Don't have an account?",alreadyHaveAccount:"Already have an account?",signupSuccess:"Successfully registered! Please check your email for verification.",loginSuccess:"Successfully logged in!",logoutSuccess:"Successfully logged out!",logout:"Logout"}};function Jf(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(s=Jf(t[e]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function D(){for(var t,e,s=0,r="",n=arguments.length;s<n;s++)(t=arguments[s])&&(e=Jf(t))&&(r&&(r+=" "),r+=e);return r}const nl="-",__=t=>{const e=j_(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const o=a.split(nl);return o[0]===""&&o.length!==1&&o.shift(),Zf(o,e)||k_(a)},getConflictingClassGroupIds:(a,o)=>{const l=s[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},Zf=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const s=t[0],r=e.nextPart.get(s),n=r?Zf(t.slice(1),r):void 0;if(n)return n;if(e.validators.length===0)return;const i=t.join(nl);return(a=e.validators.find(({validator:o})=>o(i)))==null?void 0:a.classGroupId},dd=/^\[(.+)\]$/,k_=t=>{if(dd.test(t)){const e=dd.exec(t)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},j_=t=>{const{theme:e,prefix:s}=t,r={nextPart:new Map,validators:[]};return N_(Object.entries(t.classGroups),s).forEach(([i,a])=>{eo(a,r,i,e)}),r},eo=(t,e,s,r)=>{t.forEach(n=>{if(typeof n=="string"){const i=n===""?e:hd(e,n);i.classGroupId=s;return}if(typeof n=="function"){if(S_(n)){eo(n(r),e,s,r);return}e.validators.push({validator:n,classGroupId:s});return}Object.entries(n).forEach(([i,a])=>{eo(a,hd(e,i),s,r)})})},hd=(t,e)=>{let s=t;return e.split(nl).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},S_=t=>t.isThemeGetter,N_=(t,e)=>e?t.map(([s,r])=>{const n=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[e+a,o])):i);return[s,n]}):t,T_=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const n=(i,a)=>{s.set(i,a),e++,e>t&&(e=0,r=s,s=new Map)};return{get(i){let a=s.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return n(i,a),a},set(i,a){s.has(i)?s.set(i,a):n(i,a)}}},Qf="!",A_=t=>{const{separator:e,experimentalParseClassName:s}=t,r=e.length===1,n=e[0],i=e.length,a=o=>{const l=[];let d=0,h=0,u;for(let y=0;y<o.length;y++){let v=o[y];if(d===0){if(v===n&&(r||o.slice(y,y+i)===e)){l.push(o.slice(h,y)),h=y+i;continue}if(v==="/"){u=y;continue}}v==="["?d++:v==="]"&&d--}const f=l.length===0?o:o.substring(h),m=f.startsWith(Qf),p=m?f.substring(1):f,g=u&&u>h?u-h:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}};return s?o=>s({className:o,parseClassName:a}):a},P_=t=>{if(t.length<=1)return t;const e=[];let s=[];return t.forEach(r=>{r[0]==="["?(e.push(...s.sort(),r),s=[]):s.push(r)}),e.push(...s.sort()),e},E_=t=>({cache:T_(t.cacheSize),parseClassName:A_(t),...__(t)}),C_=/\s+/,R_=(t,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:n}=e,i=[],a=t.trim().split(C_);let o="";for(let l=a.length-1;l>=0;l-=1){const d=a[l],{modifiers:h,hasImportantModifier:u,baseClassName:f,maybePostfixModifierPosition:m}=s(d);let p=!!m,g=r(p?f.substring(0,m):f);if(!g){if(!p){o=d+(o.length>0?" "+o:o);continue}if(g=r(f),!g){o=d+(o.length>0?" "+o:o);continue}p=!1}const y=P_(h).join(":"),v=u?y+Qf:y,k=v+g;if(i.includes(k))continue;i.push(k);const S=n(g,p);for(let C=0;C<S.length;++C){const T=S[C];i.push(v+T)}o=d+(o.length>0?" "+o:o)}return o};function O_(){let t=0,e,s,r="";for(;t<arguments.length;)(e=arguments[t++])&&(s=em(e))&&(r&&(r+=" "),r+=s);return r}const em=t=>{if(typeof t=="string")return t;let e,s="";for(let r=0;r<t.length;r++)t[r]&&(e=em(t[r]))&&(s&&(s+=" "),s+=e);return s};function D_(t,...e){let s,r,n,i=a;function a(l){const d=e.reduce((h,u)=>u(h),t());return s=E_(d),r=s.cache.get,n=s.cache.set,i=o,o(l)}function o(l){const d=r(l);if(d)return d;const h=R_(l,s);return n(l,h),h}return function(){return i(O_.apply(null,arguments))}}const ge=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},tm=/^\[(?:([a-z-]+):)?(.+)\]$/i,M_=/^\d+\/\d+$/,L_=new Set(["px","full","screen"]),I_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,F_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,B_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,V_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jt=t=>Us(t)||L_.has(t)||M_.test(t),Lt=t=>tr(t,"length",Y_),Us=t=>!!t&&!Number.isNaN(Number(t)),ca=t=>tr(t,"number",Us),hr=t=>!!t&&Number.isInteger(Number(t)),U_=t=>t.endsWith("%")&&Us(t.slice(0,-1)),ee=t=>tm.test(t),It=t=>I_.test(t),z_=new Set(["length","size","percentage"]),H_=t=>tr(t,z_,sm),W_=t=>tr(t,"position",sm),q_=new Set(["image","url"]),K_=t=>tr(t,q_,J_),G_=t=>tr(t,"",X_),ur=()=>!0,tr=(t,e,s)=>{const r=tm.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):s(r[2]):!1},Y_=t=>F_.test(t)&&!B_.test(t),sm=()=>!1,X_=t=>$_.test(t),J_=t=>V_.test(t),Z_=()=>{const t=ge("colors"),e=ge("spacing"),s=ge("blur"),r=ge("brightness"),n=ge("borderColor"),i=ge("borderRadius"),a=ge("borderSpacing"),o=ge("borderWidth"),l=ge("contrast"),d=ge("grayscale"),h=ge("hueRotate"),u=ge("invert"),f=ge("gap"),m=ge("gradientColorStops"),p=ge("gradientColorStopPositions"),g=ge("inset"),y=ge("margin"),v=ge("opacity"),k=ge("padding"),S=ge("saturate"),C=ge("scale"),T=ge("sepia"),O=ge("skew"),M=ge("space"),b=ge("translate"),x=()=>["auto","contain","none"],_=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto",ee,e],N=()=>[ee,e],B=()=>["",jt,Lt],L=()=>["auto",Us,ee],w=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",ee],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[Us,ee];return{cacheSize:500,separator:":",theme:{colors:[ur],spacing:[jt,Lt],blur:["none","",It,ee],brightness:z(),borderColor:[t],borderRadius:["none","","full",It,ee],borderSpacing:N(),borderWidth:B(),contrast:z(),grayscale:I(),hueRotate:z(),invert:I(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[U_,Lt],inset:E(),margin:E(),opacity:z(),padding:N(),saturate:z(),scale:z(),sepia:I(),skew:z(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",ee]}],container:["container"],columns:[{columns:[It]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...w(),ee]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",hr,ee]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ee]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",hr,ee]}],"grid-cols":[{"grid-cols":[ur]}],"col-start-end":[{col:["auto",{span:["full",hr,ee]},ee]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[ur]}],"row-start-end":[{row:["auto",{span:[hr,ee]},ee]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ee]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ee,e]}],"min-w":[{"min-w":[ee,e,"min","max","fit"]}],"max-w":[{"max-w":[ee,e,"none","full","min","max","fit","prose",{screen:[It]},It]}],h:[{h:[ee,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ee,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ee,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ee,e,"auto","min","max","fit"]}],"font-size":[{text:["base",It,Lt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ca]}],"font-family":[{font:[ur]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ee]}],"line-clamp":[{"line-clamp":["none",Us,ca]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jt,ee]}],"list-image":[{"list-image":["none",ee]}],"list-style-type":[{list:["none","disc","decimal",ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jt,Lt]}],"underline-offset":[{"underline-offset":["auto",jt,ee]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...w(),W_]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",H_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},K_]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:A()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[jt,ee]}],"outline-w":[{outline:[jt,Lt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[jt,Lt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",It,G_]}],"shadow-color":[{shadow:[ur]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",It,ee]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[u]}],saturate:[{saturate:[S]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ee]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",ee]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[hr,ee]}],"translate-x":[{"translate-x":[b]}],"translate-y":[{"translate-y":[b]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ee]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ee]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ee]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[jt,Lt,ca]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Q_=D_(Z_);function Fi(...t){return Q_(D(t))}function Kr({children:t,className:e,variant:s="primary",size:r="md",...n}){const i="inline-flex items-center justify-center rounded-md font-medium transition-all duration-300",a={primary:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25 active:scale-95",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-100 hover:scale-105 active:scale-95",outline:"border-2 border-gray-300 hover:border-blue-500 dark:border-gray-600 dark:hover:border-blue-400 hover:scale-105 active:scale-95"},o={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return c.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:Fi(i,a[s],o[r],e),...n,children:t})}function ek({onClose:t}){const[e,s]=j.useState(""),[r,n]=j.useState(""),[i,a]=j.useState(null),[o,l]=j.useState({email:"",password:""}),[d,h]=j.useState(null),[u,f]=j.useState(null),{signIn:m,loading:p}=ss(),{language:g}=be(),y=Ii[g],v=j.useRef(null);j.useEffect(()=>{function T(O){v.current&&!v.current.contains(O.target)&&t()}return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[t]),j.useEffect(()=>{if(e===""){h(null);return}const T=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e);h(T),l(T?O=>({...O,email:""}):O=>({...O,email:g==="ml"?"സാധുവായ ഇമെയിൽ നൽകുക":"Invalid email address"}))},[e,g]),j.useEffect(()=>{if(r===""){f(null);return}const T=r.length>=6;f(T),l(T?O=>({...O,password:""}):O=>({...O,password:g==="ml"?"പാസ്‌വേഡ് 6 അക്ഷരങ്ങളെങ്കിലും ഉണ്ടായിരിക്കണം":"Password must be at least 6 characters"}))},[r,g]);const k=()=>{const T={email:"",password:""};let O=!0;return e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e)||(T.email=g==="ml"?"സാധുവായ ഇമെയിൽ നൽകുക":"Invalid email address",O=!1):(T.email=g==="ml"?"ഇമെയിൽ നൽകേണ്ടതാണ്":"Email is required",O=!1),r?r.length<6&&(T.password=g==="ml"?"പാസ്‌വേഡ് 6 അക്ഷരങ്ങളെങ്കിലും ഉണ്ടായിരിക്കണം":"Password must be at least 6 characters",O=!1):(T.password=g==="ml"?"പാസ്‌വേഡ് നൽകേണ്ടതാണ്":"Password is required",O=!1),l(T),O},S=async T=>{if(T.preventDefault(),!!k())try{a(null),await m(e,r),t()}catch(O){a(O instanceof Error?O.message:y.loginError)}},C=T=>{const{name:O,value:M}=T.target;O==="email"?s(M):O==="password"&&n(M),i&&a(null)};return c.jsxs(F.form,{ref:v,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},onSubmit:S,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:y.email}),c.jsxs("div",{className:"relative",children:[c.jsx(fo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"email",name:"email",value:e,onChange:C,className:D("pl-10 pr-10 w-full rounded-lg border bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 dark:focus:ring-blue-400",d===!1?"border-red-300 dark:border-red-600 focus:border-red-500 dark:focus:border-red-400":d===!0?"border-green-300 dark:border-green-600 focus:border-green-500 dark:focus:border-green-400":"border-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-400"),placeholder:y.emailPlaceholder,required:!0}),d!==null&&c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:d?c.jsx(Ge,{className:"h-5 w-5 text-green-500"}):c.jsx(Qe,{className:"h-5 w-5 text-red-500"})})]}),o.email&&c.jsx(F.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.email})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:y.password}),c.jsxs("div",{className:"relative",children:[c.jsx(mo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"password",name:"password",value:r,onChange:C,className:D("pl-10 pr-10 w-full rounded-lg border bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 dark:focus:ring-blue-400",u===!1?"border-red-300 dark:border-red-600 focus:border-red-500 dark:focus:border-red-400":u===!0?"border-green-300 dark:border-green-600 focus:border-green-500 dark:focus:border-green-400":"border-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-400"),placeholder:y.passwordPlaceholder,required:!0}),u!==null&&c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:u?c.jsx(Ge,{className:"h-5 w-5 text-green-500"}):c.jsx(Qe,{className:"h-5 w-5 text-red-500"})})]}),o.password&&c.jsx(F.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.password})]}),i&&c.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center text-red-600 text-sm",children:[c.jsx(en,{className:"h-4 w-4 mr-2"}),c.jsx("span",{children:i})]}),c.jsx(Kr,{type:"submit",className:"w-full",disabled:p||!!o.email||!!o.password,children:p?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx($r,{className:"w-5 h-5 mr-2 animate-spin"}),c.jsx("span",{children:y.loggingIn})]}):y.login})]})}function tk({onClose:t}){const[e,s]=j.useState(""),[r,n]=j.useState(""),[i,a]=j.useState(""),[o,l]=j.useState(null),[d,h]=j.useState({name:"",email:"",password:""}),[u,f]=j.useState({score:0,hasMinLength:!1,hasUppercase:!1,hasLowercase:!1,hasNumber:!1}),[m,p]=j.useState(null),[g,y]=j.useState(null),{signUp:v,loading:k}=ss(),{language:S}=be(),C=Ii[S],T=j.useRef(null);j.useEffect(()=>{function E(N){T.current&&!T.current.contains(N.target)&&t()}return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[t]),j.useEffect(()=>{if(i===""){y(null);return}const E=i.length>=2&&/^[a-zA-Z\s]+$/.test(i);y(E),E?h(N=>({...N,name:""})):i.length<2?h(N=>({...N,name:S==="ml"?"പേര് 2 അക്ഷരങ്ങളെങ്കിലും ഉണ്ടായിരിക്കണം":"Name must be at least 2 characters"})):/^[a-zA-Z\s]+$/.test(i)||h(N=>({...N,name:S==="ml"?"പേരിൽ അക്ഷരങ്ങളും സ്പേസുകളും മാത്രമേ അനുവദനീയമാണ്":"Name can only contain letters and spaces"}))},[i,S]),j.useEffect(()=>{if(e===""){p(null);return}const E=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e);p(E),h(E?N=>({...N,email:""}):N=>({...N,email:S==="ml"?"സാധുവായ ഇമെയിൽ നൽകുക":"Invalid email address"}))},[e,S]),j.useEffect(()=>{if(r===""){f({score:0,hasMinLength:!1,hasUppercase:!1,hasLowercase:!1,hasNumber:!1});return}const E=r.length>=8,N=/[A-Z]/.test(r),B=/[a-z]/.test(r),L=/[0-9]/.test(r);let w=0;E&&w++,N&&w++,B&&w++,L&&w++,f({score:w,hasMinLength:E,hasUppercase:N,hasLowercase:B,hasNumber:L}),h(E?N&&B&&L?A=>({...A,password:""}):A=>({...A,password:S==="ml"?"പാസ്‌വേഡിൽ ഒരു വലിയ അക്ഷരം, ഒരു ചെറിയ അക്ഷരം, ഒരു അക്കം എന്നിവ ഉണ്ടായിരിക്കണം":"Password must contain at least one uppercase letter, one lowercase letter, and one number"}):A=>({...A,password:S==="ml"?"പാസ്‌വേഡ് 8 അക്ഷരങ്ങളെങ്കിലും ഉണ്ടായിരിക്കണം":"Password must be at least 8 characters"}))},[r,S]);const O=()=>{const E={name:"",email:"",password:""};let N=!0;return i?i.length<2?(E.name=S==="ml"?"പേര് 2 അക്ഷരങ്ങളെങ്കിലും ഉണ്ടായിരിക്കണം":"Name must be at least 2 characters",N=!1):/^[a-zA-Z\s]+$/.test(i)||(E.name=S==="ml"?"പേരിൽ അക്ഷരങ്ങളും സ്പേസുകളും മാത്രമേ അനുവദനീയമാണ്":"Name can only contain letters and spaces",N=!1):(E.name=S==="ml"?"പേര് നൽകേണ്ടതാണ്":"Name is required",N=!1),e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e)||(E.email=S==="ml"?"സാധുവായ ഇമെയിൽ നൽകുക":"Invalid email address",N=!1):(E.email=S==="ml"?"ഇമെയിൽ നൽകേണ്ടതാണ്":"Email is required",N=!1),r?r.length<8?(E.password=S==="ml"?"പാസ്‌വേഡ് 8 അക്ഷരങ്ങളെങ്കിലും ഉണ്ടായിരിക്കണം":"Password must be at least 8 characters",N=!1):/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(r)||(E.password=S==="ml"?"പാസ്‌വേഡിൽ ഒരു വലിയ അക്ഷരം, ഒരു ചെറിയ അക്ഷരം, ഒരു അക്കം എന്നിവ ഉണ്ടായിരിക്കണം":"Password must contain at least one uppercase letter, one lowercase letter, and one number",N=!1):(E.password=S==="ml"?"പാസ്‌വേഡ് നൽകേണ്ടതാണ്":"Password is required",N=!1),h(E),N},M=async E=>{if(E.preventDefault(),!!O())try{l(null),await v(e,r,i),t()}catch(N){l(N instanceof Error?N.message:C.signupError)}},b=E=>{const{name:N,value:B}=E.target;N==="email"?s(B):N==="password"?n(B):N==="name"&&a(B),o&&l(null)},x=()=>{const{score:E}=u;return E===0?"":E===1?S==="ml"?"ദുർബലം":"Weak":E===2?S==="ml"?"മിതമായത്":"Fair":E===3?S==="ml"?"നല്ലത്":"Good":S==="ml"?"ശക്തമായത്":"Strong"},_=()=>{const{score:E}=u;return E===0?"bg-gray-200 dark:bg-gray-700":E===1?"bg-red-500":E===2?"bg-yellow-500":E===3?"bg-blue-500":"bg-green-500"};return c.jsxs(F.form,{ref:T,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},onSubmit:M,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:C.name}),c.jsxs("div",{className:"relative",children:[c.jsx(Mh,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",name:"name",value:i,onChange:b,className:D("pl-10 pr-10 w-full rounded-lg border bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 dark:focus:ring-blue-400",g===!1?"border-red-300 dark:border-red-600 focus:border-red-500 dark:focus:border-red-400":g===!0?"border-green-300 dark:border-green-600 focus:border-green-500 dark:focus:border-green-400":"border-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-400"),placeholder:C.namePlaceholder,required:!0}),g!==null&&c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:g?c.jsx(Ge,{className:"h-5 w-5 text-green-500"}):c.jsx(Qe,{className:"h-5 w-5 text-red-500"})})]}),d.name&&c.jsx(F.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.name})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:C.email}),c.jsxs("div",{className:"relative",children:[c.jsx(fo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"email",name:"email",value:e,onChange:b,className:D("pl-10 pr-10 w-full rounded-lg border bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 dark:focus:ring-blue-400",m===!1?"border-red-300 dark:border-red-600 focus:border-red-500 dark:focus:border-red-400":m===!0?"border-green-300 dark:border-green-600 focus:border-green-500 dark:focus:border-green-400":"border-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-400"),placeholder:C.emailPlaceholder,required:!0}),m!==null&&c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:m?c.jsx(Ge,{className:"h-5 w-5 text-green-500"}):c.jsx(Qe,{className:"h-5 w-5 text-red-500"})})]}),d.email&&c.jsx(F.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.email})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:C.password}),c.jsxs("div",{className:"relative",children:[c.jsx(mo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"password",name:"password",value:r,onChange:b,className:D("pl-10 w-full rounded-lg border bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 dark:focus:ring-blue-400",d.password?"border-red-300 dark:border-red-600 focus:border-red-500 dark:focus:border-red-400":u.score>=3?"border-green-300 dark:border-green-600 focus:border-green-500 dark:focus:border-green-400":"border-gray-300 dark:border-gray-600 focus:border-blue-500 dark:focus:border-blue-400"),placeholder:C.passwordPlaceholder,required:!0})]}),r&&c.jsxs("div",{className:"mt-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsxs("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:[S==="ml"?"പാസ്‌വേഡ് ശക്തി":"Password strength",":",c.jsx("span",{className:D("ml-1 font-semibold",u.score===1?"text-red-500":u.score===2?"text-yellow-500":u.score===3?"text-blue-500":u.score===4?"text-green-500":""),children:x()})]}),c.jsxs("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:[u.score,"/4"]})]}),c.jsx("div",{className:"h-1 w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:c.jsx(F.div,{initial:{width:0},animate:{width:`${u.score/4*100}%`},className:`h-full ${_()}`})}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex items-center text-xs",children:[u.hasMinLength?c.jsx(Ge,{className:"h-3.5 w-3.5 text-green-500 mr-1.5"}):c.jsx(Qe,{className:"h-3.5 w-3.5 text-red-500 mr-1.5"}),c.jsx("span",{className:u.hasMinLength?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400",children:S==="ml"?"8 അക്ഷരങ്ങളെങ്കിലും":"At least 8 characters"})]}),c.jsxs("div",{className:"flex items-center text-xs",children:[u.hasUppercase?c.jsx(Ge,{className:"h-3.5 w-3.5 text-green-500 mr-1.5"}):c.jsx(Qe,{className:"h-3.5 w-3.5 text-red-500 mr-1.5"}),c.jsx("span",{className:u.hasUppercase?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400",children:S==="ml"?"ഒരു വലിയ അക്ഷരം":"One uppercase letter"})]}),c.jsxs("div",{className:"flex items-center text-xs",children:[u.hasLowercase?c.jsx(Ge,{className:"h-3.5 w-3.5 text-green-500 mr-1.5"}):c.jsx(Qe,{className:"h-3.5 w-3.5 text-red-500 mr-1.5"}),c.jsx("span",{className:u.hasLowercase?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400",children:S==="ml"?"ഒരു ചെറിയ അക്ഷരം":"One lowercase letter"})]}),c.jsxs("div",{className:"flex items-center text-xs",children:[u.hasNumber?c.jsx(Ge,{className:"h-3.5 w-3.5 text-green-500 mr-1.5"}):c.jsx(Qe,{className:"h-3.5 w-3.5 text-red-500 mr-1.5"}),c.jsx("span",{className:u.hasNumber?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400",children:S==="ml"?"ഒരു അക്കം":"One number"})]})]})]}),d.password&&c.jsx(F.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.password})]}),o&&c.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center text-red-600 text-sm",children:[c.jsx(en,{className:"h-4 w-4 mr-2"}),c.jsx("span",{children:o})]}),c.jsx(Kr,{type:"submit",className:"w-full",disabled:k||!!d.name||!!d.email||!!d.password||u.score<3,children:k?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx($r,{className:"w-5 h-5 mr-2 animate-spin"}),c.jsx("span",{children:C.signingUp})]}):C.signup})]})}function sk({isOpen:t,onClose:e,initialMode:s="login"}){const[r,n]=j.useState(s),{language:i}=be(),a=Ii[i];return j.useEffect(()=>{n(s)},[s]),c.jsx(er,{children:t&&c.jsxs(c.Fragment,{children:[c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60]",onClick:e}),c.jsxs(F.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed top-1/2 left-[calc(50%-300px)] transform -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-xl shadow-[0_0_30px_rgba(0,0,0,0.2)] dark:shadow-[0_0_30px_rgba(0,0,0,0.5)] border border-gray-100 dark:border-gray-700 p-6 w-full max-w-md z-[70] backdrop-blur-md backdrop-filter",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r==="login"?a.login:a.signup}),c.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:c.jsx(Qe,{className:"h-6 w-6"})})]}),c.jsx("div",{className:"mt-4",children:r==="login"?c.jsx(ek,{onClose:e}):c.jsx(tk,{onClose:e})}),c.jsx("div",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-400",children:r==="login"?c.jsxs(c.Fragment,{children:[i==="ml"?"അക്കൗണ്ട് ഇല്ലേ?":"Don't have an account?"," ",c.jsx("button",{onClick:()=>n("signup"),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:a.signup})]}):c.jsxs(c.Fragment,{children:[i==="ml"?"അക്കൗണ്ട് ഉണ്ടോ?":"Already have an account?"," ",c.jsx("button",{onClick:()=>n("login"),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:a.login})]})})]})]})})}function ud(){const[t,e]=j.useState(!1),[s,r]=j.useState("login"),{language:n}=be(),{theme:i}=yo(),a=Ii[n],o=l=>{r(l),e(!0)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:c.jsxs(Kr,{variant:"outline",onClick:()=>o("login"),className:"flex items-center space-x-2",children:[c.jsx(Lh,{className:"h-4 w-4 text-gray-600 dark:text-gray-300"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a.login})]})}),c.jsx(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1},children:c.jsxs(Kr,{variant:"primary",onClick:()=>o("signup"),className:"flex items-center space-x-2",children:[c.jsx(tg,{className:`h-4 w-4 ${i==="light"?"text-gray-700":"text-gray-300"}`}),c.jsx("span",{className:`text-white ${i==="light"?"text-gray-700":"text-gray-300"}`,children:a.signup})]})})]}),c.jsx(sk,{isOpen:t,onClose:()=>e(!1),initialMode:s})]})}function fd(){const{user:t,signOut:e}=ss(),{language:s}=be();return t?c.jsx(er,{children:c.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative group",children:[c.jsxs("button",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:[c.jsx(Mh,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"}),c.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:t.name})]}),c.jsx(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute right-0 mt-2 w-48 py-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl invisible group-hover:visible",children:c.jsxs("button",{onClick:e,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:[c.jsx(Ih,{className:"h-4 w-4 mr-2"}),c.jsx("span",{children:s==="ml"?"കടക്ക് പുറത്ത് ":"Logout"})]})})]})}):null}const rk=()=>{const[t,e]=j.useState(!1),s=Oh(),{theme:r,toggleTheme:n}=yo(),{toggleLanguage:i,t:a}=be(),{user:o}=ss(),l=[{path:"/",label:a.home},{path:"/analyze",label:a.analyze},{path:"/trending",label:a.trending}];return c.jsxs("nav",{className:"bg-gray-800/95 backdrop-blur-lg sticky top-0 z-50 shadow-lg",children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex items-center justify-between h-16",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsxs(Tr,{to:"/",className:"flex items-center space-x-2",children:[c.jsx(sg,{className:"h-8 w-8 text-blue-500"}),c.jsx("span",{className:"text-xl font-bold text-white hidden sm:block",children:a.title})]})}),c.jsx("div",{className:"hidden md:flex md:items-center md:space-x-4",children:l.map(({path:d,label:h})=>c.jsx(Tr,{to:d,className:s.pathname===d?"bg-blue-600 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200":"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:h},d))}),c.jsxs("div",{className:"hidden md:flex md:items-center md:space-x-4",children:[c.jsx("button",{onClick:i,className:"p-2 rounded-md text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",children:c.jsx(vl,{className:"h-5 w-5"})}),c.jsx("button",{onClick:n,className:"p-2 rounded-md text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",children:r==="dark"?c.jsx(wl,{className:"h-5 w-5"}):c.jsx(_l,{className:"h-5 w-5"})}),c.jsx("div",{className:"ml-4",children:o?c.jsx(fd,{}):c.jsx(ud,{})})]}),c.jsx("div",{className:"md:hidden",children:c.jsx("button",{onClick:()=>e(!t),className:"p-2 rounded-md text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",children:t?c.jsx(Qe,{className:"h-6 w-6"}):c.jsx(rg,{className:"h-6 w-6"})})})]})}),c.jsx("div",{className:t?"md:hidden block":"md:hidden hidden",children:c.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-gray-800",children:[l.map(({path:d,label:h})=>c.jsx(Tr,{to:d,onClick:()=>e(!1),className:s.pathname===d?"bg-blue-600 text-white block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200":"text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200",children:h},d)),c.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[c.jsx("button",{onClick:i,className:"p-2 rounded-md text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",children:c.jsx(vl,{className:"h-5 w-5"})}),c.jsx("button",{onClick:n,className:"p-2 rounded-md text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-200",children:r==="dark"?c.jsx(wl,{className:"h-5 w-5"}):c.jsx(_l,{className:"h-5 w-5"})}),c.jsx("div",{children:o?c.jsx(fd,{}):c.jsx(ud,{})})]})]})})]})};function nk({children:t}){yo();const{language:e,toggleLanguage:s}=be();ss();const r=Oh(),n=Oe[e],[i,a]=j.useState(!1);j.useState({x:0,y:0});const o=Zm(),[l,d]=j.useState(null),[h,u]=j.useState(null);r.pathname;const f=50;j.useEffect(()=>{const v=()=>{a(window.scrollY>0)};return window.addEventListener("scroll",v),()=>window.removeEventListener("scroll",v)},[]),n.home,n.analyze,n.trending;const m=ng(({movement:[v],direction:[k],distance:S})=>{S>f&&(k>0?o(-1):o(1))}),p=v=>{u(null),d(v.targetTouches[0].clientX)},g=v=>{u(v.targetTouches[0].clientX)},y=()=>{if(!l||!h)return;const v=l-h,k=v>f,S=v<-f;k&&o(1),S&&o(-1)};return c.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-gray-900 to-gray-800 text-white",...m(),onTouchStart:p,onTouchMove:g,onTouchEnd:y,children:[c.jsx(rk,{}),c.jsx("main",{className:"flex-1 container mx-auto px-4 py-6 overflow-x-hidden",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:t})}),c.jsx("footer",{className:"py-4 text-center text-gray-400 text-sm",children:c.jsx("p",{children:"© 2024 YEAH. All rights reserved."})})]})}function ik(){const{language:t}=be(),{scrollYProgress:e}=w_(),s=({value:a,duration:o=2})=>{const[l,d]=Ar.useState(0),h=parseInt(a.replace(/[^0-9]/g,""));return Ar.useEffect(()=>{const u=setInterval(()=>{l<h&&d(f=>Math.min(f+Math.ceil(h/(o*20)),h))},50);return()=>clearInterval(u)},[l,h]),a.replace(/[0-9]+/,l)},r=[{value:"65%",label:t==="ml"?"വ്യാജ വാർത്തകൾ":"Fake News",description:t==="ml"?"ലോകത്തിലെ വാർത്തകളിൽ":"of news worldwide"},{value:"96%",label:t==="ml"?"കൃത്യത":"Accuracy",description:t==="ml"?"തിരിച്ചറിയൽ നിരക്ക്":"detection rate"},{value:"50 L",label:t==="ml"?"ജനങ്ങൾ":"People",description:t==="ml"?"കേരളത്തിൽ വ്യാജ വാർത്തകളാൽ സ്വാധീനിക്കപ്പെടുന്നു ":"affected by fake news in Kerala"}],n=sd(e,[.3,.4],[.9,1]),i=sd(e,[.3,.4],[.3,1]);return c.jsx(F.section,{className:"py-12 relative",style:{scale:n,opacity:i},initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:r.map((a,o)=>c.jsxs(F.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:o*.2},whileHover:{scale:1.05,boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",transition:{duration:.2}},className:`text-center p-6 bg-white/50 dark:bg-gray-800/50 rounded-xl backdrop-blur-sm 
                       relative overflow-hidden group transition-all duration-300`,children:[c.jsx(F.div,{className:"text-4xl font-bold text-blue-600 dark:text-blue-400 mb-2",initial:{scale:.5,opacity:0},whileInView:{scale:1,opacity:1},viewport:{once:!0},transition:{duration:.5,delay:o*.2},children:c.jsx(s,{value:a.value})}),c.jsx(F.div,{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},transition:{duration:.5,delay:.2+o*.2},children:a.label}),c.jsx(F.div,{className:"text-sm text-gray-600 dark:text-gray-300",initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},transition:{duration:.5,delay:.4+o*.2},children:a.description})]},o))})})}const ak={ml:[{text:"സത്യം അറിയുക എന്നത് നമ്മുടെ അവകാശമാണ്, അത് പങ്കുവയ്ക്കുക എന്നത് നമ്മുടെ ഉത്തരവാദിത്തവും.",author:"മഹാത്മാ ഗാന്ധി"},{text:"വ്യാജ വാർത്തകൾ യഥാർത്ഥ വാർത്തകളേക്കാൾ വേഗത്തിൽ പ്രചരിക്കുന്നു. നമുക്ക് സത്യത്തിന്റെ കാവലാളാകാം.",author:"കേരള മീഡിയ അക്കാദമി"},{text:"വിവരങ്ങൾ ശക്തമാണ്, പക്ഷേ സത്യം അതിലും ശക്തമാണ്.",author:"മലയാള മനോരമ"}],en:[{text:"In a world of endless information, the ability to discern truth from fiction is not just a skill—it's a responsibility.",author:"Digital Ethics Institute"},{text:"The truth is not just what happened, but what we choose to share and how we choose to share it.",author:"Media Literacy Foundation"},{text:"Misinformation spreads faster than truth, but truth endures longer than lies.",author:"Fact-Check Initiative"},{text:"In the age of information, ignorance is a choice. Choose wisdom, choose truth.",author:"Digital Wisdom Project"}]};function ok({text:t,author:e,index:s}){return c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:s*.1},className:"relative p-6 bg-white/80 dark:bg-gray-800/80 rounded-xl shadow-xl backdrop-blur-lg",children:[c.jsx("div",{className:"absolute -top-4 -left-4",children:c.jsx("div",{className:"p-3 bg-blue-600 rounded-lg shadow-lg",children:c.jsx(ig,{className:"h-6 w-6 text-white"})})}),c.jsxs("div",{className:"mt-4",children:[c.jsx("p",{className:"text-lg text-gray-800 dark:text-gray-200 leading-relaxed",children:t}),c.jsxs("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400 font-medium",children:["— ",e]})]}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-b-xl"})]})}function lk(){const{language:t}=be(),[e,s]=j.useState(0),r=ak[t];return j.useEffect(()=>{const n=setInterval(()=>{s(i=>(i+1)%r.length)},7e3);return()=>clearInterval(n)},[r.length]),c.jsx("section",{className:"py-12",children:c.jsxs("div",{className:"relative max-w-4xl mx-auto px-4",children:[c.jsx(er,{mode:"wait",children:c.jsx(ok,{text:r[e].text,author:r[e].author,index:e},e)}),c.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:r.map((n,i)=>c.jsx("button",{onClick:()=>s(i),className:`w-2 h-2 rounded-full transition-all duration-300 ${i===e?"bg-blue-600 w-6":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500"}`,"aria-label":`Go to quote ${i+1}`},i))})]})})}function ck(){const{language:t}=be(),e=Oe[t],s=[{icon:ag,title:e.featureTitle1,description:e.featureDesc1},{icon:og,title:e.featureTitle2,description:e.featureDesc2},{icon:lg,title:e.featureTitle3,description:e.featureDesc3}];return c.jsxs("div",{className:"space-y-16",children:[c.jsx(F.section,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:c.jsxs(F.div,{className:"max-w-3xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[c.jsx(F.h1,{className:"text-4xl sm:text-5xl font-bold text-gray-900 dark:text-white mb-6 bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600",initial:{scale:.9},animate:{scale:1},transition:{duration:.6},children:e.heroTitle}),c.jsx(F.p,{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,delay:.2},children:e.heroSubtitle}),c.jsx(F.div,{whileHover:{scale:1.05,transition:{duration:.2}},whileTap:{scale:.95},children:c.jsx(Tr,{to:"/analyze",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-all duration-300",children:e.getStarted})})]})}),c.jsxs(F.section,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.3,ease:"easeOut"},className:"relative",children:[c.jsx(F.div,{animate:{background:["radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.15) 0%, transparent 70%)","radial-gradient(circle at 80% 80%, rgba(99, 102, 241, 0.15) 0%, transparent 70%)","radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.15) 0%, transparent 70%)"]},transition:{duration:8,repeat:1/0,repeatType:"reverse"},className:"absolute inset-0 rounded-xl"}),c.jsx(lk,{})]}),c.jsx(ik,{}),c.jsx(F.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:c.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:s.map((r,n)=>c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:n*.2},whileHover:{scale:1.05,boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",transition:{duration:.2}},className:`text-center p-6 bg-white/50 dark:bg-gray-800/50 rounded-xl backdrop-blur-sm 
                         relative overflow-hidden group transition-all duration-300`,children:[c.jsx(F.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,delay:n*.2},className:"mb-6",children:c.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:c.jsx(r.icon,{className:"h-6 w-6 text-white"})})}),c.jsx(F.h3,{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2+n*.2},children:r.title}),c.jsx(F.p,{className:"text-sm text-gray-600 dark:text-gray-300",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.4+n*.2},children:r.description})]},n))})}),c.jsx(F.section,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:c.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6},whileHover:{scale:1.02,transition:{duration:.2}},className:"p-8 bg-white/50 dark:bg-gray-800/50 rounded-xl backdrop-blur-sm",children:[c.jsx(F.h2,{className:"text-3xl font-bold mb-4 text-gray-900 dark:text-white",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},children:e.ctaTitle}),c.jsx(F.p,{className:"text-lg mb-6 text-gray-600 dark:text-gray-300",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},children:e.ctaDescription}),c.jsx(F.div,{whileHover:{scale:1.05,transition:{duration:.2}},whileTap:{scale:.95},children:c.jsx(Tr,{to:"/analyze",className:"inline-flex items-center px-6 py-3 border-2 border-blue-600 rounded-md text-base font-medium text-blue-600 hover:bg-blue-600 hover:text-white transition-all duration-300",children:e.startAnalyzing})})]})})]})}const dt=({children:t,className:e=""})=>c.jsx("div",{className:`
        relative rounded-xl 
        bg-white/80 dark:bg-gray-800/80 
        backdrop-blur-lg shadow-lg 
        border border-white/20 dark:border-gray-700/20
        focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-opacity-50 
        motion-safe:transition-all duration-300
        ${e}
      `,children:t});function dk({onAnalyze:t,isAnalyzing:e=!1}){const[s,r]=j.useState(""),[n,i]=j.useState(null),[a,o]=j.useState(!1),[l,d]=j.useState(!1),h=j.useRef(null),u=j.useRef(null),{language:f}=be(),m=f==="ml",p=C=>{try{return new URL(C),!0}catch{return!1}};j.useEffect(()=>{d(p(s.trim()))},[s]);const g=C=>{if(C.preventDefault(),!s.trim()&&!n){Et.error(f==="ml"?"ദയവായി വാചകം നൽകുക അല്ലെങ്കിൽ ചിത്രം തിരഞ്ഞെടുക്കുക":"Please enter text or select an image");return}if(s.trim()&&!l&&s.trim().length<20){Et.error(f==="ml"?"കുറഞ്ഞത് 20 അക്ഷരങ്ങളെങ്കിലും നൽകുക":"Please enter at least 20 characters");return}let T=n?"image":"text";l&&(T="url"),t({type:T,content:s.trim(),imageContent:n||void 0})},y=C=>{r(C.target.value),u.current&&(u.current.style.height="auto",u.current.style.height=`${Math.min(300,u.current.scrollHeight)}px`)},v=C=>{if(C.target.files&&C.target.files[0]){const T=C.target.files[0];if(!T.type.match("image.*")){Et.error(f==="ml"?"ദയവായി ശരിയായ ചിത്ര ഫോർമാറ്റ് തിരഞ്ഞെടുക്കുക":"Please select a valid image format");return}if(T.size>5*1024*1024){Et.error(f==="ml"?"ചിത്രം 5MB-ൽ കുറവായിരിക്കണം":"Image must be less than 5MB");return}const O=new FileReader;O.onload=M=>{M.target&&typeof M.target.result=="string"&&i(M.target.result)},O.readAsDataURL(T)}},k=()=>{i(null),h.current&&(h.current.value="")},S=C=>{C.key==="Enter"&&(C.ctrlKey||C.metaKey)&&!e&&(C.preventDefault(),g(C))};return c.jsx(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:c.jsx(dt,{className:"p-6",children:c.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-xs mb-2 ml-1",children:Oe[f].inputLabel}),c.jsx("textarea",{ref:u,value:s,onChange:y,onKeyDown:S,placeholder:Oe[f].placeholder,className:D("w-full bg-white/50 dark:bg-gray-800/50 rounded-lg resize-none shadow-sm","border border-gray-200 dark:border-gray-700","focus:border-blue-400 focus:ring-2 focus:ring-blue-300/30 dark:focus:ring-blue-700/30 focus:outline-none","placeholder:text-gray-400 dark:placeholder:text-gray-500","transition-all duration-200","p-4","min-h-[120px]",m&&"text-lg",l&&"border-blue-400 dark:border-blue-600")}),c.jsxs("div",{className:"absolute bottom-3 right-4 flex items-center gap-3",children:[c.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[c.jsx(cg,{className:"w-3 h-3 mr-1"}),c.jsx("span",{children:"Ctrl + Enter"})]}),s&&!l&&c.jsxs("div",{className:D("text-xs",s.length<20?"text-amber-500 dark:text-amber-400":"text-gray-500 dark:text-gray-400"),children:[s.length," ",s.length<20&&c.jsx("span",{children:"/ 20"})]})]}),l&&c.jsx(F.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-2 ml-1 text-xs flex items-center",children:c.jsxs("div",{className:"flex items-center text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded-md",children:[c.jsx(pi,{className:"w-3 h-3 mr-1.5"}),f==="ml"?"URL വിശകലനം നടത്തുന്നു":"URL detected - content will be extracted and analyzed"]})})]}),n&&c.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative mt-4",children:[c.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-blue-200 dark:border-blue-800 shadow-md",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[c.jsx("img",{src:n,alt:"Preview",className:"w-full max-h-64 object-contain"}),c.jsx(F.div,{className:"absolute inset-0 bg-black/50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:a?.5:0}}),c.jsx("button",{type:"button",onClick:k,className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors shadow-md",children:c.jsx(Qe,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center",children:c.jsx("span",{className:"bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded-md",children:f==="ml"?"ചിത്രം തിരിച്ചറിയുന്നതാണ്":"Image will be processed for analysis"})})]}),c.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[c.jsxs(F.button,{type:"button",onClick:()=>{var C;return(C=h.current)==null?void 0:C.click()},disabled:e,whileHover:{scale:e?1:1.02},whileTap:{scale:e?1:.98},className:D("flex items-center gap-1.5 px-4 py-2 rounded-lg transition-colors shadow-sm","bg-indigo-50 text-indigo-700 border border-indigo-200","dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800/30","hover:bg-indigo-100 dark:hover:bg-indigo-800/40","disabled:opacity-50 disabled:cursor-not-allowed",m&&"text-base"),children:[c.jsx(yi,{className:"w-5 h-5"}),n?f==="ml"?"ചിത്രം മാറ്റുക":"Change Image":f==="ml"?"ചിത്രം ചേർക്കുക":"Add Image",c.jsx("input",{type:"file",ref:h,onChange:v,accept:"image/*",className:"hidden",disabled:e})]}),c.jsxs(F.button,{type:"submit",disabled:e,className:D("flex items-center gap-2 px-6 py-2 rounded-lg font-medium transition-all shadow-md relative overflow-hidden","group",l?"bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600":"bg-blue-600 hover:bg-blue-700","text-white border border-transparent","dark:border-blue-700/50","disabled:opacity-50 disabled:cursor-not-allowed",m&&"text-base"),whileHover:{scale:e?1:1.02},whileTap:{scale:e?1:.98},children:[c.jsxs("span",{className:"absolute inset-0 w-full h-full",children:[c.jsx("span",{className:"absolute inset-[-2px] rounded-lg bg-gradient-to-r from-blue-400 via-indigo-400 to-purple-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),c.jsx("span",{className:"absolute inset-[-1px] rounded-lg bg-gradient-to-r from-blue-400 via-indigo-400 to-purple-400 animate-rotate-gradient opacity-0 group-hover:opacity-100"}),c.jsx("span",{className:"absolute inset-[1px] rounded-lg bg-blue-600 group-hover:bg-blue-700"})]}),c.jsx("span",{className:"relative z-10 flex items-center gap-2",children:e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:f==="ml"?"വിശകലനം ചെയ്യുന്നു...":"Analyzing..."})]}):c.jsxs(c.Fragment,{children:[l?c.jsx(Ot,{className:"w-5 h-5"}):c.jsx(ks,{className:"w-5 h-5"}),l?f==="ml"?"URL വിശകലനം ചെയ്യുക":"Analyze URL":Oe[f].analyzeButton]})})]})]})]})})})}const fs={BASE_URL:"http://localhost:8000",SUPABASE_URL:"https://cxjdkqkzmtyudkwwhelq.supabase.co",SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4amRrcWt6bXR5dWRrd3doZWxxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU4MDE1NzEsImV4cCI6MjA1MTM3NzU3MX0.GIuHV-ov2Zm-G09rOHuy1cIrvrzVaDg7CPQmH3UyrUE",ENDPOINTS:{REVERSE_SEARCH:"/api/reverse-searchy",WRITING_STYLE:"/api/writing-style",URL_ANALYSIS:"/api/url-analysis",AUTH:{LOGIN:"/auth/login",REGISTER:"/auth/register",LOGOUT:"/auth/logout"}}},Pe=[];for(let t=0;t<256;++t)Pe.push((t+256).toString(16).slice(1));function hk(t,e=0){return(Pe[t[e+0]]+Pe[t[e+1]]+Pe[t[e+2]]+Pe[t[e+3]]+"-"+Pe[t[e+4]]+Pe[t[e+5]]+"-"+Pe[t[e+6]]+Pe[t[e+7]]+"-"+Pe[t[e+8]]+Pe[t[e+9]]+"-"+Pe[t[e+10]]+Pe[t[e+11]]+Pe[t[e+12]]+Pe[t[e+13]]+Pe[t[e+14]]+Pe[t[e+15]]).toLowerCase()}let da;const uk=new Uint8Array(16);function fk(){if(!da){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");da=crypto.getRandomValues.bind(crypto)}return da(uk)}const mk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),md={randomUUID:mk};function gk(t,e,s){var n;if(md.randomUUID&&!e&&!t)return md.randomUUID();t=t||{};const r=t.random??((n=t.rng)==null?void 0:n.call(t))??fk();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,hk(r)}class Gr{static async saveAnalysis(e,s,r,n,i){try{if(!e||!s)throw new Error("Type and input are required");const a=i||gk(),o={id:a,type:e,input:s,result:r,user_id:n||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Saving analysis to Supabase:",{id:a,type:e,hasInput:!!s,hasResult:!!r,hasUserId:!!n,resultSummary:{hasVerdict:!!(r!=null&&r.verdict),hasExplanation:!!(r!=null&&r.explanation),hasScore:!!(r!=null&&r.score),hasDetails:!!(r!=null&&r.details)}});let{data:l,error:d}=await Ee.from("analysis_result").insert(o).select().single();if((d==null?void 0:d.code)==="23505"){const{data:h,error:u}=await Ee.from("analysis_result").update(o).eq("id",a).select().single();if(u)return console.error("Error updating analysis in Supabase:",u),{id:a};l=h}else if(d)return console.error("Error inserting analysis to Supabase:",d),{id:a};return console.log("Analysis saved successfully with ID:",l.id),l}catch(a){console.error("Exception saving analysis to Supabase:",a);const o=i||`local-${Date.now()}`;return console.log(`Using ID for analysis due to exception: ${o}`),{id:o}}}static async updateAnalysis(e,s,r){try{if(!e||e.startsWith("local-"))throw new Error("Valid analysis ID is required");const{data:n,error:i}=await Ee.from("analysis_result").update(s).eq("id",e).eq("user_id",r).select().single();return i?(console.error("Error updating analysis:",i),null):n}catch(n){return console.error("Exception updating analysis:",n),null}}static async getAnalysisByUserId(e,s=1,r=20){try{if(!e)return console.warn("No user ID provided to getAnalysisByUserId"),{data:[],count:0};const n=(s-1)*r,i=n+r-1,{count:a,error:o}=await Ee.from("analysis_result").select("*",{count:"exact",head:!0}).eq("user_id",e);if(o)return console.error("Error counting user analyses from Supabase:",o),{data:[],count:0};const{data:l,error:d}=await Ee.from("analysis_result").select("*").eq("user_id",e).order("created_at",{ascending:!1}).range(n,i);return d?(console.error("Error getting user analyses from Supabase:",d),{data:[],count:0}):{data:l.map(u=>({...u,result:u.result||{},input:u.input||{}})),count:a||0}}catch(n){return console.error("Exception getting user analyses from Supabase:",n),{data:[],count:0}}}static async getAnalysisById(e,s){try{if(e.startsWith("local-"))return null;const r=Ee.from("analysis_result").select("*").eq("id",e);s&&r.eq("user_id",s);const{data:n,error:i}=await r.single();return i?(console.error("Error getting analysis from Supabase:",i),null):{...n,result:n.result||{},input:n.input||{}}}catch(r){return console.error("Exception getting analysis from Supabase:",r),null}}static async deleteAnalysis(e,s){try{if(!e||e.startsWith("local-"))return!1;const{error:r}=await Ee.from("analysis_result").delete().eq("id",e).eq("user_id",s);return r?(console.error("Error deleting analysis:",r),!1):!0}catch(r){return console.error("Exception deleting analysis:",r),!1}}static async saveFeedback(e,s,r,n){try{console.log("SupabaseService.saveFeedback called with:",{analysisId:e,rating:s,hasComment:!!r,hasUserId:!!n});const a={analysis_result_id:e.startsWith("local-")?null:e,rating:s,comment:r,user_id:n,created_at:new Date().toISOString()};console.log("Inserting feedback data:",a);const{data:o,error:l}=await Ee.from("feedback").insert(a);return l?(console.error("Error saving feedback to Supabase:",l),{id:`local-feedback-${Date.now()}`}):o||{id:`saved-feedback-${Date.now()}`}}catch(i){return console.error("Exception saving feedback to Supabase:",i),{id:`local-feedback-${Date.now()}`}}}static async getFeedbackByAnalysisId(e){try{if(e.startsWith("local-"))return[];const{data:s,error:r}=await Ee.from("feedback").select("*").eq("analysis_result_id",e).order("created_at",{ascending:!1});return r?(console.error("Error getting feedback from Supabase:",r),[]):s||[]}catch(s){return console.error("Exception getting feedback from Supabase:",s),[]}}static async getTrendingNews(){try{const{data:e,error:s}=await Ee.from("analysis_result").select("*").order("created_at",{ascending:!1}).limit(100);if(s)return console.error("Error getting trending news from Supabase:",s),[];const r=new Map;return e.forEach(i=>{const a=(i.input.text||i.input.url||"").trim();if(!a)return;const o=a.toLowerCase().slice(0,50);if(r.has(o)){const l=r.get(o);l.count+=1,new Date(i.created_at)>new Date(l.date)&&(l.date=i.created_at,l.id=i.id),r.set(o,l)}else r.set(o,{id:i.id,title:a,count:1,reliability:i.result.ISFAKE>.5?"suspicious":"reliable",date:i.created_at,summary:i.result.EXPLANATION_EN||i.result.explanation})}),Array.from(r.values()).map(i=>({id:i.id,title:i.title,searchCount:i.count,reliability:i.reliability,date:i.date,summary:i.summary})).sort((i,a)=>a.searchCount-i.searchCount).slice(0,10)}catch(e){return console.error("Exception getting trending news from Supabase:",e),[]}}}var to={exports:{}};(function(t,e){var s=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Re<"u"&&Re,r=function(){function i(){this.fetch=!1,this.DOMException=s.DOMException}return i.prototype=s,new i}();(function(i){(function(a){var o=typeof i<"u"&&i||typeof self<"u"&&self||typeof Re<"u"&&Re||{},l={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function d(w){return w&&DataView.prototype.isPrototypeOf(w)}if(l.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(w){return w&&h.indexOf(Object.prototype.toString.call(w))>-1};function f(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function m(w){return typeof w!="string"&&(w=String(w)),w}function p(w){var A={next:function(){var R=w.shift();return{done:R===void 0,value:R}}};return l.iterable&&(A[Symbol.iterator]=function(){return A}),A}function g(w){this.map={},w instanceof g?w.forEach(function(A,R){this.append(R,A)},this):Array.isArray(w)?w.forEach(function(A){if(A.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+A.length);this.append(A[0],A[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(A){this.append(A,w[A])},this)}g.prototype.append=function(w,A){w=f(w),A=m(A);var R=this.map[w];this.map[w]=R?R+", "+A:A},g.prototype.delete=function(w){delete this.map[f(w)]},g.prototype.get=function(w){return w=f(w),this.has(w)?this.map[w]:null},g.prototype.has=function(w){return this.map.hasOwnProperty(f(w))},g.prototype.set=function(w,A){this.map[f(w)]=m(A)},g.prototype.forEach=function(w,A){for(var R in this.map)this.map.hasOwnProperty(R)&&w.call(A,this.map[R],R,this)},g.prototype.keys=function(){var w=[];return this.forEach(function(A,R){w.push(R)}),p(w)},g.prototype.values=function(){var w=[];return this.forEach(function(A){w.push(A)}),p(w)},g.prototype.entries=function(){var w=[];return this.forEach(function(A,R){w.push([R,A])}),p(w)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function v(w){return new Promise(function(A,R){w.onload=function(){A(w.result)},w.onerror=function(){R(w.error)}})}function k(w){var A=new FileReader,R=v(A);return A.readAsArrayBuffer(w),R}function S(w){var A=new FileReader,R=v(A),V=/charset=([A-Za-z0-9_-]+)/.exec(w.type),I=V?V[1]:"utf-8";return A.readAsText(w,I),R}function C(w){for(var A=new Uint8Array(w),R=new Array(A.length),V=0;V<A.length;V++)R[V]=String.fromCharCode(A[V]);return R.join("")}function T(w){if(w.slice)return w.slice(0);var A=new Uint8Array(w.byteLength);return A.set(new Uint8Array(w)),A.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:l.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:l.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():l.arrayBuffer&&l.blob&&d(w)?(this._bodyArrayBuffer=T(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||u(w))?this._bodyArrayBuffer=T(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var w=y(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=y(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(k);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=y(this);if(w)return w;if(this._bodyBlob)return S(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}var M=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function b(w){var A=w.toUpperCase();return M.indexOf(A)>-1?A:w}function x(w,A){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');A=A||{};var R=A.body;if(w instanceof x){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,A.headers||(this.headers=new g(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!R&&w._bodyInit!=null&&(R=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new g(A.headers)),this.method=b(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal||function(){if("AbortController"in o){var $=new AbortController;return $.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(R),(this.method==="GET"||this.method==="HEAD")&&(A.cache==="no-store"||A.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var I=/\?/;this.url+=(I.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})};function _(w){var A=new FormData;return w.trim().split("&").forEach(function(R){if(R){var V=R.split("="),I=V.shift().replace(/\+/g," "),$=V.join("=").replace(/\+/g," ");A.append(decodeURIComponent(I),decodeURIComponent($))}}),A}function E(w){var A=new g,R=w.replace(/\r?\n[\t ]+/g," ");return R.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var I=V.split(":"),$=I.shift().trim();if($){var z=I.join(":").trim();try{A.append($,z)}catch(G){console.warn("Response "+G.message)}}}),A}O.call(x.prototype);function N(w,A){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=A.statusText===void 0?"":""+A.statusText,this.headers=new g(A.headers),this.url=A.url||"",this._initBody(w)}O.call(N.prototype),N.prototype.clone=function(){return new N(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},N.error=function(){var w=new N(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var B=[301,302,303,307,308];N.redirect=function(w,A){if(B.indexOf(A)===-1)throw new RangeError("Invalid status code");return new N(null,{status:A,headers:{location:w}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function(A,R){this.message=A,this.name=R;var V=Error(A);this.stack=V.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function L(w,A){return new Promise(function(R,V){var I=new x(w,A);if(I.signal&&I.signal.aborted)return V(new a.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function z(){$.abort()}$.onload=function(){var X={statusText:$.statusText,headers:E($.getAllResponseHeaders()||"")};I.url.indexOf("file://")===0&&($.status<200||$.status>599)?X.status=200:X.status=$.status,X.url="responseURL"in $?$.responseURL:X.headers.get("X-Request-URL");var se="response"in $?$.response:$.responseText;setTimeout(function(){R(new N(se,X))},0)},$.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},$.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},$.onabort=function(){setTimeout(function(){V(new a.DOMException("Aborted","AbortError"))},0)};function G(X){try{return X===""&&o.location.href?o.location.href:X}catch{return X}}if($.open(I.method,G(I.url),!0),I.credentials==="include"?$.withCredentials=!0:I.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&(l.blob?$.responseType="blob":l.arrayBuffer&&($.responseType="arraybuffer")),A&&typeof A.headers=="object"&&!(A.headers instanceof g||o.Headers&&A.headers instanceof o.Headers)){var H=[];Object.getOwnPropertyNames(A.headers).forEach(function(X){H.push(f(X)),$.setRequestHeader(X,m(A.headers[X]))}),I.headers.forEach(function(X,se){H.indexOf(se)===-1&&$.setRequestHeader(se,X)})}else I.headers.forEach(function(X,se){$.setRequestHeader(se,X)});I.signal&&(I.signal.addEventListener("abort",z),$.onreadystatechange=function(){$.readyState===4&&I.signal.removeEventListener("abort",z)}),$.send(typeof I._bodyInit>"u"?null:I._bodyInit)})}return L.polyfill=!0,o.fetch||(o.fetch=L,o.Headers=g,o.Request=x,o.Response=N),a.Headers=g,a.Request=x,a.Response=N,a.fetch=L,a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var n=s.fetch?s:r;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e})(to,to.exports);var rm=to.exports;const pk=Dh(rm);var yk={},gd=typeof global<"u"&&global.fetch?global.fetch:pk,xk=typeof global<"u"&&global.Headers?global.Headers:rm.Headers,bk=class{extractContentsOptions(t){const{text:e,highlights:s,summary:r,subpages:n,subpageTarget:i,extras:a,livecrawl:o,livecrawlTimeout:l,...d}=t,h={};return e===void 0&&r===void 0&&s===void 0&&a===void 0&&(h.text=!0),e!==void 0&&(h.text=e),r!==void 0&&(h.summary=r),s!==void 0&&(h.highlights=s),n!==void 0&&(h.subpages=n),i!==void 0&&(h.subpageTarget=i),a!==void 0&&(h.extras=a),o!==void 0&&(h.livecrawl=o),l!==void 0&&(h.livecrawlTimeout=l),{contentsOptions:h,restOptions:d}}constructor(t,e="https://api.exa.ai"){if(this.baseURL=e,!t&&(t=yk.EXASEARCH_API_KEY,!t))throw new Error("API key must be provided as an argument or as an environment variable (EXASEARCH_API_KEY)");this.headers=new xk({"x-api-key":t,"Content-Type":"application/json","User-Agent":"exa-node 1.4.0"})}async request(t,e,s){const r=await gd(this.baseURL+t,{method:e,headers:this.headers,body:s?JSON.stringify(s):void 0});if(!r.ok){const n=(await r.json()).error;throw new Error(`Request failed with status ${r.status}. ${n}`)}return await r.json()}async search(t,e){return await this.request("/search","POST",{query:t,...e})}async searchAndContents(t,e){const{contentsOptions:s,restOptions:r}=e===void 0?{contentsOptions:{text:!0},restOptions:{}}:this.extractContentsOptions(e);return await this.request("/search","POST",{query:t,contents:s,...r})}async findSimilar(t,e){return await this.request("/findSimilar","POST",{url:t,...e})}async findSimilarAndContents(t,e){const{contentsOptions:s,restOptions:r}=e===void 0?{contentsOptions:{text:!0},restOptions:{}}:this.extractContentsOptions(e);return await this.request("/findSimilar","POST",{url:t,contents:s,...r})}async getContents(t,e){if(!t||Array.isArray(t)&&t.length===0)throw new Error("Must provide at least one URL");let s;typeof t=="string"?s=[t]:typeof t[0]=="string"?s=t:s=t.map(n=>n.url);const r={urls:s,...e};return await this.request("/contents","POST",r)}async answer(t,e){if(e!=null&&e.stream)throw new Error(`For streaming responses, please use streamAnswer() instead:

for await (const chunk of exa.streamAnswer(query)) {
  // Handle chunks
}`);const s={query:t,stream:!1,text:(e==null?void 0:e.text)??!1,model:(e==null?void 0:e.model)??"exa"};return await this.request("/answer","POST",s)}async*streamAnswer(t,e){var o;const s={query:t,text:(e==null?void 0:e.text)??!1,stream:!0,model:(e==null?void 0:e.model)??"exa"},r=await gd(this.baseURL+"/answer",{method:"POST",headers:this.headers,body:JSON.stringify(s)});if(!r.ok){const l=await r.text();throw new Error(`Request failed with status ${r.status}. ${l}`)}const n=(o=r.body)==null?void 0:o.getReader();if(!n)throw new Error("No response body available for streaming.");const i=new TextDecoder;let a="";try{for(;;){const{done:l,value:d}=await n.read();if(l)break;a+=i.decode(d,{stream:!0});const h=a.split(`
`);a=h.pop()||"";for(const u of h){if(!u.startsWith("data: "))continue;const f=u.replace(/^data:\s*/,"").trim();if(!f||f==="[DONE]")continue;let m;try{m=JSON.parse(f)}catch{continue}const p=this.processChunk(m);(p.content||p.citations)&&(yield p)}}if(a.startsWith("data: ")){const l=a.replace(/^data:\s*/,"").trim();if(l&&l!=="[DONE]")try{const d=JSON.parse(l),h=this.processChunk(d);(h.content||h.citations)&&(yield h)}catch{}}}finally{n.releaseLock()}}processChunk(t){let e,s;return t.choices&&t.choices[0]&&t.choices[0].delta&&(e=t.choices[0].delta.content),t.citations&&t.citations!=="null"&&(s=t.citations.map(r=>({id:r.id,url:r.url,title:r.title,publishedDate:r.publishedDate,author:r.author,text:r.text}))),{content:e,citations:s}}},vk=bk;const wk="f719f358-7ec7-4098-9c0f-07698598b95e",_k=new vk(wk),kk={async extractUrlContent(t){var e;try{console.log("Attempting to extract content from URL:",t);try{new URL(t)}catch(s){throw console.error("Invalid URL format:",s),new Error("Invalid URL format: Please make sure your URL includes http:// or https://")}try{const s=await _k.getContents([t],{text:!0});if(console.log("Exa API response:",s),s!=null&&s.results&&s.results.length>0){const r=s.results[0];if(console.log("Extracted content:",{hasText:!!r.text,textLength:(e=r.text)==null?void 0:e.length,hasImage:!!r.image,hasTitle:!!r.title,hasAuthor:!!r.author,hasFavicon:!!r.favicon}),r.text&&r.text.trim().length>0)return{text:r.text,image:r.image||void 0,title:r.title||void 0,url:r.url||t,publishedDate:r.publishedDate||void 0,author:r.author||void 0,favicon:r.favicon||void 0};if(r.title)return{text:r.title,image:r.image||void 0,title:r.title,url:r.url||t,publishedDate:r.publishedDate||void 0,author:r.author||void 0,favicon:r.favicon||void 0}}}catch(s){throw console.error("Exa API error:",s),new Error("Request failed with status 400. Sorry, we had trouble finding contents for the given URL.")}try{const n=(await(await fetch(t)).text()).replace(/<script\b[^<](?:(?!<\/script>)<[^<])*<\/script>/gi,"").replace(/<style\b[^<](?:(?!<\/style>)<[^<])*<\/style>/gi,"").replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim();if(n.length>0)return{text:n.substring(0,1e3),url:t}}catch(s){console.error("Fallback content fetch failed:",s)}throw console.error("No content could be extracted from URL:",t),new Error("No content could be extracted from URL")}catch(s){throw console.error("Error extracting content from URL:",s),s}}},xs=class xs{constructor(){ie(this,"controller");ie(this,"keepAliveInterval",0);this.controller=new AbortController}static getInstance(){return xs.instance||(xs.instance=new xs),xs.instance}async fetch(e,s={}){const r={...s,signal:this.controller.signal,keepalive:!0,headers:{...s.headers,Connection:"keep-alive","Keep-Alive":"timeout=120"}};try{console.log(`Attempting to fetch from URL: ${e}`);const n=await fetch(e,r);if(!n.ok)throw new Error(`Request failed: ${n.statusText}`);return n}catch(n){throw console.error("Fetch error:",n),n}}async pingServer(){try{await this.fetch(`${fs.BASE_URL}/`)}catch(e){console.warn("Keep-alive ping failed:",e)}}cleanup(){this.controller.abort(),this.keepAliveInterval&&window.clearInterval(this.keepAliveInterval)}};ie(xs,"instance");let so=xs;const Vn=so.getInstance(),ha=async(t,e,s,r)=>{console.log("saveAnalysisToSupabase called with userId:",r);try{return await Gr.saveAnalysis(t,e,s,r)}catch(n){return console.error("Error in saveAnalysisToSupabase:",n),{id:`local-${Date.now()}`}}},ys={async analyzeContent(t,e){try{if(Nk(t))return await this.analyzeUrl(t,e);const n=await(await Vn.fetch(`${fs.BASE_URL}${fs.ENDPOINTS.REVERSE_SEARCH}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})).json();try{const i=await ha("text",{text:t},n,e);return{...n,id:i.id,type:"text"}}catch(i){return console.error("Error saving text analysis:",i),{...n,id:`local-${Date.now()}`,type:"text"}}}catch(s){return console.error("Error during content analysis:",s),{...jk(t),id:`local-${Date.now()}`,type:"text"}}},async analyzeImage(t,e,s){try{let r;t.startsWith("data:")&&(r=Sk(t));const n=new FormData;n.append("image",r||t),e&&n.append("text",e);const i=await fetch("https://settling-presently-giraffe.ngrok-free.app/analyze",{method:"POST",body:n,mode:"cors"});if(!i.ok)throw new Error(`Image analysis failed with status: ${i.status}`);const a=await i.json();try{const o=await ha(e?"text_image":"image",{image_url:"image_processed",text:e},a,s);return{...a,id:o.id,type:e?"text_image":"image"}}catch(o){return console.error("Error saving image analysis:",o),{...a,id:`local-${Date.now()}`,type:e?"text_image":"image"}}}catch(r){throw console.error("Error during image analysis:",r),r}},async analyzeUrl(t,e){try{console.log("Analyzing URL using Exa API:",t);let s=null;try{const o=await Vn.fetch(`${fs.BASE_URL}/api/analyze-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})});o.ok&&(s=await o.json(),console.log("URL analysis data:",s))}catch(o){console.error("Error fetching URL analysis data:",o)}const r=await kk.extractUrlContent(t);let n=null;if(r.image)try{console.log("Sending extracted image to ngrok API for analysis:",r.image);const o=new FormData;if(r.image.startsWith("http"))o.append("url",r.image);else{const h=await(await fetch(r.image)).blob(),u=new File([h],"image.jpg",{type:"image/jpeg"});o.append("image",u)}r.text&&r.title&&o.append("text",r.title);const l=await fetch("https://settling-presently-giraffe.ngrok-free.app/analyze",{method:"POST",body:o,mode:"cors"});l.ok&&(n=await l.json(),console.log("Image analysis result:",n))}catch(o){console.error("Error analyzing extracted image:",o)}let i={};try{console.log("Sending extracted text to reverse-search API");const o=r.publishedDate||new Date().toISOString(),l=await Vn.fetch(`${fs.BASE_URL}${fs.ENDPOINTS.REVERSE_SEARCH}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:r.text,timestamp:o})});l.ok&&(i=await l.json(),console.log("Text analysis result:",i))}catch(o){console.error("Error analyzing extracted text:",o)}const a={CONFIDENCE:i.CONFIDENCE!==void 0?i.CONFIDENCE:.85,EXPLANATION_EN:i.EXPLANATION_EN||`Content analyzed from ${t}. The extracted content appears to be ${r.text.length>200?"comprehensive":"limited"}.`,EXPLANATION_ML:i.EXPLANATION_ML||`${t} നു വിശകലനം ചെയ്ത ഉള്ളടക്കം. എക്സ്ട്രാക്ട് ചെയ്ത ഉള്ളടക്കം ${r.text.length>200?"വിശദമാണ്":"പരിമിതമാണ്"}.`,ISFAKE:i.ISFAKE!==void 0?i.ISFAKE:0,...i,input:{url:t,title:r.title,published_date:r.publishedDate,image_url:r.image},content:r.text,image:r.image,urlAnalysis:s,imageAnalysis:n};try{const o=await ha("url",{url:t,title:r.title,published_date:r.publishedDate},a,e);return{...a,id:o.id,type:"url"}}catch(o){return console.error("Error saving URL analysis:",o instanceof Error?o.message:String(o)),{...a,id:`local-${Date.now()}`,type:"url"}}}catch(s){console.error("Error during URL analysis:",s);const r=s instanceof Error?s.message:String(s);return{...{CONFIDENCE:.5,EXPLANATION_EN:`Invalid URL or URL cannot be accessed. Please check if the URL is correct and accessible. Error: ${r}`,EXPLANATION_ML:`അസാധുവായ URL അല്ലെങ്കിൽ URL ആക്സസ് ചെയ്യാൻ കഴിയില്ല. URL ശരിയാണോ ആക്സസ് ചെയ്യാൻ കഴിയുമോ എന്ന് പരിശോധിക്കുക. പിശക്: ${r}`,ISFAKE:1,input:{url:t},error:{type:"URL_ERROR",message:r}},id:`local-${Date.now()}`,type:"url"}}},async saveFeedback(t,e,s,r){console.log("analyzeService.saveFeedback called with:",{analysisId:t,rating:e,hasComment:!!s,hasUserId:!!r});try{return await Gr.saveFeedback(t,e,s,r)}catch(n){throw console.error("Error saving feedback:",n),n}},async searchReverseContent(t,e){try{const s=e?{content:t,timestamp:e}:{content:t},r=await fetch(`${fs.BASE_URL}/api/reverse-searchy`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!r.ok){const a=await r.json();throw new Error(a.detail||"Failed to perform reverse search")}const n=await r.json(),i="result"in n?n.result:n;return i.matches&&i.matches.length>0&&(i.matches=i.matches.map(a=>({...a,explanation_ml:a.explanation_ml||"വിശദീകരണം ലഭ്യമല്ല",explanation_en:a.explanation_en||"No explanation available"}))),i}catch(s){return console.error("Error performing reverse search:",s instanceof Error?s.message:String(s)),{matches:[]}}},async analyzeWritingStyle(t){try{console.log("Analyzing writing style for content length:",t.length);try{const e=await fetch("http://localhost:8000/api/writing-style",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:t})});if(!e.ok)throw new Error(`Writing style analysis failed with status: ${e.status}`);const s=await e.json();if(console.log("Writing style API response:",s),s&&typeof s=="object"){const r={sensationalism:typeof s.sensationalism=="number"?s.sensationalism:65,writingStyle:typeof s.writingStyle=="number"?s.writingStyle:75,clickbait:typeof s.clickbait=="number"?s.clickbait:45};return console.log("Using API writing style values:",r),r}else throw console.warn("API response does not contain expected data:",s),new Error("Invalid API response format")}catch(e){console.warn("Backend not available for writing style analysis, generating mock result:",e);const s=t.length,r=(t.match(/!/g)||[]).length,n=(t.match(/\?/g)||[]).length,i=(t.match(/[A-Z]{3,}/g)||[]).length,a=Math.min(80,20+r*10+n*5+i*15),o=Math.min(80,15+n*8+r*7),l=Math.min(90,50+(s>500?30:s/20)),d={sensationalism:a,writingStyle:l,clickbait:o};return console.log("Generated mock writing style result:",d),d}}catch(e){return console.error("Error during writing style analysis:",e),{sensationalism:50,writingStyle:50,clickbait:50}}}},jk=t=>{t.length;const e=(t.match(/!/g)||[]).length,s=(t.match(/\?/g)||[]).length,r=(t.match(/[A-Z]{3,}/g)||[]).length,i=e*.1+s*.05+r*.15>.5?1:0;return{CONFIDENCE:.6+Math.random()*.2,EXPLANATION_EN:i?"The content shows signs of sensationalism and may contain unreliable information.":"The content appears to be reliable based on initial analysis.",EXPLANATION_ML:i?"ഉള്ളടക്കത്തിൽ സെൻസേഷണലിസത്തിന്റെ ലക്ഷണങ്ങൾ കാണിക്കുന്നു, വിശ്വസനീയമല്ലാത്ത വിവരങ്ങൾ അടങ്ങിയിരിക്കാം.":"പ്രാഥമിക വിശകലനത്തിന്റെ അടിസ്ഥാനത്തിൽ ഉള്ളടക്കം വിശ്വസനീയമാണ്.",ISFAKE:i}},Sk=t=>{const e=t.split(","),s=e[0].match(/:(.*?);/)[1],r=atob(e[1]);let n=r.length;const i=new Uint8Array(n);for(;n--;)i[n]=r.charCodeAt(n);return new Blob([i],{type:s})},Nk=t=>{try{return new URL(t),!0}catch{return!1}};window.addEventListener("unload",()=>{Vn.cleanup()});const pd=({result:t,content:e,extractedFromImage:s=!1})=>{var m,p;const{language:r}=be(),n=Oe[r],[i,a]=j.useState(null),[o,l]=j.useState(!1),[d,h]=j.useState(!1),u=r==="ml";j.useEffect(()=>{(async()=>{if(s&&e&&e.length>10){h(!0);try{const y=await ys.searchReverseContent(e);y&&y.matches&&a(y.matches)}catch(y){console.error("Reverse search failed:",y)}finally{h(!1)}}})()},[e,s]);const f=()=>{if(d)return c.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm italic",children:r==="ml"?"തിരയുന്നു...":"Searching..."});if(!i||i.length===0)return c.jsx("p",{className:"text-green-600 dark:text-green-400 text-sm",children:r==="ml"?"സമാന വാചകങ്ങൾ കണ്ടെത്തിയില്ല":"No similar content found"});const g=o?i:i.slice(0,1);return c.jsxs("div",{className:"space-y-2",children:[g.map((y,v)=>c.jsx("div",{className:D("break-all",u?"text-base":"text-sm"),children:c.jsxs("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:underline flex items-start",children:[c.jsx(Ot,{className:"w-3.5 h-3.5 mt-0.5 mr-1.5 flex-shrink-0"}),c.jsx("span",{children:y.title||y.url})]})},v)),i.length>1&&c.jsx("button",{onClick:()=>l(!o),className:D("flex items-center mt-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400","dark:hover:text-blue-300 transition-colors duration-200 rounded px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20",u?"text-base":"text-sm"),children:o?c.jsxs(c.Fragment,{children:[c.jsx(ja,{className:"w-3.5 h-3.5 mr-1"}),r==="ml"?"ചുരുക്കുക":"Show less"]}):c.jsxs(c.Fragment,{children:[c.jsx(Gn,{className:"w-3.5 h-3.5 mr-1"}),r==="ml"?`${i.length-1} കൂടുതൽ`:`Show ${i.length-1} more`]})})]})};return c.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-full mx-auto relative space-y-4",children:[c.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"absolute -right-4 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-600 hidden md:flex items-center",children:[c.jsx("span",{className:"text-sm mr-2",children:r==="ml"?"ചിത്ര വിശകലനം":"Image Analysis"}),c.jsx(go,{className:"w-4 h-4"})]}),c.jsx("div",{className:"absolute top-4 right-4 z-10",children:c.jsx("span",{className:D("px-3 py-1 rounded-full text-sm font-medium","bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200","border border-blue-200 dark:border-blue-800/30"),children:r==="ml"?"വാചക വിശകലനം":"Text Analysis"})}),c.jsxs(dt,{className:"relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 to-white/30 dark:from-gray-800/50 dark:to-gray-800/30"}),c.jsxs("div",{className:D("relative p-6 space-y-6",u&&"malayalam-text"),children:[c.jsx("div",{className:"flex items-center justify-center mb-6",children:t.ISFAKE===0?c.jsxs(F.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center text-green-500 dark:text-green-400",children:[c.jsx(Vr,{className:"w-8 h-8 mr-2"}),c.jsx("span",{className:D("text-xl font-semibold",u&&"text-2xl leading-relaxed"),children:n.reliable})]}):c.jsxs(F.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center text-red-500 dark:text-red-400",children:[c.jsx(xi,{className:"w-8 h-8 mr-2"}),c.jsx("span",{className:D("text-xl font-semibold",u&&"text-2xl leading-relaxed"),children:n.suspicious})]})}),s&&c.jsxs("div",{className:"mb-4 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-md",children:[c.jsxs("p",{className:D("text-blue-700 dark:text-blue-300 flex items-center",u&&"text-base"),children:[c.jsx(ks,{className:"w-4 h-4 mr-2"}),r==="ml"?"ചിത്രത്തിൽ നിന്ന് തിരിച്ചറിഞ്ഞ വാചകം":"Text extracted from image"]}),e&&c.jsx("p",{className:D("mt-2 text-gray-700 dark:text-gray-300 border-l-2 border-blue-300 pl-3",u&&"text-base leading-relaxed"),children:e})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:D("text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100 flex items-center",u&&"text-xl leading-relaxed"),children:[t.ISFAKE===0?c.jsx(po,{className:"w-5 h-5 mr-2 text-green-500 dark:text-green-400"}):c.jsx(en,{className:"w-5 h-5 mr-2 text-red-500 dark:text-red-400"}),n.analysisTitle]}),c.jsx("p",{className:D("text-gray-600 dark:text-gray-300 mb-3",u&&"text-lg leading-loose"),children:u?t.EXPLANATION_ML:t.EXPLANATION_EN}),((m=i==null?void 0:i[0])==null?void 0:m.explanation_ml)&&((p=i==null?void 0:i[0])==null?void 0:p.explanation_en)&&c.jsxs("div",{className:"mt-4 space-y-3 border-t border-gray-200 dark:border-gray-700 pt-4",children:[c.jsx("p",{className:D("text-gray-600 dark:text-gray-300","text-lg leading-loose"),children:i[0].explanation_ml}),c.jsx("p",{className:D("text-gray-600 dark:text-gray-300","text-sm leading-relaxed"),children:i[0].explanation_en})]})]}),i&&i.length>0&&c.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[c.jsxs("h3",{className:D("text-lg font-semibold mb-4 text-gray-800 dark:text-gray-100 flex items-center",u&&"text-xl leading-relaxed"),children:[c.jsx(Kn,{className:"w-5 h-5 mr-2"}),r==="ml"?"വാചക തിരയൽ ഫലങ്ങൾ":"Text Search Results"]}),f()]})]})]})]})},yd=({result:t,imageUrl:e,extractedText:s})=>{var v;const{language:r}=be(),n=r==="ml",[i,a]=j.useState(!1),[o,l]=j.useState(!1),d=Math.min(100,Math.max(0,Math.round(t.score))),h=t.verdict.toLowerCase()==="real"||t.verdict.toLowerCase()==="authentic"||t.verdict.toLowerCase()==="genuine",u=()=>r==="ml"?h?"വിശ്വസനീയം":"സംശയാസ്പദം":h?"Authentic":"Manipulated",f=()=>{const k=t.details.reverse_search.matches||[];if(!k.length)return c.jsx("span",{className:D("text-green-600 dark:text-green-400",n?"text-base":"text-sm"),children:r==="ml"?"ഇന്റർനെറ്റിൽ കണ്ടെത്തിയില്ല":"No online matches found"});const S=i?k:k.slice(0,1);return c.jsxs("div",{className:"space-y-2",children:[S.map((C,T)=>c.jsx("div",{className:D("break-all",n?"text-base":"text-sm"),children:c.jsxs("a",{href:C.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:underline flex items-start",children:[c.jsx(Ot,{className:"w-3.5 h-3.5 mt-0.5 mr-1.5 flex-shrink-0"}),c.jsx("span",{children:C.title||C.url})]})},T)),k.length>1&&c.jsx("button",{onClick:()=>a(!i),className:D("flex items-center mt-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400","dark:hover:text-blue-300 transition-colors duration-200 rounded px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20",n?"text-base":"text-sm"),children:i?c.jsxs(c.Fragment,{children:[c.jsx(ja,{className:"w-3.5 h-3.5 mr-1"}),r==="ml"?"ചുരുക്കുക":"Show less"]}):c.jsxs(c.Fragment,{children:[c.jsx(Gn,{className:"w-3.5 h-3.5 mr-1"}),r==="ml"?`${k.length-1} കൂടുതൽ`:`Show ${k.length-1} more`]})})]})},m=()=>{const k=t.details.text_analysis;if(!k||!k.reverse_search)return null;const C=k.reverse_search.matches||[];if(!C.length)return c.jsx("span",{className:D("text-green-600 dark:text-green-400",n?"text-base":"text-sm"),children:r==="ml"?"വാചകത്തിന് സമാനങ്ങൾ കണ്ടെത്തിയില്ല":"No matches found for text"});const T=o?C:C.slice(0,1);return c.jsxs("div",{className:"space-y-2",children:[T.map((O,M)=>c.jsx("div",{className:D("break-all",n?"text-base":"text-sm"),children:c.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:underline flex items-start",children:[c.jsx(Ot,{className:"w-3.5 h-3.5 mt-0.5 mr-1.5 flex-shrink-0"}),c.jsx("span",{children:O.title||O.url})]})},M)),C.length>1&&c.jsx("button",{onClick:()=>l(!o),className:D("flex items-center mt-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400","dark:hover:text-blue-300 transition-colors duration-200 rounded px-2 py-0.5 hover:bg-blue-50 dark:hover:bg-blue-900/20",n?"text-base":"text-sm"),children:o?c.jsxs(c.Fragment,{children:[c.jsx(ja,{className:"w-3.5 h-3.5 mr-1"}),r==="ml"?"ചുരുക്കുക":"Show less"]}):c.jsxs(c.Fragment,{children:[c.jsx(Gn,{className:"w-3.5 h-3.5 mr-1"}),r==="ml"?`${C.length-1} കൂടുതൽ`:`Show ${C.length-1} more`]})})]})},p=()=>{const k=t.details.text_analysis;if(!k&&s&&s.length>10)return c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-md",children:[c.jsxs("p",{className:D("text-blue-700 dark:text-blue-300",n&&"text-base"),children:[r==="ml"?"ചിത്രത്തിൽ നിന്ന് തിരിച്ചറിഞ്ഞ വാചകം":"Text detected from image",":"]}),c.jsx("p",{className:D("mt-2 text-gray-700 dark:text-gray-300 border-l-2 border-blue-300 pl-3",n&&"text-base leading-relaxed"),children:s})]})});if(!k)return null;const S=Math.round(k.context_similarity*100),C=!!k.user_text,T=!!k.extracted_text;return c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden",children:c.jsx("div",{className:D("h-2.5 rounded-full transition-all duration-500",S>=70?"bg-green-500":S>=40?"bg-yellow-500":"bg-red-500"),style:{width:`${S}%`}})}),c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{className:D(n?"text-base":"text-sm"),children:[r==="ml"?"കോൺടെക്സ്റ്റ് സാമ്യത":"Context Similarity",": ",S,"%"]}),c.jsxs("span",{className:D(k.context_mismatch?"text-red-500":"text-green-500","flex items-center",n?"text-base":"text-sm"),children:[k.context_mismatch?c.jsx(Qe,{className:"w-3.5 h-3.5 mr-1"}):c.jsx(Ge,{className:"w-3.5 h-3.5 mr-1"}),k.context_mismatch?r==="ml"?"പൊരുത്തക്കേട്":"Mismatch":r==="ml"?"പൊരുത്തം":"Match"]})]}),(C||T)&&c.jsxs("div",{className:"space-y-3 bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg backdrop-blur-sm",children:[C&&c.jsxs("div",{children:[c.jsxs("span",{className:D("font-medium",n&&"text-lg"),children:[r==="ml"?"നൽകിയ വാചകം":"Provided Text",":"]}),c.jsx("p",{className:D("text-gray-600 dark:text-gray-400 mt-1 border-l-2 border-blue-300 pl-3",n&&"text-base leading-relaxed"),children:k.user_text})]}),T&&c.jsxs("div",{children:[c.jsxs("span",{className:D("font-medium",n&&"text-lg"),children:[r==="ml"?"ചിത്രത്തിൽ നിന്നുള്ള വാചകം":"Text from Image",":"]}),c.jsx("p",{className:D("text-gray-600 dark:text-gray-400 mt-1 border-l-2 border-purple-300 pl-3",n&&"text-base leading-relaxed"),children:k.extracted_text})]})]})]})},g=k=>{try{const S=new Date(k);return new Intl.DateTimeFormat(r==="ml"?"ml-IN":"en-US",{year:"numeric",month:"short",day:"numeric"}).format(S)}catch{return k}},y=()=>{const k=t.details.date_analysis;if(!k)return null;const S=k.image_dates&&k.image_dates.length>0,C=k.text_dates&&k.text_dates.length>0;if(!S&&!C)return null;const T=Math.round(k.similarity*100);return c.jsxs("div",{className:"space-y-3",children:[S&&c.jsxs("div",{children:[c.jsxs("span",{className:D("font-medium",n?"text-base":"text-sm"),children:[r==="ml"?"ചിത്രത്തിലെ തീയതികൾ":"Dates from Image Metadata",":"]}),c.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:k.image_dates.map((O,M)=>c.jsx("span",{className:D("px-2 py-1 rounded-md text-xs","bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200"),children:g(O)},M))})]}),C&&c.jsxs("div",{children:[c.jsxs("span",{className:D("font-medium",n?"text-base":"text-sm"),children:[r==="ml"?"വാചകത്തിൽ നിന്നുള്ള തീയതികൾ":"Dates from Text",":"]}),c.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:k.text_dates.map((O,M)=>c.jsx("span",{className:D("px-2 py-1 rounded-md text-xs","bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200"),children:g(O)},M))})]}),S&&C&&c.jsxs("div",{className:"mt-3",children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:D("font-medium",n?"text-base":"text-sm"),children:r==="ml"?"തീയതി സാമ്യത":"Date Similarity"}),c.jsxs("span",{className:D(k.match?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400","font-medium",n?"text-base":"text-sm"),children:[T,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden",children:c.jsx("div",{className:D("h-2.5 rounded-full transition-all duration-500",k.match?"bg-green-500":"bg-amber-500"),style:{width:`${T}%`}})}),c.jsx("div",{className:"mt-2",children:c.jsxs("span",{className:D(k.match?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400","flex items-center",n?"text-sm":"text-xs"),children:[k.match?c.jsx(Ge,{className:"w-3.5 h-3.5 mr-1"}):c.jsx(Kt,{className:"w-3.5 h-3.5 mr-1"}),k.match?r==="ml"?"തീയതികൾ പൊരുത്തപ്പെടുന്നു":"Dates match":r==="ml"?"തീയതികൾ പൊരുത്തപ്പെടുന്നില്ല":"Date mismatch detected"]})})]})]})};return c.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-full mx-auto relative",children:[c.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"absolute -left-4 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-600 hidden md:flex items-center",children:[c.jsx(dg,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"text-sm",children:r==="ml"?"വാചക വിശകലനം":"Text Analysis"})]}),c.jsx("div",{className:"absolute top-4 right-4 z-10",children:c.jsx("span",{className:D("px-3 py-1 rounded-full text-sm font-medium","bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200","border border-purple-200 dark:border-purple-800/30"),children:r==="ml"?"ചിത്ര വിശകലനം":"Image Analysis"})}),c.jsxs(dt,{className:"relative overflow-hidden backdrop-blur-sm",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 to-white/30 dark:from-gray-800/50 dark:to-gray-800/30"}),c.jsxs("div",{className:D("relative p-6 space-y-6",n&&"malayalam-text"),children:[e&&c.jsx("div",{className:"mb-4",children:c.jsx("div",{className:"flex justify-center p-2 bg-gradient-to-r from-gray-100/80 to-gray-200/80 dark:from-gray-700/30 dark:to-gray-700/50 rounded-lg shadow-md",children:c.jsx("img",{src:e,alt:"Analyzed",className:"max-h-64 rounded-md object-contain"})})}),c.jsx("div",{className:"flex items-center justify-center mb-6",children:h?c.jsxs(F.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center text-green-500 dark:text-green-400",children:[c.jsx(Vr,{className:"w-8 h-8 mr-2"}),c.jsx("span",{className:D("text-xl font-semibold",n&&"text-2xl leading-relaxed"),children:u()})]}):c.jsxs(F.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center text-amber-500 dark:text-amber-400",children:[c.jsx(xi,{className:"w-8 h-8 mr-2"}),c.jsx("span",{className:D("text-xl font-semibold",n&&"text-2xl leading-relaxed"),children:u()})]})}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:D("font-medium",n?"text-base":"text-sm"),children:r==="ml"?"വിശ്വസനീയതാ സ്കോർ":"Reliability Score"}),c.jsxs("span",{className:D("font-medium",h?"text-green-600":"text-amber-600",n?"text-base":"text-sm"),children:[d,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden",children:c.jsx("div",{className:D("h-2.5 rounded-full transition-all duration-500",h?"bg-green-500":"bg-amber-500"),style:{width:`${d}%`}})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:D("text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100 flex items-center",n&&"text-xl leading-relaxed"),children:[c.jsx(yi,{className:"w-5 h-5 mr-2"}),r==="ml"?"ചിത്രത്തിന്റെ വിവരണം":"Image Description"]}),c.jsx("p",{className:D("text-gray-600 dark:text-gray-300",n&&"text-lg leading-loose"),children:t.details.image_caption||(r==="ml"?"വിവരണം ലഭ്യമല്ല":"No description available")})]}),t.details.date_analysis&&c.jsxs("div",{className:"mb-6 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg backdrop-blur-sm",children:[c.jsxs("h3",{className:D("text-lg font-semibold mb-3 text-gray-800 dark:text-gray-100 flex items-center",n&&"text-xl leading-relaxed"),children:[c.jsx(hg,{className:"w-5 h-5 mr-2"}),r==="ml"?"തീയതി വിശകലനം":"Date Analysis"]}),y()]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[c.jsxs("div",{className:D("p-4 rounded-lg",t.details.ai_generated?"bg-amber-50 dark:bg-amber-900/10 border border-amber-200":"bg-green-50 dark:bg-green-900/10 border border-green-200"),children:[c.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[c.jsx(ug,{className:"w-4 h-4 mr-2"}),r==="ml"?"AI നിർമ്മിതം":"AI Generated"]}),c.jsx("p",{className:"flex items-center text-sm",children:t.details.ai_generated?c.jsxs(c.Fragment,{children:[c.jsx(Kt,{className:"w-4 h-4 mr-1.5 text-amber-500"}),c.jsx("span",{className:D("text-amber-700 dark:text-amber-400",n&&"text-base"),children:r==="ml"?"AI സൃഷ്ടിച്ച ചിത്രം":"AI generated image detected"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Ge,{className:"w-4 h-4 mr-1.5 text-green-500"}),c.jsx("span",{className:D("text-green-700 dark:text-green-400",n&&"text-base"),children:r==="ml"?"AI സൃഷ്ടിച്ച ചിത്രമല്ല":"No AI generation detected"})]})})]}),c.jsxs("div",{className:D("p-4 rounded-lg",t.details.deepfake?"bg-amber-50 dark:bg-amber-900/10 border border-amber-200":"bg-green-50 dark:bg-green-900/10 border border-green-200"),children:[c.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[c.jsx(fg,{className:"w-4 h-4 mr-2"}),r==="ml"?"ഡീപ്‌ഫേക്ക്":"Deepfake"]}),c.jsx("p",{className:"flex items-center text-sm",children:t.details.deepfake?c.jsxs(c.Fragment,{children:[c.jsx(Kt,{className:"w-4 h-4 mr-1.5 text-amber-500"}),c.jsx("span",{className:D("text-amber-700 dark:text-amber-400",n&&"text-base"),children:r==="ml"?"ഡീപ്‌ഫേക്ക് ചിത്രം":"Deepfake detected"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Ge,{className:"w-4 h-4 mr-1.5 text-green-500"}),c.jsx("span",{className:D("text-green-700 dark:text-green-400",n&&"text-base"),children:r==="ml"?"ഡീപ്‌ഫേക്കല്ല":"No deepfake detected"})]})})]}),c.jsxs("div",{className:D("p-4 rounded-lg",t.details.tampering_analysis?"bg-amber-50 dark:bg-amber-900/10 border border-amber-200":"bg-green-50 dark:bg-green-900/10 border border-green-200"),children:[c.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[c.jsx(mg,{className:"w-4 h-4 mr-2"}),r==="ml"?"കൃത്രിമ മാറ്റങ്ങൾ":"Image Tampering"]}),c.jsx("p",{className:"flex items-center text-sm",children:t.details.tampering_analysis?c.jsxs(c.Fragment,{children:[c.jsx(Kt,{className:"w-4 h-4 mr-1.5 text-amber-500"}),c.jsx("span",{className:D("text-amber-700 dark:text-amber-400",n&&"text-base"),children:r==="ml"?"കൃത്രിമ മാറ്റങ്ങൾ കണ്ടെത്തി":"Tampering detected"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Ge,{className:"w-4 h-4 mr-1.5 text-green-500"}),c.jsx("span",{className:D("text-green-700 dark:text-green-400",n&&"text-base"),children:r==="ml"?"കൃത്രിമ മാറ്റങ്ങൾ ഇല്ല":"No tampering detected"})]})})]}),c.jsxs("div",{className:D("p-4 rounded-lg",t.details.reverse_search.found?"bg-amber-50 dark:bg-amber-900/10 border border-amber-200":"bg-green-50 dark:bg-green-900/10 border border-green-200"),children:[c.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[c.jsx(Kn,{className:"w-4 h-4 mr-2"}),r==="ml"?"ഓൺലൈൻ തിരയൽ":"Online Search"]}),f()]})]}),(t.details.text_analysis||s&&s.length>10)&&c.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[c.jsxs("h3",{className:D("text-lg font-semibold mb-4 text-gray-800 dark:text-gray-100 flex items-center",n&&"text-xl leading-relaxed"),children:[c.jsx(ks,{className:"w-5 h-5 mr-2"}),r==="ml"?"വാചക വിശകലനം":"Text Analysis"]}),p(),((v=t.details.text_analysis)==null?void 0:v.reverse_search)&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("h4",{className:D("font-medium mb-3 flex items-center",n&&"text-lg"),children:[c.jsx(Kn,{className:"w-4 h-4 mr-2"}),r==="ml"?"വാചക തിരയൽ ഫലങ്ങൾ":"Text Search Results"]}),m()]})]})]})]})]})},Tk=({urlAnalysis:t,onNavigate:e,showNavigationHints:s=!0})=>{const{language:r}=be(),n=Oe[r];if(!t)return c.jsx(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-full mx-auto relative",children:c.jsx(dt,{className:"relative overflow-hidden backdrop-blur-sm",children:c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Ot,{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:r==="ml"?"URL പരിശോധന":"URL Analysis"})]}),c.jsx("span",{className:D("px-3 py-1 rounded-full text-sm font-medium","bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200","border border-blue-200 dark:border-blue-800/30"),children:r==="ml"?"URL വിശകലനം":"URL Analysis"})]}),c.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/10 rounded-lg border border-amber-200 dark:border-amber-800/30",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(Kt,{className:"w-5 h-5 mr-2 text-amber-600 dark:text-amber-400 mt-0.5"}),c.jsx("p",{className:"text-amber-700 dark:text-amber-300",children:r==="ml"?"URL വിശകലന വിവരങ്ങൾ ലഭ്യമല്ല":"URL analysis data is not available. Please try again."})]})})]})})});const i=t.trusted||t.is_trustworthy,a=t.trust_score||0,o=t.trust_reasons||[],l=t.final_decision||"",d=!t.google_safe_browsing_flag;return c.jsx(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-full mx-auto relative",children:c.jsx(dt,{className:"relative overflow-hidden backdrop-blur-sm",children:c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Ot,{className:"w-6 h-6 mr-2 text-blue-600 dark:text-blue-400"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:r==="ml"?"URL പരിശോധന":"URL Analysis"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[i?c.jsx(po,{className:"w-5 h-5 text-green-500"}):c.jsx(Kt,{className:"w-5 h-5 text-red-500"}),c.jsx("span",{className:D("px-3 py-1 rounded-full text-sm font-medium",i?"bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300"),children:i?n.reliable:n.suspicious})]})]}),c.jsx("div",{className:D("p-4 rounded-lg",i?"bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800/30":"bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800/30"),children:c.jsxs("div",{className:"flex items-start",children:[i?c.jsx(Vr,{className:"w-5 h-5 mr-3 text-green-600 dark:text-green-400 mt-0.5"}):c.jsx(xi,{className:"w-5 h-5 mr-3 text-red-600 dark:text-red-400 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:i?r==="ml"?"വിശ്വസനീയ URL":"Trusted URL":r==="ml"?"അവിശ്വസനീയ URL":"Untrusted URL"}),c.jsx("p",{className:D("text-sm mt-1",i?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"),children:l})]})]})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-medium mb-3 text-gray-800 dark:text-gray-100 flex items-center",children:[c.jsx(Yn,{className:"w-5 h-5 mr-2"}),r==="ml"?"വിശ്വസനീയത സ്കോർ":"Trust Score"]}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-1 h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:D("h-full rounded-full transition-all duration-500",a>=80?"bg-green-500":a>=50?"bg-yellow-500":"bg-red-500"),style:{width:`${a}%`}})}),c.jsxs("span",{className:"ml-3 font-semibold text-gray-700 dark:text-gray-300",children:[a,"%"]})]})})]}),o.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium mb-3 text-gray-800 dark:text-gray-100",children:r==="ml"?"വിശ്വസനീയതയുടെ കാരണങ്ങൾ":"Trust Reasons"}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg space-y-2",children:o.map((h,u)=>c.jsxs("div",{className:"flex items-start",children:[c.jsx(Vr,{className:"w-4 h-4 mr-2 text-green-600 dark:text-green-400 mt-1"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:h})]},u))})]}),c.jsxs("div",{className:D("p-4 rounded-lg",d?"bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800/30":"bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800/30"),children:[c.jsxs("h3",{className:"font-medium mb-2 flex items-center text-gray-900 dark:text-gray-100",children:[c.jsx(Yn,{className:"w-4 h-4 mr-2"}),r==="ml"?"Google സുരക്ഷിത ബ്രൗസിംഗ്":"Google Safe Browsing"]}),c.jsx("p",{className:D("text-sm",d?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"),children:d?r==="ml"?"ഈ URL ഉപയോഗിക്കാൻ സുരക്ഷിതമാണ്":"This URL is safe to use":r==="ml"?"ഈ URL-ൽ സുരക്ഷാ ഭീഷണികൾ കണ്ടെത്തി":"Security threats detected on this URL"})]}),c.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:c.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400 text-sm",children:[c.jsx(pi,{className:"w-4 h-4 mr-2"}),c.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline break-all",children:t.url})]})})]})})})},Ak=({textAnalysis:t,imageAnalysis:e,urlAnalysis:s,extractedTextFromImage:r})=>{const{language:n}=be(),i=Oe[n],a=n==="ml";if(!t&&!e&&!s)return null;const o=!!s,l=!!t,d=!!e,h=!!r,f=(()=>{let p=0,g=0;if(t&&(g+=(t.ISFAKE===1?1:0)*.4,p+=.4),e){const v=e.verdict.toLowerCase().includes("fake")||e.score<.5||e.details.ai_generated||e.details.deepfake;g+=(v?1:0)*.3,p+=.3}if(s){const v=!s.is_trustworthy||s.trust_score<.5;g+=(v?1:0)*.3,p+=.3}return p===0?null:g/p>=.5?1:0})(),m=()=>c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o&&c.jsxs("div",{className:D("flex items-center gap-1 text-sm border px-2 py-1 rounded-md","text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600"),children:[c.jsx(pi,{className:"w-4 h-4"}),c.jsx("span",{children:"URL"})]}),l&&c.jsxs("div",{className:D("flex items-center gap-1 text-sm border px-2 py-1 rounded-md","text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600"),children:[c.jsx(ks,{className:"w-4 h-4"}),c.jsx("span",{children:n==="ml"?"വാചകം":"Text"})]}),d&&c.jsxs("div",{className:D("flex items-center gap-1 text-sm border px-2 py-1 rounded-md","text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600"),children:[c.jsx(yi,{className:"w-4 h-4"}),c.jsx("span",{children:n==="ml"?"ചിത്രം":"Image"})]})]});return f===null?null:c.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-4xl mx-auto relative space-y-4",children:[c.jsx("div",{className:"absolute top-4 right-4 z-10",children:c.jsx("span",{className:D("px-3 py-1 rounded-full text-sm font-medium","bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-200","border border-purple-200 dark:border-purple-800/30"),children:n==="ml"?"സമഗ്ര വിശകലനം":"Comprehensive Analysis"})}),c.jsxs(dt,{className:"relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 to-white/30 dark:from-gray-800/50 dark:to-gray-800/30"}),c.jsxs("div",{className:D("relative p-6 space-y-6",a&&"malayalam-text"),children:[m(),c.jsx("div",{className:"flex items-center justify-center mb-6",children:f===0?c.jsxs(F.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center text-green-500 dark:text-green-400",children:[c.jsx(Vr,{className:"w-8 h-8 mr-2"}),c.jsx("span",{className:D("text-xl font-semibold",a&&"text-2xl leading-relaxed"),children:i.reliable})]}):c.jsxs(F.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center text-red-500 dark:text-red-400",children:[c.jsx(xi,{className:"w-8 h-8 mr-2"}),c.jsx("span",{className:D("text-xl font-semibold",a&&"text-2xl leading-relaxed"),children:i.suspicious})]})}),h&&c.jsxs("div",{className:"mb-4 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-md",children:[c.jsxs("p",{className:D("text-blue-700 dark:text-blue-300 flex items-center",a&&"text-base"),children:[c.jsx(ks,{className:"w-4 h-4 mr-2"}),n==="ml"?"ചിത്രത്തിൽ നിന്ന് തിരിച്ചറിഞ്ഞ വാചകം":"Text extracted from image"]}),c.jsx("p",{className:D("mt-2 text-gray-700 dark:text-gray-300 border-l-2 border-blue-300 pl-3",a&&"text-base leading-relaxed"),children:r})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:D("text-lg font-semibold mb-4 text-gray-800 dark:text-gray-100 flex items-center",a&&"text-xl leading-relaxed"),children:[f===0?c.jsx(po,{className:"w-5 h-5 mr-2 text-green-500 dark:text-green-400"}):c.jsx(en,{className:"w-5 h-5 mr-2 text-red-500 dark:text-red-400"}),n==="ml"?"സമഗ്ര വിശകലന സംഗ്രഹം":"Comprehensive Analysis Summary"]}),c.jsxs("div",{className:"space-y-4",children:[t&&c.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[c.jsx("div",{className:"flex-shrink-0 w-2 h-2 mt-2 rounded-full bg-blue-500"}),c.jsx("p",{className:D("text-gray-600 dark:text-gray-300",a&&"text-lg leading-loose"),children:a?t.EXPLANATION_ML:t.EXPLANATION_EN})]}),e&&c.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[c.jsx("div",{className:"flex-shrink-0 w-2 h-2 mt-2 rounded-full bg-purple-500"}),c.jsx("p",{className:D("text-gray-600 dark:text-gray-300",a&&"text-lg leading-loose"),children:a?`ചിത്രം ${e.verdict.toLowerCase().includes("fake")?"വ്യാജമാണ്":"യഥാർത്ഥമാണ്"}. ${e.details.ai_generated?"AI ഉപയോഗിച്ച് നിർമ്മിച്ചതാണ്. ":""}${e.details.deepfake?"ഡീപ്ഫേക്ക് സാങ്കേതികവിദ്യ ഉപയോഗിച്ചിട്ടുണ്ട്. ":""}`:`The image appears to be ${e.verdict}. ${e.details.ai_generated?"It was generated using AI. ":""}${e.details.deepfake?"Deepfake technology was detected. ":""}`})]}),s&&c.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[c.jsx("div",{className:"flex-shrink-0 w-2 h-2 mt-2 rounded-full bg-green-500"}),c.jsx("p",{className:D("text-gray-600 dark:text-gray-300",a&&"text-lg leading-loose"),children:a?`URL ${s.is_trustworthy?"വിശ്വസനീയമാണ്":"വിശ്വസനീയമല്ല"}. ${s.trust_reasons.join(". ")}`:`The URL is ${s.is_trustworthy?"trustworthy":"not trustworthy"}. ${s.trust_reasons.join(". ")}`})]})]})]}),c.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[c.jsxs("h3",{className:D("text-lg font-semibold mb-4 text-gray-800 dark:text-gray-100 flex items-center",a&&"text-xl leading-relaxed"),children:[c.jsx(Fh,{className:"w-5 h-5 mr-2"}),n==="ml"?"വിശകലന വിശദാംശങ്ങൾ":"Analysis Breakdown"]}),c.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t&&c.jsxs("div",{className:D("flex items-center justify-between p-3 rounded-lg transition-colors",t.ISFAKE===0?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"),children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:D("w-2 h-2 rounded-full",t.ISFAKE===0?"bg-green-500":"bg-red-500")}),c.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:n==="ml"?"വാചക വിശകലനം":"Text Analysis"})]}),c.jsx("div",{className:"flex items-center",children:c.jsx("span",{className:D("font-medium mr-2",t.ISFAKE===0?"text-green-500":"text-red-500"),children:t.ISFAKE===0?i.reliable:i.suspicious})})]}),e&&c.jsxs("div",{className:D("flex items-center justify-between p-3 rounded-lg transition-colors",e.verdict.toLowerCase().includes("fake")?"bg-red-50 dark:bg-red-900/20":"bg-green-50 dark:bg-green-900/20"),children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:D("w-2 h-2 rounded-full",e.verdict.toLowerCase().includes("fake")?"bg-red-500":"bg-green-500")}),c.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:n==="ml"?"ചിത്ര വിശകലനം":"Image Analysis"})]}),c.jsx("div",{className:"flex items-center",children:c.jsx("span",{className:D("font-medium mr-2",e.verdict.toLowerCase().includes("fake")?"text-red-500":"text-green-500"),children:e.verdict.toLowerCase().includes("fake")?i.suspicious:i.reliable})})]}),s&&c.jsxs("div",{className:D("flex items-center justify-between p-3 rounded-lg transition-colors",s.is_trustworthy?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"),children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:D("w-2 h-2 rounded-full",s.is_trustworthy?"bg-green-500":"bg-red-500")}),c.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:n==="ml"?"URL വിശകലനം":"URL Analysis"})]}),c.jsx("div",{className:"flex items-center",children:c.jsx("span",{className:D("font-medium mr-2",s.is_trustworthy?"text-green-500":"text-red-500"),children:s.is_trustworthy?i.reliable:i.suspicious})})]})]})]})]})]})]})};function xd({onFeedback:t,analysisId:e}){const[s,r]=j.useState(!1),[n,i]=j.useState(""),[a,o]=j.useState(!1),[l,d]=j.useState(!1),[h,u]=j.useState(null),{language:f}=be(),{user:m}=ss(),p=f==="ml",g=k=>{u(k),r(!0)},y=async(k=!1)=>{if(!(a||l||h===null)){o(!0);try{console.log("FeedbackSection handleFeedback called with:",{analysisId:e,rating:h,hasComment:!!n,hasUserId:!!(m!=null&&m.id)}),e&&(m!=null&&m.id)?await ys.saveFeedback(e,h,n,m.id):await t(h,n),r(!1),i(""),d(!0)}catch(S){console.error("Error submitting feedback:",S)}finally{o(!1)}}},v=()=>{y(!0)};return l?c.jsx("div",{className:"mt-6 flex flex-col items-center space-y-4",children:c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},className:D("text-green-600 dark:text-green-400 font-medium",p&&"text-base"),children:f==="ml"?"നന്ദി! നിങ്ങളുടെ പ്രതികരണം സ്വീകരിച്ചു.":"Thank you! Your feedback has been received."})}):c.jsxs("div",{className:"mt-6 flex flex-col items-center space-y-4",children:[c.jsx("p",{className:D("text-gray-700 dark:text-gray-400",p&&"text-base"),children:f==="ml"?"ഈ വിശകലനം സഹായകരമായിരുന്നോ?":"Was this analysis helpful?"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g(1),disabled:a,className:D("flex items-center gap-2 px-4 py-2 rounded-lg transition-colors","bg-green-50 text-green-700 border border-green-200","dark:bg-green-900/30 dark:text-green-300 dark:border-green-800/30","hover:bg-green-100 dark:hover:bg-green-800/40","disabled:opacity-50 disabled:cursor-not-allowed",p&&"text-base",h===1&&"ring-2 ring-green-500 dark:ring-green-400"),children:[c.jsx(Bh,{className:"w-5 h-5"}),f==="ml"?"അതെ":"Yes"]}),c.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g(0),disabled:a,className:D("flex items-center gap-2 px-4 py-2 rounded-lg transition-colors","bg-red-50 text-red-700 border border-red-200","dark:bg-red-900/30 dark:text-red-300 dark:border-red-800/30","hover:bg-red-100 dark:hover:bg-red-800/40","disabled:opacity-50 disabled:cursor-not-allowed",p&&"text-base",h===0&&"ring-2 ring-red-500 dark:ring-red-400"),children:[c.jsx($h,{className:"w-5 h-5"}),f==="ml"?"അല്ല":"No"]}),c.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(!s),className:D("flex items-center gap-2 px-4 py-2 rounded-lg transition-colors","bg-blue-50 text-blue-700 border border-blue-200","dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800/30","hover:bg-blue-100 dark:hover:bg-blue-800/40",p&&"text-base"),children:[c.jsx(gg,{className:"w-5 h-5"}),f==="ml"?"അഭിപ്രായം":"Comment"]})]}),s&&c.jsxs(F.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"w-full max-w-lg",children:[c.jsx("textarea",{value:n,onChange:k=>i(k.target.value),placeholder:f==="ml"?"നിങ്ങളുടെ അഭിപ്രായം ഇവിടെ രേഖപ്പെടുത്തുക...":"Write your feedback here...",className:D("w-full p-3 rounded-lg border resize-none","bg-white text-gray-900 dark:bg-gray-800 dark:text-white","border-gray-200 dark:border-gray-700","focus:ring-2 focus:ring-blue-500 focus:border-transparent","placeholder-gray-400 dark:placeholder-gray-500",p&&"text-base"),rows:4}),c.jsxs("div",{className:"flex justify-between mt-2",children:[c.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,disabled:a||h===null,className:D("px-4 py-2 rounded-lg font-medium","bg-gray-200 text-gray-700","hover:bg-gray-300","disabled:opacity-50 disabled:cursor-not-allowed",p&&"text-base"),children:f==="ml"?"അഭിപ്രായം ഒഴിവാക്കുക":"Skip Comment"}),c.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,disabled:a||h===null,className:D("px-4 py-2 rounded-lg font-medium","bg-blue-600 text-white","hover:bg-blue-700","disabled:opacity-50 disabled:cursor-not-allowed",p&&"text-base"),children:a?f==="ml"?"സമർപ്പിക്കുന്നു...":"Submitting...":f==="ml"?"സമർപ്പിക്കുക":"Submit"})]})]})]})}function Pk(){const{language:t}=be();return c.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center min-h-[300px] w-full",children:[c.jsx(F.div,{animate:{rotate:360,scale:[1,1.2,1]},transition:{rotate:{duration:1.5,repeat:1/0,ease:"linear"},scale:{duration:2,repeat:1/0,repeatType:"reverse"}},className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full"}),c.jsx(F.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-6 text-lg text-gray-600 dark:text-gray-300 font-medium",children:t==="ml"?"വിശകലനം ചെയ്യുന്നു...":"Analyzing..."}),c.jsx(F.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:t==="ml"?"ഇത കുറച്ച് സമയമെടുക്കും, ദയവായി കാത്തിരിക്കുക":"This may take a moment, please wait"})]})}function Ek({onSelectAnalysis:t}){const[e,s]=j.useState([]),[r,n]=j.useState(!0),[i,a]=j.useState(!1),[o,l]=j.useState(!1),[d,h]=j.useState(1),[u,f]=j.useState(!0),[m,p]=j.useState(0),g=20,{user:y}=ss(),{language:v}=be(),k=Oe[v];j.useEffect(()=>{(async()=>{if(y!=null&&y.id){n(!0);try{const{data:_,count:E}=await Gr.getAnalysisByUserId(y.id,1,g);s(_),p(E),f(_.length<E)}catch(_){console.error("Error fetching analysis history:",_)}finally{n(!1)}}})()},[y==null?void 0:y.id]);const S=async()=>{if(!(!(y!=null&&y.id)||i||!u)){a(!0);try{const x=d+1,{data:_,count:E}=await Gr.getAnalysisByUserId(y.id,x,g);_.length>0?(s(N=>[...N,..._]),h(x),f(e.length+_.length<E)):f(!1)}catch(x){console.error("Error loading more history:",x)}finally{a(!1)}}},C=x=>{const _=new Date(x);return new Intl.DateTimeFormat(v==="ml"?"ml-IN":"en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(_)},T=x=>{switch(x){case"text":return c.jsx(ks,{className:"h-4 w-4"});case"image":case"text_image":return c.jsx(yi,{className:"h-4 w-4"});case"url":return c.jsx(pi,{className:"h-4 w-4"});default:return c.jsx(ks,{className:"h-4 w-4"})}},O=x=>{var _,E;switch(x.type){case"text":return(_=x.input)!=null&&_.text?x.input.text.length>50?`${x.input.text.substring(0,50)}...`:x.input.text:"Text analysis";case"image":return"Image analysis";case"text_image":return"Image with text analysis";case"url":return((E=x.input)==null?void 0:E.url)||"URL analysis";default:return"Analysis"}},M=x=>x.result&&x.result.ISFAKE!==void 0?x.result.ISFAKE>.5?v==="ml"?"വ്യാജം":"Fake":v==="ml"?"യഥാർത്ഥം":"Real":"",b=x=>x?x.toLowerCase().includes("fake")||x.toLowerCase()==="വ്യാജം"?"text-red-500":x.toLowerCase().includes("real")||x.toLowerCase()==="യഥാർത്ഥം"?"text-green-500":"text-yellow-500":"text-gray-500";return y!=null&&y.id?c.jsx("div",{className:"mb-6",children:c.jsxs(F.div,{className:D("bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden transition-all duration-300",o?"max-h-[500px] overflow-y-auto":"max-h-12"),initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[c.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 cursor-pointer sticky top-0 z-10",onClick:()=>l(!o),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(pg,{className:"h-4 w-4 mr-2 text-blue-600 dark:text-blue-400"}),c.jsxs("h3",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:[k.analysisHistory||"Analysis History",m>0&&c.jsxs("span",{className:"ml-2 text-xs text-blue-500 dark:text-blue-400",children:["(",m,")"]})]})]}),c.jsx(F.div,{animate:{rotate:o?90:0},transition:{duration:.2},children:c.jsx(go,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})})]}),c.jsx(er,{children:o&&c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-3",children:r?c.jsx("div",{className:"flex justify-center py-4",children:c.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):e.length>0?c.jsxs(c.Fragment,{children:[c.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map(x=>c.jsx("li",{className:"py-2",children:c.jsx("button",{className:"w-full text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 p-2 rounded-md transition-colors duration-150",onClick:()=>{t(x),l(!1)},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:T(x.type)}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:O(x)}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:C(x.created_at)})]})]}),c.jsx("span",{className:D("text-xs font-medium",b(M(x))),children:M(x)})]})})},x.id))}),u&&c.jsx("div",{className:"mt-4 flex justify-center",children:c.jsx("button",{onClick:S,disabled:i,className:D("flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors duration-150","text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20","hover:bg-blue-100 dark:hover:bg-blue-800/30","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",i&&"opacity-70 cursor-not-allowed"),children:i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),v==="ml"?"ലോഡിംഗ്...":"Loading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Gn,{className:"h-4 w-4 mr-1"}),v==="ml"?"കൂടുതൽ കാണിക്കുക":"Load More"]})})})]}):c.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:k.noAnalysisHistory||"No analysis history found"})})})]})}):null}const Ck={async submitFeedback(t){try{console.log("Submitting feedback:",{rating:t.rating,hasComment:!!t.comment,hasUserId:!!t.user_id,hasAnalysisResultId:!!t.analysis_result_id});const e={rating:t.rating,comment:t.comment||t.feedback_text,user_id:t.user_id,analysis_result_id:t.analysis_result_id||t.analysis_id,created_at:new Date().toISOString()},{error:s}=await Ee.from("feedback").insert([e]);if(s)throw console.error("Supabase error when submitting feedback:",s),s;return!0}catch(e){throw console.error("Exception when submitting feedback:",e),e}},async getFeedback(){try{const{data:t,error:e}=await Ee.from("feedback").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error fetching feedback:",e),e;return t}catch(t){throw console.error("Error fetching feedback:",t),t}}},Rk=({errorMessage:t,url:e,onRetry:s})=>{const{language:r}=be();return c.jsx(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-full mx-auto relative",children:c.jsx(dt,{className:"relative overflow-hidden backdrop-blur-sm border-2 border-red-300 dark:border-red-900/50",children:c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Ot,{className:"w-6 h-6 mr-2 text-red-600 dark:text-red-400"}),c.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:r==="ml"?"URL പിശക്":"URL Error"})]}),c.jsx("div",{className:"flex items-center",children:c.jsx("span",{className:D("px-3 py-1 rounded-full text-sm font-medium","bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300"),children:r==="ml"?"അസാധുവായ URL":"Invalid URL"})})]}),c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-200 dark:border-red-800/30",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(Kt,{className:"w-5 h-5 mr-3 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:r==="ml"?"URL വിശകലനം പരാജയപ്പെട്ടു":"URL Analysis Failed"}),c.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm",children:t})]})]})}),c.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/10 rounded-lg border border-amber-200 dark:border-amber-800/30",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(Ot,{className:"w-5 h-5 mr-3 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:r==="ml"?"അസാധുവായ URL":"Problem URL"}),c.jsx("p",{className:"text-amber-700 dark:text-amber-300 text-sm break-all",children:e})]})]})}),c.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/10 rounded-lg border border-blue-200 dark:border-blue-800/30",children:c.jsx("div",{className:"flex items-start",children:c.jsxs("div",{className:"w-full",children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2 flex items-center",children:r==="ml"?"നിർദ്ദേശങ്ങൾ":"Suggestions"}),c.jsxs("ul",{className:"text-blue-700 dark:text-blue-300 text-sm space-y-2",children:[c.jsxs("li",{className:"flex items-start",children:[c.jsx("span",{className:"mr-2",children:"•"}),c.jsx("span",{children:r==="ml"?'URL-ൽ "https://" എന്നത് ഉൾപ്പെടുത്തിയിട്ടുണ്ടെന്ന് ഉറപ്പാക്കുക':'Make sure the URL includes "https://"'})]}),c.jsxs("li",{className:"flex items-start",children:[c.jsx("span",{className:"mr-2",children:"•"}),c.jsx("span",{children:r==="ml"?"ടൈപ്പിംഗ് പിശകുകൾ പരിശോധിക്കുക":"Check for any typing errors"})]}),c.jsxs("li",{className:"flex items-start",children:[c.jsx("span",{className:"mr-2",children:"•"}),c.jsx("span",{children:r==="ml"?"വെബ്സൈറ്റ് ലഭ്യമാണെന്ന് ഉറപ്പാക്കുക":"Ensure the website is accessible"})]})]}),s&&c.jsxs("button",{onClick:s,className:"mt-4 flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:[c.jsx(yg,{className:"w-4 h-4 mr-2"}),r==="ml"?"വീണ്ടും ശ്രമിക്കുക":"Try Again"]})]})})})]})})})};function wn(t){return"ISFAKE"in t&&"type"in t}function Ok(t){return"details"in t&&"type"in t}function Dk(t){return t&&typeof t=="object"&&"error"in t&&typeof t.error=="object"&&t.error!==null&&"type"in t.error&&"message"in t.error}function Mk(){const[t,e]=j.useState(null),[s,r]=j.useState(null),[n,i]=j.useState(!1),[a,o]=j.useState(""),[l,d]=j.useState(null),[h,u]=j.useState(""),[f,m]=j.useState(0),{language:p}=be(),{user:g}=ss(),y={image:j.useRef(null),text:j.useRef(null),url:j.useRef(null)},[v,k]=j.useState(null),S=async({type:_,content:E,imageContent:N})=>{var L,w;i(!0),e(null),r(null),u(""),k(null);const B=E.trim();o(B),d(N||null);try{if(_==="url"&&B){try{const A=await ys.analyzeUrl(B,g==null?void 0:g.id);if(Dk(A)&&A.error.type==="URL_ERROR"){k({message:A.error.message||"Failed to analyze URL",url:B}),e(null),r(null),i(!1);return}wn(A)&&(e({...A,type:"url"}),(L=A.input)!=null&&L.image_url&&d(A.input.image_url),A.imageAnalysis&&r({...A.imageAnalysis,type:"image"}),m(0))}catch(A){console.error("URL analysis failed:",A);let R="";typeof A=="string"?R=A:A.message?R=A.message:R="An unknown error occurred while analyzing the URL",R.includes("status 400")?R="Request failed with status 400. Sorry, we had trouble finding contents for the given URL.":R.includes("status 404")?R="Request failed with status 404. The URL could not be found. Please check if the URL is correct.":R.includes("status 500")&&(R="Request failed with status 500. The server encountered an internal error. Please try again later."),k({message:R,url:B}),e(null),r(null)}i(!1);return}if(B&&!N){try{const A=await ys.analyzeContent(B,g==null?void 0:g.id);wn(A)&&(e({...A,type:"text"}),m(0))}catch(A){console.error("Text analysis failed:",A),Et.error(p==="ml"?"വാചക വിശകലനം പരാജയപ്പെട്ടു":"Text analysis failed")}i(!1);return}if(N)try{const A=await ys.analyzeImage(N,B||void 0,g==null?void 0:g.id);if(Ok(A)){if(r({...A,type:"image"}),(w=A.details)!=null&&w.text_analysis){const R=A.details.text_analysis.extracted_text;if(R&&(u(R),!B))try{const V=await ys.analyzeContent(R,g==null?void 0:g.id);wn(V)&&(e({...V,type:"text"}),o(R))}catch(V){console.error("Extracted text analysis failed:",V)}}if(B)try{const R=await ys.analyzeContent(B,g==null?void 0:g.id);wn(R)&&e({...R,type:"text"})}catch(R){console.error("Text analysis failed:",R)}m(t?0:1)}}catch(A){console.error("Image analysis failed:",A),Et.error(p==="ml"?"ചിത്ര വിശകലനം പരാജയപ്പെട്ടു":"Image analysis failed")}}catch(A){console.error("Analysis failed:",A),Et.error(p==="ml"?"വിശകലനം പരാജയപ്പെട്ടു":"Analysis failed")}finally{i(!1)}},C=t&&s||(t==null?void 0:t.type)==="url"&&(t==null?void 0:t.urlAnalysis),T=_=>{var B,L,w,A,R;if(!C)return;const E=b(),N=_==="next"?(f+1)%E:(f-1+E)%E;switch(m(N),N){case 0:(B=y.text.current)==null||B.focus(),O("comprehensive");break;case 1:(L=y.text.current)==null||L.focus(),O("text");break;case 2:(t==null?void 0:t.type)==="url"&&(t!=null&&t.urlAnalysis)?((w=y.url.current)==null||w.focus(),O("url")):s&&((A=y.image.current)==null||A.focus(),O("image"));break;case 3:(R=y.image.current)==null||R.focus(),O("image");break}},O=_=>{const E=_==="image"?p==="ml"?"ചിത്ര വിശകലനം കാണിക്കുന്നു":"Showing image analysis":_==="url"?p==="ml"?"URL വിശകലനം കാണിക്കുന്നു":"Showing URL analysis":_==="comprehensive"?p==="ml"?"സമഗ്ര വിശകലനം കാണിക്കുന്നു":"Showing comprehensive analysis":p==="ml"?"വാചക വിശകലനം കാണിക്കുന്നു":"Showing text analysis",N=document.createElement("div");N.setAttribute("aria-live","polite"),N.setAttribute("class","sr-only"),N.textContent=E,document.body.appendChild(N),setTimeout(()=>document.body.removeChild(N),1e3)},M=async(_,E)=>{try{const N=(t==null?void 0:t.id)||(s==null?void 0:s.id)||void 0;return console.log("Submitting feedback with:",{analysisResultId:N,rating:_,hasComment:!!E,hasUserId:!!(g!=null&&g.id)}),await Ck.submitFeedback({rating:_,comment:E||void 0,analysis_result_id:N,user_id:g==null?void 0:g.id}),Et.success(p==="ml"?"നിങ്ങളുടെ പ്രതികരണത്തിന് നന്ദി!":"Thank you for your feedback!"),Promise.resolve()}catch(N){return console.error("Error submitting feedback:",N),Et.error(p==="ml"?"പ്രതികരണം സമർപ്പിക്കുന്നതിൽ പിശക്":"Error submitting feedback"),Promise.reject(N)}};j.useEffect(()=>{const _=E=>{C&&(E.key==="ArrowRight"?(E.preventDefault(),T("next")):E.key==="ArrowLeft"&&(E.preventDefault(),T("prev")))};return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}},[C,T]);const b=()=>{let _=0;return((t==null?void 0:t.type)==="url"||t&&s)&&_++,t&&_++,s&&_++,(t==null?void 0:t.type)==="url"&&(t!=null&&t.urlAnalysis)&&_++,_},x=()=>{v&&S({type:"url",content:v.url})};return c.jsxs("div",{className:"w-full max-w-4xl mx-auto overflow-hidden",children:[c.jsx(F.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 via-purple-500/5 to-indigo-500/5 rounded-3xl blur-3xl -z-10",animate:{scale:[1,1.1,1],rotate:[0,2,0]},transition:{duration:5,repeat:1/0,repeatType:"reverse"}}),(g==null?void 0:g.id)&&c.jsx(Ek,{onSelectAnalysis:_=>{_.type==="text"||_.type==="url"?(e({..._.result,type:_.type,id:_.id}),o(_.input.text||_.input.url||"")):(_.type==="image"||_.type==="text_image")&&(r({..._.result,type:_.type,id:_.id}),_.input.text&&(o(_.input.text),e({..._.result,type:"text",id:_.id})),typeof _.input.image_url=="string"?d(_.input.image_url):d(null))}}),c.jsx(dk,{onAnalyze:S}),c.jsx(er,{mode:"wait",children:n?c.jsx(Pk,{}):c.jsxs(c.Fragment,{children:[v&&c.jsx(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"min-h-[400px] mb-24",children:c.jsx(Rk,{errorMessage:v.message,url:v.url,onRetry:x})}),!v&&t&&!s&&!(t.type==="url"&&t.urlAnalysis)&&c.jsxs("div",{className:"min-h-[400px] mb-24",children:[c.jsx(pd,{result:t,content:a,extractedFromImage:!1}),c.jsx("div",{className:"mt-12",children:c.jsx(xd,{onFeedback:M})})]}),!v&&s&&!t&&c.jsxs("div",{className:"min-h-[400px] mb-24",children:[c.jsx(yd,{result:s,imageUrl:l,extractedText:h}),c.jsx("div",{className:"mt-12",children:c.jsx(xd,{onFeedback:M})})]}),!v&&C&&c.jsxs("div",{className:"min-h-[600px] mb-24",tabIndex:0,"aria-label":p==="ml"?"വിശകലന ഫലങ്ങൾ":"Analysis Results",role:"region","aria-live":"polite","aria-roledescription":p==="ml"?"ഇടത്തേക്കും വലത്തേക്കും അമ്പ് കീകൾ ഉപയോഗിച്ച് ഫലങ്ങൾ മാറ്റുക":"Use left and right arrow keys to switch between results",children:[c.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[t&&s&&c.jsx("button",{onClick:()=>m(0),"aria-label":"Show comprehensive analysis",className:D("w-2 h-2 rounded-full transition-all duration-200",f===0?"bg-blue-500 scale-125":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500")}),t&&c.jsx("button",{onClick:()=>m(1),"aria-label":"Show text analysis",className:D("w-2 h-2 rounded-full transition-all duration-200",f===1?"bg-blue-500 scale-125":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500")}),s&&c.jsx("button",{onClick:()=>m(2),"aria-label":"Show image analysis",className:D("w-2 h-2 rounded-full transition-all duration-200",f===2?"bg-blue-500 scale-125":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500")}),(t==null?void 0:t.type)==="url"&&(t==null?void 0:t.urlAnalysis)&&c.jsx("button",{onClick:()=>m(3),"aria-label":"Show URL analysis",className:D("w-2 h-2 rounded-full transition-all duration-200",f===3?"bg-blue-500 scale-125":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500")})]}),c.jsxs("div",{className:"relative mt-6",children:[c.jsx("div",{className:"flex-grow w-full",style:{height:"1px"}}),((t==null?void 0:t.type)==="url"||t&&s)&&c.jsx("div",{className:D("transition-all duration-500 w-full max-w-4xl mx-auto",f===0?"opacity-100 block":"opacity-0 hidden"),tabIndex:f===0?0:-1,onKeyDown:_=>{_.key==="ArrowRight"?(_.preventDefault(),T("next")):_.key==="ArrowLeft"&&(_.preventDefault(),T("prev"))},children:c.jsx(Ak,{textAnalysis:t,imageAnalysis:s,urlAnalysis:t==null?void 0:t.urlAnalysis,extractedTextFromImage:h})}),t&&c.jsx("div",{className:D("transition-all duration-500 w-full max-w-4xl mx-auto",f===1?"opacity-100 block":"opacity-0 hidden"),tabIndex:f===1?0:-1,onKeyDown:_=>{_.key==="ArrowRight"?(_.preventDefault(),T("next")):_.key==="ArrowLeft"&&(_.preventDefault(),T("prev"))},children:c.jsx(pd,{result:t,content:a,extractedFromImage:!1})}),s&&c.jsx("div",{className:D("transition-all duration-500 w-full max-w-4xl mx-auto",f===2?"opacity-100 block":"opacity-0 hidden"),tabIndex:f===2?0:-1,onKeyDown:_=>{_.key==="ArrowRight"?(_.preventDefault(),T("next")):_.key==="ArrowLeft"&&(_.preventDefault(),T("prev"))},children:c.jsx(yd,{result:s,imageUrl:l,extractedText:h})}),(t==null?void 0:t.type)==="url"&&(t==null?void 0:t.urlAnalysis)&&c.jsx("div",{className:D("transition-all duration-500 w-full max-w-4xl mx-auto",f===3?"opacity-100 block":"opacity-0 hidden"),tabIndex:f===3?0:-1,onKeyDown:_=>{_.key==="ArrowRight"?(_.preventDefault(),T("next")):_.key==="ArrowLeft"&&(_.preventDefault(),T("prev"))},children:c.jsx(Tk,{urlAnalysis:t.urlAnalysis,onNavigate:T})})]})]})]})})]})}function Lk(){return c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:c.jsx(Mk,{})})}function ot({children:t,className:e}){return c.jsx("div",{className:Fi("bg-white dark:bg-gray-800 rounded-lg shadow-lg backdrop-blur-lg backdrop-filter bg-opacity-80 dark:bg-opacity-80",e),children:t})}ot.Header=function({children:e,className:s}){return c.jsx("div",{className:Fi("px-6 py-4 border-b border-gray-200 dark:border-gray-700",s),children:e})};ot.Body=function({children:e,className:s}){return c.jsx("div",{className:Fi("px-6 py-4",s),children:e})};function Ik({label:t,value:e,index:s}){return c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},children:c.jsxs(ot,{className:"p-6",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:t})]})})}function Fk({id:t,icon:e,label:s,isActive:r,onClick:n}){return c.jsxs(Kr,{variant:r?"primary":"secondary",onClick:n,className:"flex items-center",children:[c.jsx(e,{className:"h-5 w-5 mr-2"}),s]})}const Bk="https://cxjdkqkzmtyudkwwhelq.supabase.co",$k="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4amRrcWt6bXR5dWRrd3doZWxxIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczNTgwMTU3MSwiZXhwIjoyMDUxMzc3NTcxfQ.fzSh9LAyM9OJCcx3zj0Qy5Af4H-7jTuycXs4ZiIZD-E",ua=gu(Bk,$k,{auth:{autoRefreshToken:!1,persistSession:!1}}),nm=6048e5,Vk=864e5,bd=Symbol.for("constructDateFrom");function Qt(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&bd in t?t[bd](e):t instanceof Date?new t.constructor(e):new Date(e)}function ht(t,e){return Qt(e||t,t)}let Uk={};function Bi(){return Uk}function Yr(t,e){var o,l,d,h;const s=Bi(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??s.weekStartsOn??((h=(d=s.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,n=ht(t,e==null?void 0:e.in),i=n.getDay(),a=(i<r?7:0)+i-r;return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),n}function ni(t,e){return Yr(t,{...e,weekStartsOn:1})}function im(t,e){const s=ht(t,e==null?void 0:e.in),r=s.getFullYear(),n=Qt(s,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=ni(n),a=Qt(s,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=ni(a);return s.getTime()>=i.getTime()?r+1:s.getTime()>=o.getTime()?r:r-1}function vd(t){const e=ht(t),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+t-+s}function zk(t,...e){const s=Qt.bind(null,e.find(r=>typeof r=="object"));return e.map(s)}function wd(t,e){const s=ht(t,e==null?void 0:e.in);return s.setHours(0,0,0,0),s}function Hk(t,e,s){const[r,n]=zk(s==null?void 0:s.in,t,e),i=wd(r),a=wd(n),o=+i-vd(i),l=+a-vd(a);return Math.round((o-l)/Vk)}function Wk(t,e){const s=im(t,e),r=Qt(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),ni(r)}function qk(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Kk(t){return!(!qk(t)&&typeof t!="number"||isNaN(+ht(t)))}function Gk(t,e){const s=ht(t,e==null?void 0:e.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const Yk={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xk=(t,e,s)=>{let r;const n=Yk[t];return typeof n=="string"?r=n:e===1?r=n.one:r=n.other.replace("{{count}}",e.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function fa(t){return(e={})=>{const s=e.width?String(e.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const Jk={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Zk={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Qk={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ej={date:fa({formats:Jk,defaultWidth:"full"}),time:fa({formats:Zk,defaultWidth:"full"}),dateTime:fa({formats:Qk,defaultWidth:"full"})},tj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sj=(t,e,s,r)=>tj[t];function fr(t){return(e,s)=>{const r=s!=null&&s.context?String(s.context):"standalone";let n;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=s!=null&&s.width?String(s.width):a;n=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=s!=null&&s.width?String(s.width):t.defaultWidth;n=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return n[i]}}const rj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ij={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},aj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cj=(t,e)=>{const s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},dj={ordinalNumber:cj,era:fr({values:rj,defaultWidth:"wide"}),quarter:fr({values:nj,defaultWidth:"wide",argumentCallback:t=>t-1}),month:fr({values:ij,defaultWidth:"wide"}),day:fr({values:aj,defaultWidth:"wide"}),dayPeriod:fr({values:oj,defaultWidth:"wide",formattingValues:lj,defaultFormattingWidth:"wide"})};function mr(t){return(e,s={})=>{const r=s.width,n=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(n);if(!i)return null;const a=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?uj(o,u=>u.test(a)):hj(o,u=>u.test(a));let d;d=t.valueCallback?t.valueCallback(l):l,d=s.valueCallback?s.valueCallback(d):d;const h=e.slice(a.length);return{value:d,rest:h}}}function hj(t,e){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return s}function uj(t,e){for(let s=0;s<t.length;s++)if(e(t[s]))return s}function fj(t){return(e,s={})=>{const r=e.match(t.matchPattern);if(!r)return null;const n=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=s.valueCallback?s.valueCallback(a):a;const o=e.slice(n.length);return{value:a,rest:o}}}const mj=/^(\d+)(th|st|nd|rd)?/i,gj=/\d+/i,pj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yj={any:[/^b/i,/^(a|c)/i]},xj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bj={any:[/1/i,/2/i,/3/i,/4/i]},vj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_j={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Sj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nj={ordinalNumber:fj({matchPattern:mj,parsePattern:gj,valueCallback:t=>parseInt(t,10)}),era:mr({matchPatterns:pj,defaultMatchWidth:"wide",parsePatterns:yj,defaultParseWidth:"any"}),quarter:mr({matchPatterns:xj,defaultMatchWidth:"wide",parsePatterns:bj,defaultParseWidth:"any",valueCallback:t=>t+1}),month:mr({matchPatterns:vj,defaultMatchWidth:"wide",parsePatterns:wj,defaultParseWidth:"any"}),day:mr({matchPatterns:_j,defaultMatchWidth:"wide",parsePatterns:kj,defaultParseWidth:"any"}),dayPeriod:mr({matchPatterns:jj,defaultMatchWidth:"any",parsePatterns:Sj,defaultParseWidth:"any"})},Tj={code:"en-US",formatDistance:Xk,formatLong:ej,formatRelative:sj,localize:dj,match:Nj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Aj(t,e){const s=ht(t,e==null?void 0:e.in);return Hk(s,Gk(s))+1}function Pj(t,e){const s=ht(t,e==null?void 0:e.in),r=+ni(s)-+Wk(s);return Math.round(r/nm)+1}function am(t,e){var h,u,f,m;const s=ht(t,e==null?void 0:e.in),r=s.getFullYear(),n=Bi(),i=(e==null?void 0:e.firstWeekContainsDate)??((u=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,a=Qt((e==null?void 0:e.in)||t,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=Yr(a,e),l=Qt((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const d=Yr(l,e);return+s>=+o?r+1:+s>=+d?r:r-1}function Ej(t,e){var o,l,d,h;const s=Bi(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??s.firstWeekContainsDate??((h=(d=s.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,n=am(t,e),i=Qt((e==null?void 0:e.in)||t,0);return i.setFullYear(n,0,r),i.setHours(0,0,0,0),Yr(i,e)}function Cj(t,e){const s=ht(t,e==null?void 0:e.in),r=+Yr(s,e)-+Ej(s,e);return Math.round(r/nm)+1}function de(t,e){const s=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return s+r}const Ft={y(t,e){const s=t.getFullYear(),r=s>0?s:1-s;return de(e==="yy"?r%100:r,e.length)},M(t,e){const s=t.getMonth();return e==="M"?String(s+1):de(s+1,2)},d(t,e){return de(t.getDate(),e.length)},a(t,e){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,e){return de(t.getHours()%12||12,e.length)},H(t,e){return de(t.getHours(),e.length)},m(t,e){return de(t.getMinutes(),e.length)},s(t,e){return de(t.getSeconds(),e.length)},S(t,e){const s=e.length,r=t.getMilliseconds(),n=Math.trunc(r*Math.pow(10,s-3));return de(n,e.length)}},Os={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_d={G:function(t,e,s){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,e,s){if(e==="yo"){const r=t.getFullYear(),n=r>0?r:1-r;return s.ordinalNumber(n,{unit:"year"})}return Ft.y(t,e)},Y:function(t,e,s,r){const n=am(t,r),i=n>0?n:1-n;if(e==="YY"){const a=i%100;return de(a,2)}return e==="Yo"?s.ordinalNumber(i,{unit:"year"}):de(i,e.length)},R:function(t,e){const s=im(t);return de(s,e.length)},u:function(t,e){const s=t.getFullYear();return de(s,e.length)},Q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return de(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,s){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return de(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,s){const r=t.getMonth();switch(e){case"M":case"MM":return Ft.M(t,e);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,s){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return de(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,s,r){const n=Cj(t,r);return e==="wo"?s.ordinalNumber(n,{unit:"week"}):de(n,e.length)},I:function(t,e,s){const r=Pj(t);return e==="Io"?s.ordinalNumber(r,{unit:"week"}):de(r,e.length)},d:function(t,e,s){return e==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):Ft.d(t,e)},D:function(t,e,s){const r=Aj(t);return e==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):de(r,e.length)},E:function(t,e,s){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,s,r){const n=t.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return de(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(t,e,s,r){const n=t.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return de(i,e.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(t,e,s){const r=t.getDay(),n=r===0?7:r;switch(e){case"i":return String(n);case"ii":return de(n,e.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,s){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,s){const r=t.getHours();let n;switch(r===12?n=Os.noon:r===0?n=Os.midnight:n=r/12>=1?"pm":"am",e){case"b":case"bb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,e,s){const r=t.getHours();let n;switch(r>=17?n=Os.evening:r>=12?n=Os.afternoon:r>=4?n=Os.morning:n=Os.night,e){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,e,s){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return Ft.h(t,e)},H:function(t,e,s){return e==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):Ft.H(t,e)},K:function(t,e,s){const r=t.getHours()%12;return e==="Ko"?s.ordinalNumber(r,{unit:"hour"}):de(r,e.length)},k:function(t,e,s){let r=t.getHours();return r===0&&(r=24),e==="ko"?s.ordinalNumber(r,{unit:"hour"}):de(r,e.length)},m:function(t,e,s){return e==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ft.m(t,e)},s:function(t,e,s){return e==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):Ft.s(t,e)},S:function(t,e){return Ft.S(t,e)},X:function(t,e,s){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return jd(r);case"XXXX":case"XX":return ms(r);case"XXXXX":case"XXX":default:return ms(r,":")}},x:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"x":return jd(r);case"xxxx":case"xx":return ms(r);case"xxxxx":case"xxx":default:return ms(r,":")}},O:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+kd(r,":");case"OOOO":default:return"GMT"+ms(r,":")}},z:function(t,e,s){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+kd(r,":");case"zzzz":default:return"GMT"+ms(r,":")}},t:function(t,e,s){const r=Math.trunc(+t/1e3);return de(r,e.length)},T:function(t,e,s){return de(+t,e.length)}};function kd(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),n=Math.trunc(r/60),i=r%60;return i===0?s+String(n):s+String(n)+e+de(i,2)}function jd(t,e){return t%60===0?(t>0?"-":"+")+de(Math.abs(t)/60,2):ms(t,e)}function ms(t,e=""){const s=t>0?"-":"+",r=Math.abs(t),n=de(Math.trunc(r/60),2),i=de(r%60,2);return s+n+e+i}const Sd=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},om=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Rj=(t,e)=>{const s=t.match(/(P+)(p+)?/)||[],r=s[1],n=s[2];if(!n)return Sd(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Sd(r,e)).replace("{{time}}",om(n,e))},Oj={p:om,P:Rj},Dj=/^D+$/,Mj=/^Y+$/,Lj=["D","DD","YY","YYYY"];function Ij(t){return Dj.test(t)}function Fj(t){return Mj.test(t)}function Bj(t,e,s){const r=$j(t,e,s);if(console.warn(r),Lj.includes(t))throw new RangeError(r)}function $j(t,e,s){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Vj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Uj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zj=/^'([^]*?)'?$/,Hj=/''/g,Wj=/[a-zA-Z]/;function qj(t,e,s){var h,u,f,m;const r=Bi(),n=r.locale??Tj,i=r.firstWeekContainsDate??((u=(h=r.locale)==null?void 0:h.options)==null?void 0:u.firstWeekContainsDate)??1,a=r.weekStartsOn??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,o=ht(t,s==null?void 0:s.in);if(!Kk(o))throw new RangeError("Invalid time value");let l=e.match(Uj).map(p=>{const g=p[0];if(g==="p"||g==="P"){const y=Oj[g];return y(p,n.formatLong)}return p}).join("").match(Vj).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const g=p[0];if(g==="'")return{isToken:!1,value:Kj(p)};if(_d[g])return{isToken:!0,value:p};if(g.match(Wj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:p}});n.localize.preprocessor&&(l=n.localize.preprocessor(o,l));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:n};return l.map(p=>{if(!p.isToken)return p.value;const g=p.value;(Fj(g)||Ij(g))&&Bj(g,e,String(t));const y=_d[g[0]];return y(o,g,n.localize,d)}).join("")}function Kj(t){const e=t.match(zj);return e?e[1].replace(Hj,"'"):t}var lm={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((s,r)=>{t.exports=r()})(Re,function s(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},n,i=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,o={},l=0,d={};function h(b){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(x){var _=T(x);_.chunkSize=parseInt(_.chunkSize),x.step||x.chunk||(_.chunkSize=null),this._handle=new g(_),(this._handle.streamer=this)._config=_}).call(this,b),this.parseChunk=function(x,_){var E=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<E){let B=this._config.newline;B||(N=this._config.quoteChar||'"',B=this._handle.guessLineEndings(x,N)),x=[...x.split(B).slice(E)].join(B)}this.isFirstChunk&&M(this._config.beforeFirstChunk)&&(N=this._config.beforeFirstChunk(x))!==void 0&&(x=N),this.isFirstChunk=!1,this._halted=!1;var E=this._partialLine+x,N=(this._partialLine="",this._handle.parse(E,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(x=N.meta.cursor,E=(this._finished||(this._partialLine=E.substring(x-this._baseIndex),this._baseIndex=x),N&&N.data&&(this._rowCount+=N.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:N,workerId:d.WORKER_ID,finished:E});else if(M(this._config.chunk)&&!_){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=N=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!E||!M(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),E||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(x){M(this._config.error)?this._config.error(x):a&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:x,finished:!1})}}function u(b){var x;(b=b||{}).chunkSize||(b.chunkSize=d.RemoteChunkSize),h.call(this,b),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(_){this._input=_,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(x=new XMLHttpRequest,this._config.withCredentials&&(x.withCredentials=this._config.withCredentials),i||(x.onload=O(this._chunkLoaded,this),x.onerror=O(this._chunkError,this)),x.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var _,E=this._config.downloadRequestHeaders;for(_ in E)x.setRequestHeader(_,E[_])}var N;this._config.chunkSize&&(N=this._start+this._config.chunkSize-1,x.setRequestHeader("Range","bytes="+this._start+"-"+N));try{x.send(this._config.downloadRequestBody)}catch(B){this._chunkError(B.message)}i&&x.status===0&&this._chunkError()}},this._chunkLoaded=function(){x.readyState===4&&(x.status<200||400<=x.status?this._chunkError():(this._start+=this._config.chunkSize||x.responseText.length,this._finished=!this._config.chunkSize||this._start>=(_=>(_=_.getResponseHeader("Content-Range"))!==null?parseInt(_.substring(_.lastIndexOf("/")+1)):-1)(x),this.parseChunk(x.responseText)))},this._chunkError=function(_){_=x.statusText||_,this._sendError(new Error(_))}}function f(b){(b=b||{}).chunkSize||(b.chunkSize=d.LocalChunkSize),h.call(this,b);var x,_,E=typeof FileReader<"u";this.stream=function(N){this._input=N,_=N.slice||N.webkitSlice||N.mozSlice,E?((x=new FileReader).onload=O(this._chunkLoaded,this),x.onerror=O(this._chunkError,this)):x=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var N=this._input,B=(this._config.chunkSize&&(B=Math.min(this._start+this._config.chunkSize,this._input.size),N=_.call(N,this._start,B)),x.readAsText(N,this._config.encoding));E||this._chunkLoaded({target:{result:B}})},this._chunkLoaded=function(N){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(N.target.result)},this._chunkError=function(){this._sendError(x.error)}}function m(b){var x;h.call(this,b=b||{}),this.stream=function(_){return x=_,this._nextChunk()},this._nextChunk=function(){var _,E;if(!this._finished)return _=this._config.chunkSize,x=_?(E=x.substring(0,_),x.substring(_)):(E=x,""),this._finished=!x,this.parseChunk(E)}}function p(b){h.call(this,b=b||{});var x=[],_=!0,E=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(N){this._input=N,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&x.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),x.length?this.parseChunk(x.shift()):_=!0},this._streamData=O(function(N){try{x.push(typeof N=="string"?N:N.toString(this._config.encoding)),_&&(_=!1,this._checkIsFinished(),this.parseChunk(x.shift()))}catch(B){this._streamError(B)}},this),this._streamError=O(function(N){this._streamCleanUp(),this._sendError(N)},this),this._streamEnd=O(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=O(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(b){var x,_,E,N,B=Math.pow(2,53),L=-B,w=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,A=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,R=this,V=0,I=0,$=!1,z=!1,G=[],H={data:[],errors:[],meta:{}};function X(q){return b.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function se(){if(H&&E&&(U("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),E=!1),b.skipEmptyLines&&(H.data=H.data.filter(function(W){return!X(W)})),P()){let W=function(oe,ye){M(b.transformHeader)&&(oe=b.transformHeader(oe,ye)),G.push(oe)};if(H)if(Array.isArray(H.data[0])){for(var q=0;P()&&q<H.data.length;q++)H.data[q].forEach(W);H.data.splice(0,1)}else H.data.forEach(W)}function K(W,oe){for(var ye=b.header?{}:[],Q=0;Q<W.length;Q++){var re=Q,J=W[Q],J=((ve,Z)=>(ue=>(b.dynamicTypingFunction&&b.dynamicTyping[ue]===void 0&&(b.dynamicTyping[ue]=b.dynamicTypingFunction(ue)),(b.dynamicTyping[ue]||b.dynamicTyping)===!0))(ve)?Z==="true"||Z==="TRUE"||Z!=="false"&&Z!=="FALSE"&&((ue=>{if(w.test(ue)&&(ue=parseFloat(ue),L<ue&&ue<B))return 1})(Z)?parseFloat(Z):A.test(Z)?new Date(Z):Z===""?null:Z):Z)(re=b.header?Q>=G.length?"__parsed_extra":G[Q]:re,J=b.transform?b.transform(J,re):J);re==="__parsed_extra"?(ye[re]=ye[re]||[],ye[re].push(J)):ye[re]=J}return b.header&&(Q>G.length?U("FieldMismatch","TooManyFields","Too many fields: expected "+G.length+" fields but parsed "+Q,I+oe):Q<G.length&&U("FieldMismatch","TooFewFields","Too few fields: expected "+G.length+" fields but parsed "+Q,I+oe)),ye}var ae;H&&(b.header||b.dynamicTyping||b.transform)&&(ae=1,!H.data.length||Array.isArray(H.data[0])?(H.data=H.data.map(K),ae=H.data.length):H.data=K(H.data,0),b.header&&H.meta&&(H.meta.fields=G),I+=ae)}function P(){return b.header&&G.length===0}function U(q,K,ae,W){q={type:q,code:K,message:ae},W!==void 0&&(q.row=W),H.errors.push(q)}M(b.step)&&(N=b.step,b.step=function(q){H=q,P()?se():(se(),H.data.length!==0&&(V+=q.data.length,b.preview&&V>b.preview?_.abort():(H.data=H.data[0],N(H,R))))}),this.parse=function(q,K,ae){var W=b.quoteChar||'"',W=(b.newline||(b.newline=this.guessLineEndings(q,W)),E=!1,b.delimiter?M(b.delimiter)&&(b.delimiter=b.delimiter(q),H.meta.delimiter=b.delimiter):((W=((oe,ye,Q,re,J)=>{var ve,Z,ue,qe;J=J||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var nt=0;nt<J.length;nt++){for(var ut,ir=J[nt],De=0,ft=0,Se=0,Ve=(ue=void 0,new v({comments:re,delimiter:ir,newline:ye,preview:10}).parse(oe)),_t=0;_t<Ve.data.length;_t++)Q&&X(Ve.data[_t])?Se++:(ut=Ve.data[_t].length,ft+=ut,ue===void 0?ue=ut:0<ut&&(De+=Math.abs(ut-ue),ue=ut));0<Ve.data.length&&(ft/=Ve.data.length-Se),(Z===void 0||De<=Z)&&(qe===void 0||qe<ft)&&1.99<ft&&(Z=De,ve=ir,qe=ft)}return{successful:!!(b.delimiter=ve),bestDelimiter:ve}})(q,b.newline,b.skipEmptyLines,b.comments,b.delimitersToGuess)).successful?b.delimiter=W.bestDelimiter:(E=!0,b.delimiter=d.DefaultDelimiter),H.meta.delimiter=b.delimiter),T(b));return b.preview&&b.header&&W.preview++,x=q,_=new v(W),H=_.parse(x,K,ae),se(),$?{meta:{paused:!0}}:H||{meta:{paused:!1}}},this.paused=function(){return $},this.pause=function(){$=!0,_.abort(),x=M(b.chunk)?"":x.substring(_.getCharIndex())},this.resume=function(){R.streamer._halted?($=!1,R.streamer.parseChunk(x,!0)):setTimeout(R.resume,3)},this.aborted=function(){return z},this.abort=function(){z=!0,_.abort(),H.meta.aborted=!0,M(b.complete)&&b.complete(H),x=""},this.guessLineEndings=function(oe,W){oe=oe.substring(0,1048576);var W=new RegExp(y(W)+"([^]*?)"+y(W),"gm"),ae=(oe=oe.replace(W,"")).split("\r"),W=oe.split(`
`),oe=1<W.length&&W[0].length<ae[0].length;if(ae.length===1||oe)return`
`;for(var ye=0,Q=0;Q<ae.length;Q++)ae[Q][0]===`
`&&ye++;return ye>=ae.length/2?`\r
`:"\r"}}function y(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(b){var x=(b=b||{}).delimiter,_=b.newline,E=b.comments,N=b.step,B=b.preview,L=b.fastMode,w=null,A=!1,R=b.quoteChar==null?'"':b.quoteChar,V=R;if(b.escapeChar!==void 0&&(V=b.escapeChar),(typeof x!="string"||-1<d.BAD_DELIMITERS.indexOf(x))&&(x=","),E===x)throw new Error("Comment character same as delimiter");E===!0?E="#":(typeof E!="string"||-1<d.BAD_DELIMITERS.indexOf(E))&&(E=!1),_!==`
`&&_!=="\r"&&_!==`\r
`&&(_=`
`);var I=0,$=!1;this.parse=function(z,G,H){if(typeof z!="string")throw new Error("Input must be a string");var X=z.length,se=x.length,P=_.length,U=E.length,q=M(N),K=[],ae=[],W=[],oe=I=0;if(!z)return De();if(L||L!==!1&&z.indexOf(R)===-1){for(var ye=z.split(_),Q=0;Q<ye.length;Q++){if(W=ye[Q],I+=W.length,Q!==ye.length-1)I+=_.length;else if(H)return De();if(!E||W.substring(0,U)!==E){if(q){if(K=[],qe(W.split(x)),ft(),$)return De()}else qe(W.split(x));if(B&&B<=Q)return K=K.slice(0,B),De(!0)}}return De()}for(var re=z.indexOf(x,I),J=z.indexOf(_,I),ve=new RegExp(y(V)+y(R),"g"),Z=z.indexOf(R,I);;)if(z[I]===R)for(Z=I,I++;;){if((Z=z.indexOf(R,Z+1))===-1)return H||ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:K.length,index:I}),ut();if(Z===X-1)return ut(z.substring(I,Z).replace(ve,R));if(R===V&&z[Z+1]===V)Z++;else if(R===V||Z===0||z[Z-1]!==V){re!==-1&&re<Z+1&&(re=z.indexOf(x,Z+1));var ue=nt((J=J!==-1&&J<Z+1?z.indexOf(_,Z+1):J)===-1?re:Math.min(re,J));if(z.substr(Z+1+ue,se)===x){W.push(z.substring(I,Z).replace(ve,R)),z[I=Z+1+ue+se]!==R&&(Z=z.indexOf(R,I)),re=z.indexOf(x,I),J=z.indexOf(_,I);break}if(ue=nt(J),z.substring(Z+1+ue,Z+1+ue+P)===_){if(W.push(z.substring(I,Z).replace(ve,R)),ir(Z+1+ue+P),re=z.indexOf(x,I),Z=z.indexOf(R,I),q&&(ft(),$))return De();if(B&&K.length>=B)return De(!0);break}ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:K.length,index:I}),Z++}}else if(E&&W.length===0&&z.substring(I,I+U)===E){if(J===-1)return De();I=J+P,J=z.indexOf(_,I),re=z.indexOf(x,I)}else if(re!==-1&&(re<J||J===-1))W.push(z.substring(I,re)),I=re+se,re=z.indexOf(x,I);else{if(J===-1)break;if(W.push(z.substring(I,J)),ir(J+P),q&&(ft(),$))return De();if(B&&K.length>=B)return De(!0)}return ut();function qe(Se){K.push(Se),oe=I}function nt(Se){var Ve=0;return Ve=Se!==-1&&(Se=z.substring(Z+1,Se))&&Se.trim()===""?Se.length:Ve}function ut(Se){return H||(Se===void 0&&(Se=z.substring(I)),W.push(Se),I=X,qe(W),q&&ft()),De()}function ir(Se){I=Se,qe(W),W=[],J=z.indexOf(_,I)}function De(Se){if(b.header&&!G&&K.length&&!A){var Ve=K[0],_t={},Ui=new Set(Ve);let xl=!1;for(let Ps=0;Ps<Ve.length;Ps++){let mt=Ve[Ps];if(_t[mt=M(b.transformHeader)?b.transformHeader(mt,Ps):mt]){let ar,bl=_t[mt];for(;ar=mt+"_"+bl,bl++,Ui.has(ar););Ui.add(ar),Ve[Ps]=ar,_t[mt]++,xl=!0,(w=w===null?{}:w)[ar]=mt}else _t[mt]=1,Ve[Ps]=mt;Ui.add(mt)}xl&&console.warn("Duplicate headers found and renamed."),A=!0}return{data:K,errors:ae,meta:{delimiter:x,linebreak:_,aborted:$,truncated:!!Se,cursor:oe+(G||0),renamedHeaders:w}}}function ft(){N(De()),K=[],ae=[]}},this.abort=function(){$=!0},this.getCharIndex=function(){return I}}function k(b){var x=b.data,_=o[x.workerId],E=!1;if(x.error)_.userError(x.error,x.file);else if(x.results&&x.results.data){var N={abort:function(){E=!0,S(x.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(M(_.userStep)){for(var B=0;B<x.results.data.length&&(_.userStep({data:x.results.data[B],errors:x.results.errors,meta:x.results.meta},N),!E);B++);delete x.results}else M(_.userChunk)&&(_.userChunk(x.results,N,x.file),delete x.results)}x.finished&&!E&&S(x.workerId,x.results)}function S(b,x){var _=o[b];M(_.userComplete)&&_.userComplete(x),_.terminate(),delete o[b]}function C(){throw new Error("Not implemented.")}function T(b){if(typeof b!="object"||b===null)return b;var x,_=Array.isArray(b)?[]:{};for(x in b)_[x]=T(b[x]);return _}function O(b,x){return function(){b.apply(x,arguments)}}function M(b){return typeof b=="function"}return d.parse=function(b,x){var _=(x=x||{}).dynamicTyping||!1;if(M(_)&&(x.dynamicTypingFunction=_,_={}),x.dynamicTyping=_,x.transform=!!M(x.transform)&&x.transform,!x.worker||!d.WORKERS_SUPPORTED)return _=null,d.NODE_STREAM_INPUT,typeof b=="string"?(b=(E=>E.charCodeAt(0)!==65279?E:E.slice(1))(b),_=new(x.download?u:m)(x)):b.readable===!0&&M(b.read)&&M(b.on)?_=new p(x):(r.File&&b instanceof File||b instanceof Object)&&(_=new f(x)),_.stream(b);(_=(()=>{var E;return!!d.WORKERS_SUPPORTED&&(E=(()=>{var N=r.URL||r.webkitURL||null,B=s.toString();return d.BLOB_URL||(d.BLOB_URL=N.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",B,")();"],{type:"text/javascript"})))})(),(E=new r.Worker(E)).onmessage=k,E.id=l++,o[E.id]=E)})()).userStep=x.step,_.userChunk=x.chunk,_.userComplete=x.complete,_.userError=x.error,x.step=M(x.step),x.chunk=M(x.chunk),x.complete=M(x.complete),x.error=M(x.error),delete x.worker,_.postMessage({input:b,config:x,workerId:_.id})},d.unparse=function(b,x){var _=!1,E=!0,N=",",B=`\r
`,L='"',w=L+L,A=!1,R=null,V=!1,I=((()=>{if(typeof x=="object"){if(typeof x.delimiter!="string"||d.BAD_DELIMITERS.filter(function(G){return x.delimiter.indexOf(G)!==-1}).length||(N=x.delimiter),typeof x.quotes!="boolean"&&typeof x.quotes!="function"&&!Array.isArray(x.quotes)||(_=x.quotes),typeof x.skipEmptyLines!="boolean"&&typeof x.skipEmptyLines!="string"||(A=x.skipEmptyLines),typeof x.newline=="string"&&(B=x.newline),typeof x.quoteChar=="string"&&(L=x.quoteChar),typeof x.header=="boolean"&&(E=x.header),Array.isArray(x.columns)){if(x.columns.length===0)throw new Error("Option columns is empty");R=x.columns}x.escapeChar!==void 0&&(w=x.escapeChar+L),x.escapeFormulae instanceof RegExp?V=x.escapeFormulae:typeof x.escapeFormulae=="boolean"&&x.escapeFormulae&&(V=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(L),"g"));if(typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(b)){if(!b.length||Array.isArray(b[0]))return $(null,b,A);if(typeof b[0]=="object")return $(R||Object.keys(b[0]),b,A)}else if(typeof b=="object")return typeof b.data=="string"&&(b.data=JSON.parse(b.data)),Array.isArray(b.data)&&(b.fields||(b.fields=b.meta&&b.meta.fields||R),b.fields||(b.fields=Array.isArray(b.data[0])?b.fields:typeof b.data[0]=="object"?Object.keys(b.data[0]):[]),Array.isArray(b.data[0])||typeof b.data[0]=="object"||(b.data=[b.data])),$(b.fields||[],b.data||[],A);throw new Error("Unable to serialize unrecognized input");function $(G,H,X){var se="",P=(typeof G=="string"&&(G=JSON.parse(G)),typeof H=="string"&&(H=JSON.parse(H)),Array.isArray(G)&&0<G.length),U=!Array.isArray(H[0]);if(P&&E){for(var q=0;q<G.length;q++)0<q&&(se+=N),se+=z(G[q],q);0<H.length&&(se+=B)}for(var K=0;K<H.length;K++){var ae=(P?G:H[K]).length,W=!1,oe=P?Object.keys(H[K]).length===0:H[K].length===0;if(X&&!P&&(W=X==="greedy"?H[K].join("").trim()==="":H[K].length===1&&H[K][0].length===0),X==="greedy"&&P){for(var ye=[],Q=0;Q<ae;Q++){var re=U?G[Q]:Q;ye.push(H[K][re])}W=ye.join("").trim()===""}if(!W){for(var J=0;J<ae;J++){0<J&&!oe&&(se+=N);var ve=P&&U?G[J]:J;se+=z(H[K][ve],J)}K<H.length-1&&(!X||0<ae&&!oe)&&(se+=B)}}return se}function z(G,H){var X,se;return G==null?"":G.constructor===Date?JSON.stringify(G).slice(1,25):(se=!1,V&&typeof G=="string"&&V.test(G)&&(G="'"+G,se=!0),X=G.toString().replace(I,w),(se=se||_===!0||typeof _=="function"&&_(G,H)||Array.isArray(_)&&_[H]||((P,U)=>{for(var q=0;q<U.length;q++)if(-1<P.indexOf(U[q]))return!0;return!1})(X,d.BAD_DELIMITERS)||-1<X.indexOf(N)||X.charAt(0)===" "||X.charAt(X.length-1)===" ")?L+X+L:X)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!i&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=v,d.ParserHandle=g,d.NetworkStreamer=u,d.FileStreamer=f,d.StringStreamer=m,d.ReadableStreamStreamer=p,r.jQuery&&((n=r.jQuery).fn.parse=function(b){var x=b.config||{},_=[];return this.each(function(B){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)_.push({file:this.files[L],inputElem:this,instanceConfig:n.extend({},x)})}),E(),this;function E(){if(_.length===0)M(b.complete)&&b.complete();else{var B,L,w,A,R=_[0];if(M(b.before)){var V=b.before(R.file,R.inputElem);if(typeof V=="object"){if(V.action==="abort")return B="AbortError",L=R.file,w=R.inputElem,A=V.reason,void(M(b.error)&&b.error({name:B},L,w,A));if(V.action==="skip")return void N();typeof V.config=="object"&&(R.instanceConfig=n.extend(R.instanceConfig,V.config))}else if(V==="skip")return void N()}var I=R.instanceConfig.complete;R.instanceConfig.complete=function($){M(I)&&I($,R.file,R.inputElem),N()},d.parse(R.file,R.instanceConfig)}}function N(){_.splice(0,1),E()}}),a&&(r.onmessage=function(b){b=b.data,d.WORKER_ID===void 0&&b&&(d.WORKER_ID=b.workerId),typeof b.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(b.input,b.config),finished:!0}):(r.File&&b.input instanceof File||b.input instanceof Object)&&(b=d.parse(b.input,b.config))&&r.postMessage({workerId:d.WORKER_ID,results:b,finished:!0})}),(u.prototype=Object.create(h.prototype)).constructor=u,(f.prototype=Object.create(h.prototype)).constructor=f,(m.prototype=Object.create(m.prototype)).constructor=m,(p.prototype=Object.create(h.prototype)).constructor=p,d})})(lm);var Gj=lm.exports;const cm=Dh(Gj);function Yj(t){try{if(!t||typeof t!="string")return"unknown";let e=t;!t.startsWith("http://")&&!t.startsWith("https://")&&(e="https://"+t);const s=new URL(e).hostname,r=s.split(".");if(r.length>=3){const n=r[r.length-2]+"."+r[r.length-1];if(["co.uk","co.in","com.au","co.nz"].includes(n))return r[r.length-3]+"."+n}return r.length>=2?r[r.length-2]+"."+r[r.length-1]:s}catch{return"invalid-url"}}function Xj(t){const e={fake_news:0,real_news:0,total:t.length},s={};t.forEach(i=>{const a=parseInt(i.Class)===1;a?e.real_news++:e.fake_news++;const o=Yj(i["News Url"]);s[o]||(s[o]={total:0,real:0,realPercentage:0}),s[o].total+=1,a&&(s[o].real+=1)});const r={"asianetnews.com":{bias:"Center-Right",description:"Major Malayalam news channel with high credibility in online reporting"},"manoramanews.com":{bias:"Center",description:"Highly trusted Malayalam news source with balanced reporting"},"indiatoday.in":{bias:"Center",description:"National news outlet with reliable Malayalam coverage"},"news18.com":{bias:"Center-Right",description:"Major news network with consistent factual reporting"},"manoramaonline.com":{bias:"Center-Right",description:"One of the largest Malayalam news portals with established credibility"},"mathrubhumi.com":{bias:"Center",description:"Traditional newspaper with mixed online reporting accuracy"},"oneindia.com":{bias:"Mixed",description:"News aggregator with varying content quality"},"samayam.com":{bias:"Not Rated",description:"News portal with concerns about content verification"}},n=Object.entries(s).filter(([i,a])=>a.total>=2).map(([i,a])=>{var o,l;return{domain:i,realNewsPercentage:parseFloat((a.real/a.total*100).toFixed(2)),articleCount:a.total,lastUpdated:new Date().toISOString().split("T")[0],rank:0,politicalBias:((o=r[i])==null?void 0:o.bias)||"Not Rated",description:((l=r[i])==null?void 0:l.description)||"Information not available"}}).sort((i,a)=>a.realNewsPercentage!==i.realNewsPercentage?a.realNewsPercentage-i.realNewsPercentage:a.articleCount-i.articleCount).map((i,a)=>({...i,rank:a+1}));return{fakeRealCounts:e,websiteRankings:n}}const Jj={async getCredibilityAnalysis(){try{const e=await(await fetch("/src/data/mal_train.csv")).text();return new Promise((s,r)=>{cm.parse(e,{header:!0,complete:n=>{const i=Xj(n.data);s(i)},error:n=>{r(new Error("Failed to parse CSV data: "+n.message))}})})}catch(t){throw console.error("Error fetching credibility analysis:",t),t}},updateWebsiteData(t,e,s){return t.map(r=>r.domain===e?{...r,...s,lastUpdated:new Date().toISOString().split("T")[0]}:r).sort((r,n)=>n.realNewsPercentage!==r.realNewsPercentage?n.realNewsPercentage-r.realNewsPercentage:n.articleCount-r.articleCount).map((r,n)=>({...r,rank:n+1}))}};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function dn(t){return t+.5|0}const Gt=(t,e,s)=>Math.max(Math.min(t,s),e);function jr(t){return Gt(dn(t*2.55),0,255)}function Xt(t){return Gt(dn(t*255),0,255)}function Pt(t){return Gt(dn(t/2.55)/100,0,1)}function Nd(t){return Gt(dn(t*100),0,100)}const Je={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ro=[..."0123456789ABCDEF"],Zj=t=>ro[t&15],Qj=t=>ro[(t&240)>>4]+ro[t&15],_n=t=>(t&240)>>4===(t&15),eS=t=>_n(t.r)&&_n(t.g)&&_n(t.b)&&_n(t.a);function tS(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Je[t[1]]*17,g:255&Je[t[2]]*17,b:255&Je[t[3]]*17,a:e===5?Je[t[4]]*17:255}:(e===7||e===9)&&(s={r:Je[t[1]]<<4|Je[t[2]],g:Je[t[3]]<<4|Je[t[4]],b:Je[t[5]]<<4|Je[t[6]],a:e===9?Je[t[7]]<<4|Je[t[8]]:255})),s}const sS=(t,e)=>t<255?e(t):"";function rS(t){var e=eS(t)?Zj:Qj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+sS(t.a,e):void 0}const nS=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dm(t,e,s){const r=e*Math.min(s,1-s),n=(i,a=(i+t/30)%12)=>s-r*Math.max(Math.min(a-3,9-a,1),-1);return[n(0),n(8),n(4)]}function iS(t,e,s){const r=(n,i=(n+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function aS(t,e,s){const r=dm(t,1,.5);let n;for(e+s>1&&(n=1/(e+s),e*=n,s*=n),n=0;n<3;n++)r[n]*=1-e-s,r[n]+=e;return r}function oS(t,e,s,r,n){return t===n?(e-s)/r+(e<s?6:0):e===n?(s-t)/r+2:(t-e)/r+4}function il(t){const s=t.r/255,r=t.g/255,n=t.b/255,i=Math.max(s,r,n),a=Math.min(s,r,n),o=(i+a)/2;let l,d,h;return i!==a&&(h=i-a,d=o>.5?h/(2-i-a):h/(i+a),l=oS(s,r,n,h,i),l=l*60+.5),[l|0,d||0,o]}function al(t,e,s,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,r)).map(Xt)}function ol(t,e,s){return al(dm,t,e,s)}function lS(t,e,s){return al(aS,t,e,s)}function cS(t,e,s){return al(iS,t,e,s)}function hm(t){return(t%360+360)%360}function dS(t){const e=nS.exec(t);let s=255,r;if(!e)return;e[5]!==r&&(s=e[6]?jr(+e[5]):Xt(+e[5]));const n=hm(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?r=lS(n,i,a):e[1]==="hsv"?r=cS(n,i,a):r=ol(n,i,a),{r:r[0],g:r[1],b:r[2],a:s}}function hS(t,e){var s=il(t);s[0]=hm(s[0]+e),s=ol(s),t.r=s[0],t.g=s[1],t.b=s[2]}function uS(t){if(!t)return;const e=il(t),s=e[0],r=Nd(e[1]),n=Nd(e[2]);return t.a<255?`hsla(${s}, ${r}%, ${n}%, ${Pt(t.a)})`:`hsl(${s}, ${r}%, ${n}%)`}const Td={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ad={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function fS(){const t={},e=Object.keys(Ad),s=Object.keys(Td);let r,n,i,a,o;for(r=0;r<e.length;r++){for(a=o=e[r],n=0;n<s.length;n++)i=s[n],o=o.replace(i,Td[i]);i=parseInt(Ad[a],16),t[o]=[i>>16&255,i>>8&255,i&255]}return t}let kn;function mS(t){kn||(kn=fS(),kn.transparent=[0,0,0,0]);const e=kn[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const gS=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function pS(t){const e=gS.exec(t);let s=255,r,n,i;if(e){if(e[7]!==r){const a=+e[7];s=e[8]?jr(a):Gt(a*255,0,255)}return r=+e[1],n=+e[3],i=+e[5],r=255&(e[2]?jr(r):Gt(r,0,255)),n=255&(e[4]?jr(n):Gt(n,0,255)),i=255&(e[6]?jr(i):Gt(i,0,255)),{r,g:n,b:i,a:s}}}function yS(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Pt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const ma=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ds=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function xS(t,e,s){const r=Ds(Pt(t.r)),n=Ds(Pt(t.g)),i=Ds(Pt(t.b));return{r:Xt(ma(r+s*(Ds(Pt(e.r))-r))),g:Xt(ma(n+s*(Ds(Pt(e.g))-n))),b:Xt(ma(i+s*(Ds(Pt(e.b))-i))),a:t.a+s*(e.a-t.a)}}function jn(t,e,s){if(t){let r=il(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*s,e===0?360:1)),r=ol(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function um(t,e){return t&&Object.assign(e||{},t)}function Pd(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Xt(t[3]))):(e=um(t,{r:0,g:0,b:0,a:1}),e.a=Xt(e.a)),e}function bS(t){return t.charAt(0)==="r"?pS(t):dS(t)}class Xr{constructor(e){if(e instanceof Xr)return e;const s=typeof e;let r;s==="object"?r=Pd(e):s==="string"&&(r=tS(e)||mS(e)||bS(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=um(this._rgb);return e&&(e.a=Pt(e.a)),e}set rgb(e){this._rgb=Pd(e)}rgbString(){return this._valid?yS(this._rgb):void 0}hexString(){return this._valid?rS(this._rgb):void 0}hslString(){return this._valid?uS(this._rgb):void 0}mix(e,s){if(e){const r=this.rgb,n=e.rgb;let i;const a=s===i?.5:s,o=2*a-1,l=r.a-n.a,d=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;i=1-d,r.r=255&d*r.r+i*n.r+.5,r.g=255&d*r.g+i*n.g+.5,r.b=255&d*r.b+i*n.b+.5,r.a=a*r.a+(1-a)*n.a,this.rgb=r}return this}interpolate(e,s){return e&&(this._rgb=xS(this._rgb,e._rgb,s)),this}clone(){return new Xr(this.rgb)}alpha(e){return this._rgb.a=Xt(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=dn(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return jn(this._rgb,2,e),this}darken(e){return jn(this._rgb,2,-e),this}saturate(e){return jn(this._rgb,1,e),this}desaturate(e){return jn(this._rgb,1,-e),this}rotate(e){return hS(this._rgb,e),this}}/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function St(){}const vS=(()=>{let t=0;return()=>t++})();function ke(t){return t===null||typeof t>"u"}function Ae(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function le(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function st(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function gt(t,e){return st(t)?t:e}function fe(t,e){return typeof t>"u"?e:t}const wS=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function pe(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function he(t,e,s,r){let n,i,a;if(Ae(t))for(i=t.length,n=0;n<i;n++)e.call(s,t[n],n);else if(le(t))for(a=Object.keys(t),i=a.length,n=0;n<i;n++)e.call(s,t[a[n]],a[n])}function ii(t,e){let s,r,n,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,r=t.length;s<r;++s)if(n=t[s],i=e[s],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function ai(t){if(Ae(t))return t.map(ai);if(le(t)){const e=Object.create(null),s=Object.keys(t),r=s.length;let n=0;for(;n<r;++n)e[s[n]]=ai(t[s[n]]);return e}return t}function fm(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function _S(t,e,s,r){if(!fm(t))return;const n=e[t],i=s[t];le(n)&&le(i)?Jr(n,i,r):e[t]=ai(i)}function Jr(t,e,s){const r=Ae(e)?e:[e],n=r.length;if(!le(t))return t;s=s||{};const i=s.merger||_S;let a;for(let o=0;o<n;++o){if(a=r[o],!le(a))continue;const l=Object.keys(a);for(let d=0,h=l.length;d<h;++d)i(l[d],t,a,s)}return t}function Ir(t,e){return Jr(t,e,{merger:kS})}function kS(t,e,s){if(!fm(t))return;const r=e[t],n=s[t];le(r)&&le(n)?Ir(r,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ai(n))}const Ed={"":t=>t,x:t=>t.x,y:t=>t.y};function jS(t){const e=t.split("."),s=[];let r="";for(const n of e)r+=n,r.endsWith("\\")?r=r.slice(0,-1)+".":(s.push(r),r="");return s}function SS(t){const e=jS(t);return s=>{for(const r of e){if(r==="")break;s=s&&s[r]}return s}}function oi(t,e){return(Ed[e]||(Ed[e]=SS(e)))(t)}function ll(t){return t.charAt(0).toUpperCase()+t.slice(1)}const li=t=>typeof t<"u",es=t=>typeof t=="function",Cd=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function NS(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const $e=Math.PI,Jt=2*$e,ci=Number.POSITIVE_INFINITY,TS=$e/180,et=$e/2,as=$e/4,Rd=$e*2/3,no=Math.log10,di=Math.sign;function Un(t,e,s){return Math.abs(t-e)<s}function Od(t){const e=Math.round(t);t=Un(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(no(t))),r=t/s;return(r<=1?1:r<=2?2:r<=5?5:10)*s}function AS(t){const e=[],s=Math.sqrt(t);let r;for(r=1;r<s;r++)t%r===0&&(e.push(r),e.push(t/r));return s===(s|0)&&e.push(s),e.sort((n,i)=>n-i).pop(),e}function hi(t){return!isNaN(parseFloat(t))&&isFinite(t)}function PS(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function ES(t,e,s){let r,n,i;for(r=0,n=t.length;r<n;r++)i=t[r][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function vs(t){return t*($e/180)}function CS(t){return t*(180/$e)}function Dd(t){if(!st(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function RS(t,e){const s=e.x-t.x,r=e.y-t.y,n=Math.sqrt(s*s+r*r);let i=Math.atan2(r,s);return i<-.5*$e&&(i+=Jt),{angle:i,distance:n}}function OS(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function os(t){return(t%Jt+Jt)%Jt}function DS(t,e,s,r){const n=os(t),i=os(e),a=os(s),o=os(i-n),l=os(a-n),d=os(n-i),h=os(n-a);return n===i||n===a||r&&i===a||o>l&&d<h}function lt(t,e,s){return Math.max(e,Math.min(s,t))}function MS(t){return lt(t,-32768,32767)}function $s(t,e,s,r=1e-6){return t>=Math.min(e,s)-r&&t<=Math.max(e,s)+r}function cl(t,e,s){s=s||(a=>t[a]<e);let r=t.length-1,n=0,i;for(;r-n>1;)i=n+r>>1,s(i)?n=i:r=i;return{lo:n,hi:r}}const io=(t,e,s,r)=>cl(t,s,r?n=>{const i=t[n][e];return i<s||i===s&&t[n+1][e]===s}:n=>t[n][e]<s),LS=(t,e,s)=>cl(t,s,r=>t[r][e]>=s);function IS(t,e,s){let r=0,n=t.length;for(;r<n&&t[r]<e;)r++;for(;n>r&&t[n-1]>s;)n--;return r>0||n<t.length?t.slice(r,n):t}const mm=["push","pop","shift","splice","unshift"];function FS(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),mm.forEach(s=>{const r="_onData"+ll(s),n=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const a=n.apply(this,i);return t._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...i)}),a}})})}function Md(t,e){const s=t._chartjs;if(!s)return;const r=s.listeners,n=r.indexOf(e);n!==-1&&r.splice(n,1),!(r.length>0)&&(mm.forEach(i=>{delete t[i]}),delete t._chartjs)}function BS(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const gm=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function pm(t,e){let s=[],r=!1;return function(...n){s=n,r||(r=!0,gm.call(window,()=>{r=!1,t.apply(e,s)}))}}function $S(t,e){let s;return function(...r){return e?(clearTimeout(s),s=setTimeout(t,e,r)):t.apply(this,r),e}}const dl=t=>t==="start"?"left":t==="end"?"right":"center",Me=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,VS=(t,e,s,r)=>t===(r?"left":"right")?s:t==="center"?(e+s)/2:e,Sn=t=>t===0||t===1,Ld=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Jt/s)),Id=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Jt/s)+1,Fr={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*et)+1,easeOutSine:t=>Math.sin(t*et),easeInOutSine:t=>-.5*(Math.cos($e*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Sn(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Sn(t)?t:Ld(t,.075,.3),easeOutElastic:t=>Sn(t)?t:Id(t,.075,.3),easeInOutElastic(t){return Sn(t)?t:t<.5?.5*Ld(t*2,.1125,.45):.5+.5*Id(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Fr.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Fr.easeInBounce(t*2)*.5:Fr.easeOutBounce(t*2-1)*.5+.5};function ym(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Fd(t){return ym(t)?t:new Xr(t)}function ga(t){return ym(t)?t:new Xr(t).saturate(.5).darken(.1).hexString()}const US=["x","y","borderWidth","radius","tension"],zS=["color","borderColor","backgroundColor"];function HS(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:zS},numbers:{type:"number",properties:US}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function WS(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Bd=new Map;function qS(t,e){e=e||{};const s=t+JSON.stringify(e);let r=Bd.get(s);return r||(r=new Intl.NumberFormat(t,e),Bd.set(s,r)),r}function xm(t,e,s){return qS(e,s).format(t)}const bm={values(t){return Ae(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const r=this.chart.options.locale;let n,i=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),i=KS(t,s)}const a=no(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:n,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),xm(t,r,l)},logarithmic(t,e,s){if(t===0)return"0";const r=s[e].significand||t/Math.pow(10,Math.floor(no(t)));return[1,2,3,5,10,15].includes(r)||e>.8*s.length?bm.numeric.call(this,t,e,s):""}};function KS(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var vm={formatters:bm};function GS(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:vm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ss=Object.create(null),ao=Object.create(null);function Br(t,e){if(!e)return t;const s=e.split(".");for(let r=0,n=s.length;r<n;++r){const i=s[r];t=t[i]||(t[i]=Object.create(null))}return t}function pa(t,e,s){return typeof e=="string"?Jr(Br(t,e),s):Jr(Br(t,""),e)}class YS{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,n)=>ga(n.backgroundColor),this.hoverBorderColor=(r,n)=>ga(n.borderColor),this.hoverColor=(r,n)=>ga(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return pa(this,e,s)}get(e){return Br(this,e)}describe(e,s){return pa(ao,e,s)}override(e,s){return pa(Ss,e,s)}route(e,s,r,n){const i=Br(this,e),a=Br(this,r),o="_"+s;Object.defineProperties(i,{[o]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const l=this[o],d=a[n];return le(l)?Object.assign({},d,l):fe(l,d)},set(l){this[o]=l}}})}apply(e){e.forEach(s=>s(this))}}var je=new YS({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[HS,WS,GS]);function XS(t){return!t||ke(t.size)||ke(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function $d(t,e,s,r,n){let i=e[n];return i||(i=e[n]=t.measureText(n).width,s.push(n)),i>r&&(r=i),r}function ls(t,e,s){const r=t.currentDevicePixelRatio,n=s!==0?Math.max(s/2,.5):0;return Math.round((e-n)*r)/r+n}function Vd(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Ud(t,e,s,r){wm(t,e,s,r,null)}function wm(t,e,s,r,n){let i,a,o,l,d,h,u,f;const m=e.pointStyle,p=e.rotation,g=e.radius;let y=(p||0)*TS;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,r),t.rotate(y),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),m){default:n?t.ellipse(s,r,n/2,g,0,0,Jt):t.arc(s,r,g,0,Jt),t.closePath();break;case"triangle":h=n?n/2:g,t.moveTo(s+Math.sin(y)*h,r-Math.cos(y)*g),y+=Rd,t.lineTo(s+Math.sin(y)*h,r-Math.cos(y)*g),y+=Rd,t.lineTo(s+Math.sin(y)*h,r-Math.cos(y)*g),t.closePath();break;case"rectRounded":d=g*.516,l=g-d,a=Math.cos(y+as)*l,u=Math.cos(y+as)*(n?n/2-d:l),o=Math.sin(y+as)*l,f=Math.sin(y+as)*(n?n/2-d:l),t.arc(s-u,r-o,d,y-$e,y-et),t.arc(s+f,r-a,d,y-et,y),t.arc(s+u,r+o,d,y,y+et),t.arc(s-f,r+a,d,y+et,y+$e),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=n?n/2:l,t.rect(s-h,r-l,2*h,2*l);break}y+=as;case"rectRot":u=Math.cos(y)*(n?n/2:g),a=Math.cos(y)*g,o=Math.sin(y)*g,f=Math.sin(y)*(n?n/2:g),t.moveTo(s-u,r-o),t.lineTo(s+f,r-a),t.lineTo(s+u,r+o),t.lineTo(s-f,r+a),t.closePath();break;case"crossRot":y+=as;case"cross":u=Math.cos(y)*(n?n/2:g),a=Math.cos(y)*g,o=Math.sin(y)*g,f=Math.sin(y)*(n?n/2:g),t.moveTo(s-u,r-o),t.lineTo(s+u,r+o),t.moveTo(s+f,r-a),t.lineTo(s-f,r+a);break;case"star":u=Math.cos(y)*(n?n/2:g),a=Math.cos(y)*g,o=Math.sin(y)*g,f=Math.sin(y)*(n?n/2:g),t.moveTo(s-u,r-o),t.lineTo(s+u,r+o),t.moveTo(s+f,r-a),t.lineTo(s-f,r+a),y+=as,u=Math.cos(y)*(n?n/2:g),a=Math.cos(y)*g,o=Math.sin(y)*g,f=Math.sin(y)*(n?n/2:g),t.moveTo(s-u,r-o),t.lineTo(s+u,r+o),t.moveTo(s+f,r-a),t.lineTo(s-f,r+a);break;case"line":a=n?n/2:Math.cos(y)*g,o=Math.sin(y)*g,t.moveTo(s-a,r-o),t.lineTo(s+a,r+o);break;case"dash":t.moveTo(s,r),t.lineTo(s+Math.cos(y)*(n?n/2:g),r+Math.sin(y)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function _m(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function hl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ul(t){t.restore()}function JS(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ke(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function ZS(t,e,s,r,n){if(n.strikethrough||n.underline){const i=t.measureText(r),a=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,l=s-i.actualBoundingBoxAscent,d=s+i.actualBoundingBoxDescent,h=n.strikethrough?(l+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(a,h),t.lineTo(o,h),t.stroke()}}function QS(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Zr(t,e,s,r,n,i={}){const a=Ae(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="";let l,d;for(t.save(),t.font=n.string,JS(t,i),l=0;l<a.length;++l)d=a[l],i.backdrop&&QS(t,i.backdrop),o&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ke(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,s,r,i.maxWidth)),t.fillText(d,s,r,i.maxWidth),ZS(t,s,r,d,i),r+=Number(n.lineHeight);t.restore()}function ui(t,e){const{x:s,y:r,w:n,h:i,radius:a}=e;t.arc(s+a.topLeft,r+a.topLeft,a.topLeft,-et,$e,!0),t.lineTo(s,r+i-a.bottomLeft),t.arc(s+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,$e,et,!0),t.lineTo(s+n-a.bottomRight,r+i),t.arc(s+n-a.bottomRight,r+i-a.bottomRight,a.bottomRight,et,0,!0),t.lineTo(s+n,r+a.topRight),t.arc(s+n-a.topRight,r+a.topRight,a.topRight,0,-et,!0),t.lineTo(s+a.topLeft,r)}const e1=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,t1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function s1(t,e){const s=(""+t).match(e1);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const r1=t=>+t||0;function km(t,e){const s={},r=le(e),n=r?Object.keys(e):e,i=le(t)?r?a=>fe(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of n)s[a]=r1(i(a));return s}function jm(t){return km(t,{top:"y",right:"x",bottom:"y",left:"x"})}function zs(t){return km(t,["topLeft","topRight","bottomLeft","bottomRight"])}function rt(t){const e=jm(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Fe(t,e){t=t||{},e=e||je.font;let s=fe(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let r=fe(t.style,e.style);r&&!(""+r).match(t1)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const n={family:fe(t.family,e.family),lineHeight:s1(fe(t.lineHeight,e.lineHeight),s),size:s,style:r,weight:fe(t.weight,e.weight),string:""};return n.string=XS(n),n}function Nn(t,e,s,r){let n,i,a;for(n=0,i=t.length;n<i;++n)if(a=t[n],a!==void 0&&a!==void 0)return a}function n1(t,e,s){const{min:r,max:n}=t,i=wS(e,(n-r)/2),a=(o,l)=>s&&o===0?0:o+l;return{min:a(r,-Math.abs(i)),max:a(n,i)}}function sr(t,e){return Object.assign(Object.create(t),e)}function fl(t,e=[""],s,r,n=()=>t[0]){const i=s||t;typeof r>"u"&&(r=Am("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:n,override:o=>fl([o,...t],e,i,r)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return Nm(o,l,()=>u1(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return Hd(o).includes(l)},ownKeys(o){return Hd(o)},set(o,l,d){const h=o._storage||(o._storage=n());return o[l]=h[l]=d,delete o._keys,!0}})}function Ys(t,e,s,r){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Sm(t,r),setContext:i=>Ys(t,i,s,r),override:i=>Ys(t.override(i),e,s,r)};return new Proxy(n,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,o){return Nm(i,a,()=>a1(i,a,o))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,o){return t[a]=o,delete i[a],!0}})}function Sm(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:r=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:s,indexable:r,isScriptable:es(s)?s:()=>s,isIndexable:es(r)?r:()=>r}}const i1=(t,e)=>t?t+ll(e):e,ml=(t,e)=>le(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Nm(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=s();return t[e]=r,r}function a1(t,e,s){const{_proxy:r,_context:n,_subProxy:i,_descriptors:a}=t;let o=r[e];return es(o)&&a.isScriptable(e)&&(o=o1(e,o,t,s)),Ae(o)&&o.length&&(o=l1(e,o,t,a.isIndexable)),ml(e,o)&&(o=Ys(o,n,i&&i[e],a)),o}function o1(t,e,s,r){const{_proxy:n,_context:i,_subProxy:a,_stack:o}=s;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(i,a||r);return o.delete(t),ml(t,l)&&(l=gl(n._scopes,n,t,l)),l}function l1(t,e,s,r){const{_proxy:n,_context:i,_subProxy:a,_descriptors:o}=s;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(le(e[0])){const l=e,d=n._scopes.filter(h=>h!==l);e=[];for(const h of l){const u=gl(d,n,t,h);e.push(Ys(u,i,a&&a[t],o))}}return e}function Tm(t,e,s){return es(t)?t(e,s):t}const c1=(t,e)=>t===!0?e:typeof t=="string"?oi(e,t):void 0;function d1(t,e,s,r,n){for(const i of e){const a=c1(s,i);if(a){t.add(a);const o=Tm(a._fallback,s,n);if(typeof o<"u"&&o!==s&&o!==r)return o}else if(a===!1&&typeof r<"u"&&s!==r)return null}return!1}function gl(t,e,s,r){const n=e._rootScopes,i=Tm(e._fallback,s,r),a=[...t,...n],o=new Set;o.add(r);let l=zd(o,a,s,i||s,r);return l===null||typeof i<"u"&&i!==s&&(l=zd(o,a,i,l,r),l===null)?!1:fl(Array.from(o),[""],n,i,()=>h1(e,s,r))}function zd(t,e,s,r,n){for(;s;)s=d1(t,e,s,r,n);return s}function h1(t,e,s){const r=t._getTarget();e in r||(r[e]={});const n=r[e];return Ae(n)&&le(s)?s:n||{}}function u1(t,e,s,r){let n;for(const i of e)if(n=Am(i1(i,t),s),typeof n<"u")return ml(t,n)?gl(s,r,t,n):n}function Am(t,e){for(const s of e){if(!s)continue;const r=s[t];if(typeof r<"u")return r}}function Hd(t){let e=t._keys;return e||(e=t._keys=f1(t._scopes)),e}function f1(t){const e=new Set;for(const s of t)for(const r of Object.keys(s).filter(n=>!n.startsWith("_")))e.add(r);return Array.from(e)}function Pm(){return typeof window<"u"&&typeof document<"u"}function pl(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function fi(t,e,s){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[s])):r=t,r}const $i=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function m1(t,e){return $i(t).getPropertyValue(e)}const g1=["top","right","bottom","left"];function _s(t,e,s){const r={};s=s?"-"+s:"";for(let n=0;n<4;n++){const i=g1[n];r[i]=parseFloat(t[e+"-"+i+s])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const p1=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function y1(t,e){const s=t.touches,r=s&&s.length?s[0]:t,{offsetX:n,offsetY:i}=r;let a=!1,o,l;if(p1(n,i,t.target))o=n,l=i;else{const d=e.getBoundingClientRect();o=r.clientX-d.left,l=r.clientY-d.top,a=!0}return{x:o,y:l,box:a}}function gs(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:r}=e,n=$i(s),i=n.boxSizing==="border-box",a=_s(n,"padding"),o=_s(n,"border","width"),{x:l,y:d,box:h}=y1(t,s),u=a.left+(h&&o.left),f=a.top+(h&&o.top);let{width:m,height:p}=e;return i&&(m-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-u)/m*s.width/r),y:Math.round((d-f)/p*s.height/r)}}function x1(t,e,s){let r,n;if(e===void 0||s===void 0){const i=pl(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const a=i.getBoundingClientRect(),o=$i(i),l=_s(o,"border","width"),d=_s(o,"padding");e=a.width-d.width-l.width,s=a.height-d.height-l.height,r=fi(o.maxWidth,i,"clientWidth"),n=fi(o.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:r||ci,maxHeight:n||ci}}const Tn=t=>Math.round(t*10)/10;function b1(t,e,s,r){const n=$i(t),i=_s(n,"margin"),a=fi(n.maxWidth,t,"clientWidth")||ci,o=fi(n.maxHeight,t,"clientHeight")||ci,l=x1(t,e,s);let{width:d,height:h}=l;if(n.boxSizing==="content-box"){const f=_s(n,"border","width"),m=_s(n,"padding");d-=m.width+f.width,h-=m.height+f.height}return d=Math.max(0,d-i.width),h=Math.max(0,r?d/r:h-i.height),d=Tn(Math.min(d,a,l.maxWidth)),h=Tn(Math.min(h,o,l.maxHeight)),d&&!h&&(h=Tn(d/2)),(e!==void 0||s!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,d=Tn(Math.floor(h*r))),{width:d,height:h}}function Wd(t,e,s){const r=e||1,n=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(s||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||a.height!==n||a.width!==i?(t.currentDevicePixelRatio=r,a.height=n,a.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const v1=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function qd(t,e){const s=m1(t,e),r=s&&s.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}const w1=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,r){return s-r},leftForLtr(s,r){return s-r}}},_1=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Hs(t,e,s){return t?w1(e,s):_1()}function Em(t,e){let s,r;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,r=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Cm(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class k1{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,r,n){const i=s.listeners[n],a=s.duration;i.forEach(o=>o({chart:e,initial:s.initial,numSteps:a,currentStep:Math.min(r-s.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=gm.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const i=r.items;let a=i.length-1,o=!1,l;for(;a>=0;--a)l=i[a],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(n.draw(),this._notify(n,r,e,"progress")),i.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let r=s.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,r)),r}listen(e,s,r){this._getAnims(e).listeners[s].push(r)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((r,n)=>Math.max(r,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const r=s.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Nt=new k1;const Kd="transparent",j1={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const r=Fd(t||Kd),n=r.valid&&Fd(e||Kd);return n&&n.valid?n.mix(r,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class S1{constructor(e,s,r,n){const i=s[r];n=Nn([e.to,n,i,e.from]);const a=Nn([e.from,i,n]);this._active=!0,this._fn=e.fn||j1[e.type||typeof a],this._easing=Fr[e.easing]||Fr.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=r,this._from=a,this._to=n,this._promises=void 0}active(){return this._active}update(e,s,r){if(this._active){this._notify(!1);const n=this._target[this._prop],i=r-this._start,a=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Nn([e.to,s,n,e.from]),this._from=Nn([e.from,n,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,r=this._duration,n=this._prop,i=this._from,a=this._loop,o=this._to;let l;if(this._active=i!==o&&(a||s<r),!this._active){this._target[n]=o,this._notify(!0);return}if(s<0){this._target[n]=i;return}l=s/r%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(i,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,r)=>{e.push({res:s,rej:r})})}_notify(e){const s=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][s]()}}class Rm{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!le(e))return;const s=Object.keys(je.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const i=e[n];if(!le(i))return;const a={};for(const o of s)a[o]=i[o];(Ae(i.properties)&&i.properties||[n]).forEach(o=>{(o===n||!r.has(o))&&r.set(o,a)})})}_animateOptions(e,s){const r=s.options,n=T1(e,r);if(!n)return[];const i=this._createAnimations(n,r);return r.$shared&&N1(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,s){const r=this._properties,n=[],i=e.$animations||(e.$animations={}),a=Object.keys(s),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const d=a[l];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(e,s));continue}const h=s[d];let u=i[d];const f=r.get(d);if(u)if(f&&u.active()){u.update(f,h,o);continue}else u.cancel();if(!f||!f.duration){e[d]=h;continue}i[d]=u=new S1(f,e,d,h),n.push(u)}return n}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const r=this._createAnimations(e,s);if(r.length)return Nt.add(this._chart,r),!0}}function N1(t,e){const s=[],r=Object.keys(e);for(let n=0;n<r.length;n++){const i=t[r[n]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function T1(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Gd(t,e){const s=t&&t.options||{},r=s.reverse,n=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:r?i:n,end:r?n:i}}function A1(t,e,s){if(s===!1)return!1;const r=Gd(t,s),n=Gd(e,s);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}function P1(t){let e,s,r,n;return le(t)?(e=t.top,s=t.right,r=t.bottom,n=t.left):e=s=r=n=t,{top:e,right:s,bottom:r,left:n,disabled:t===!1}}function Om(t,e){const s=[],r=t._getSortedDatasetMetas(e);let n,i;for(n=0,i=r.length;n<i;++n)s.push(r[n].index);return s}function Yd(t,e,s,r={}){const n=t.keys,i=r.mode==="single";let a,o,l,d;if(e!==null){for(a=0,o=n.length;a<o;++a){if(l=+n[a],l===s){if(r.all)continue;break}d=t.values[l],st(d)&&(i||e===0||di(e)===di(d))&&(e+=d)}return e}}function E1(t){const e=Object.keys(t),s=new Array(e.length);let r,n,i;for(r=0,n=e.length;r<n;++r)i=e[r],s[r]={x:i,y:t[i]};return s}function Xd(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function C1(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function R1(t){const{min:e,max:s,minDefined:r,maxDefined:n}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:n?s:Number.POSITIVE_INFINITY}}function O1(t,e,s){const r=t[e]||(t[e]={});return r[s]||(r[s]={})}function Jd(t,e,s,r){for(const n of e.getMatchingVisibleMetas(r).reverse()){const i=t[n.index];if(s&&i>0||!s&&i<0)return n.index}return null}function Zd(t,e){const{chart:s,_cachedMeta:r}=t,n=s._stacks||(s._stacks={}),{iScale:i,vScale:a,index:o}=r,l=i.axis,d=a.axis,h=C1(i,a,r),u=e.length;let f;for(let m=0;m<u;++m){const p=e[m],{[l]:g,[d]:y}=p,v=p._stacks||(p._stacks={});f=v[d]=O1(n,h,g),f[o]=y,f._top=Jd(f,a,!0,r.type),f._bottom=Jd(f,a,!1,r.type);const k=f._visualValues||(f._visualValues={});k[o]=y}}function ya(t,e){const s=t.scales;return Object.keys(s).filter(r=>s[r].axis===e).shift()}function D1(t,e){return sr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function M1(t,e,s){return sr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function gr(t,e){const s=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const n of e){const i=n._stacks;if(!i||i[r]===void 0||i[r][s]===void 0)return;delete i[r][s],i[r]._visualValues!==void 0&&i[r]._visualValues[s]!==void 0&&delete i[r]._visualValues[s]}}}const xa=t=>t==="reset"||t==="none",Qd=(t,e)=>e?t:Object.assign({},t),L1=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Om(s,!0),values:null};class zn{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Xd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&gr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,r=this.getDataset(),n=(u,f,m,p)=>u==="x"?f:u==="r"?p:m,i=s.xAxisID=fe(r.xAxisID,ya(e,"x")),a=s.yAxisID=fe(r.yAxisID,ya(e,"y")),o=s.rAxisID=fe(r.rAxisID,ya(e,"r")),l=s.indexAxis,d=s.iAxisID=n(l,i,a,o),h=s.vAxisID=n(l,a,i,o);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(a),s.rScale=this.getScaleForId(o),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Md(this._data,this),e._stacked&&gr(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),r=this._data;if(le(s))this._data=E1(s);else if(r!==s){if(r){Md(r,this);const n=this._cachedMeta;gr(n),n._parsed=[]}s&&Object.isExtensible(s)&&FS(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const i=s._stacked;s._stacked=Xd(s.vScale,s),s.stack!==r.stack&&(n=!0,gr(s),s.stack=r.stack),this._resyncElements(e),(n||i!==s._stacked)&&Zd(this,s._parsed)}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:r,_data:n}=this,{iScale:i,_stacked:a}=r,o=i.axis;let l=e===0&&s===n.length?!0:r._sorted,d=e>0&&r._parsed[e-1],h,u,f;if(this._parsing===!1)r._parsed=n,r._sorted=!0,f=n;else{Ae(n[e])?f=this.parseArrayData(r,n,e,s):le(n[e])?f=this.parseObjectData(r,n,e,s):f=this.parsePrimitiveData(r,n,e,s);const m=()=>u[o]===null||d&&u[o]<d[o];for(h=0;h<s;++h)r._parsed[h+e]=u=f[h],l&&(m()&&(l=!1),d=u);r._sorted=l}a&&Zd(this,f)}parsePrimitiveData(e,s,r,n){const{iScale:i,vScale:a}=e,o=i.axis,l=a.axis,d=i.getLabels(),h=i===a,u=new Array(n);let f,m,p;for(f=0,m=n;f<m;++f)p=f+r,u[f]={[o]:h||i.parse(d[p],p),[l]:a.parse(s[p],p)};return u}parseArrayData(e,s,r,n){const{xScale:i,yScale:a}=e,o=new Array(n);let l,d,h,u;for(l=0,d=n;l<d;++l)h=l+r,u=s[h],o[l]={x:i.parse(u[0],h),y:a.parse(u[1],h)};return o}parseObjectData(e,s,r,n){const{xScale:i,yScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,d=new Array(n);let h,u,f,m;for(h=0,u=n;h<u;++h)f=h+r,m=s[f],d[h]={x:i.parse(oi(m,o),f),y:a.parse(oi(m,l),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,r){const n=this.chart,i=this._cachedMeta,a=s[e.axis],o={keys:Om(n,!0),values:s._stacks[e.axis]._visualValues};return Yd(o,a,i.index,{mode:r})}updateRangeFromParsed(e,s,r,n){const i=r[s.axis];let a=i===null?NaN:i;const o=n&&r._stacks[s.axis];n&&o&&(n.values=o,a=Yd(n,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,s){const r=this._cachedMeta,n=r._parsed,i=r._sorted&&e===r.iScale,a=n.length,o=this._getOtherScale(e),l=L1(s,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=R1(o);let f,m;function p(){m=n[f];const g=m[o.axis];return!st(m[e.axis])||h>g||u<g}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(d,e,m,l),i));++f);if(i){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(d,e,m,l);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,r=[];let n,i,a;for(n=0,i=s.length;n<i;++n)a=s[n][e.axis],st(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,r=s.iScale,n=s.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=P1(fe(this.options.clip,A1(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,r=this._cachedMeta,n=r.data||[],i=s.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||n.length-o,d=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,i,o,l),h=o;h<o+l;++h){const u=n[h];u.hidden||(u.active&&d?a.push(u):u.draw(e,i))}for(h=0;h<a.length;++h)a[h].draw(e,i)}getStyle(e,s){const r=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,s,r){const n=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=M1(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=n.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=D1(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",r){const n=s==="active",i=this._cachedDataOpts,a=e+"-"+s,o=i[a],l=this.enableOptionSharing&&li(r);if(o)return Qd(o,l);const d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),u=n?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),h),m=Object.keys(je.elements[e]),p=()=>this.getContext(r,n,s),g=d.resolveNamedOptions(f,m,p,u);return g.$shared&&(g.$shared=l,i[a]=Object.freeze(Qd(g,l))),g}_resolveAnimations(e,s,r){const n=this.chart,i=this._cachedDataOpts,a=`animation-${s}`,o=i[a];if(o)return o;let l;if(n.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,s),f=h.getOptionScopes(this.getDataset(),u);l=h.createResolver(f,this.getContext(e,r,s))}const d=new Rm(n,l&&l.animations);return l&&l._cacheable&&(i[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||xa(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const r=this.resolveDataElementOptions(e,s),n=this._sharedOptions,i=this.getSharedOptions(r),a=this.includeOptions(s,i)||i!==n;return this.updateSharedOptions(i,s,r),{sharedOptions:i,includeOptions:a}}updateElement(e,s,r,n){xa(n)?Object.assign(e,r):this._resolveAnimations(s,n).update(e,r)}updateSharedOptions(e,s,r){e&&!xa(s)&&this._resolveAnimations(void 0,s).update(e,r)}_setStyle(e,s,r,n){e.active=n;const i=this.getStyle(s,n);this._resolveAnimations(s,r,n).update(e,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,s,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,r=this._cachedMeta.data;for(const[o,l,d]of this._syncList)this[o](l,d);this._syncList=[];const n=r.length,i=s.length,a=Math.min(i,n);a&&this.parse(0,a),i>n?this._insertElements(n,i-n,e):i<n&&this._removeElements(i,n-i)}_insertElements(e,s,r=!0){const n=this._cachedMeta,i=n.data,a=e+s;let o;const l=d=>{for(d.length+=s,o=d.length-1;o>=a;o--)d[o]=d[o-s]};for(l(i),o=e;o<a;++o)i[o]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(e,s),r&&this.updateElements(i,e,s,"reset")}updateElements(e,s,r,n){}_removeElements(e,s){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,s);r._stacked&&gr(r,n)}r.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,r,n]=e;this[s](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ie(zn,"defaults",{}),ie(zn,"datasetElementType",null),ie(zn,"dataElementType",null);function cs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class yl{constructor(e){ie(this,"options");this.options=e||{}}static override(e){Object.assign(yl.prototype,e)}init(){}formats(){return cs()}parse(){return cs()}format(){return cs()}add(){return cs()}diff(){return cs()}startOf(){return cs()}endOf(){return cs()}}var I1={_date:yl};function F1(t,e,s,r){const{controller:n,data:i,_sorted:a}=t,o=n._cachedMeta.iScale;if(o&&e===o.axis&&e!=="r"&&a&&i.length){const l=o._reversePixels?LS:io;if(r){if(n._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){const u=l(i,e,s-h),f=l(i,e,s+h);return{lo:u.lo,hi:f.hi}}}}else return l(i,e,s)}return{lo:0,hi:i.length-1}}function hn(t,e,s,r,n){const i=t.getSortedVisibleDatasetMetas(),a=s[e];for(let o=0,l=i.length;o<l;++o){const{index:d,data:h}=i[o],{lo:u,hi:f}=F1(i[o],e,a,n);for(let m=u;m<=f;++m){const p=h[m];p.skip||r(p,d,m)}}}function B1(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(r,n){const i=e?Math.abs(r.x-n.x):0,a=s?Math.abs(r.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function ba(t,e,s,r,n){const i=[];return!n&&!t.isPointInArea(e)||hn(t,s,e,function(o,l,d){!n&&!_m(o,t.chartArea,0)||o.inRange(e.x,e.y,r)&&i.push({element:o,datasetIndex:l,index:d})},!0),i}function $1(t,e,s,r){let n=[];function i(a,o,l){const{startAngle:d,endAngle:h}=a.getProps(["startAngle","endAngle"],r),{angle:u}=RS(a,{x:e.x,y:e.y});DS(u,d,h)&&n.push({element:a,datasetIndex:o,index:l})}return hn(t,s,e,i),n}function V1(t,e,s,r,n,i){let a=[];const o=B1(s);let l=Number.POSITIVE_INFINITY;function d(h,u,f){const m=h.inRange(e.x,e.y,n);if(r&&!m)return;const p=h.getCenterPoint(n);if(!(!!i||t.isPointInArea(p))&&!m)return;const y=o(e,p);y<l?(a=[{element:h,datasetIndex:u,index:f}],l=y):y===l&&a.push({element:h,datasetIndex:u,index:f})}return hn(t,s,e,d),a}function va(t,e,s,r,n,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!r?$1(t,e,s,n):V1(t,e,s,r,n,i)}function eh(t,e,s,r,n){const i=[],a=s==="x"?"inXRange":"inYRange";let o=!1;return hn(t,s,e,(l,d,h)=>{l[a](e[s],n)&&(i.push({element:l,datasetIndex:d,index:h}),o=o||l.inRange(e.x,e.y,n))}),r&&!o?[]:i}var U1={evaluateInteractionItems:hn,modes:{index(t,e,s,r){const n=gs(e,t),i=s.axis||"x",a=s.includeInvisible||!1,o=s.intersect?ba(t,n,i,r,a):va(t,n,i,!1,r,a),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const h=o[0].index,u=d.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:d.index,index:h})}),l):[]},dataset(t,e,s,r){const n=gs(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;let o=s.intersect?ba(t,n,i,r,a):va(t,n,i,!1,r,a);if(o.length>0){const l=o[0].datasetIndex,d=t.getDatasetMeta(l).data;o=[];for(let h=0;h<d.length;++h)o.push({element:d[h],datasetIndex:l,index:h})}return o},point(t,e,s,r){const n=gs(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;return ba(t,n,i,r,a)},nearest(t,e,s,r){const n=gs(e,t),i=s.axis||"xy",a=s.includeInvisible||!1;return va(t,n,i,s.intersect,r,a)},x(t,e,s,r){const n=gs(e,t);return eh(t,n,"x",s.intersect,r)},y(t,e,s,r){const n=gs(e,t);return eh(t,n,"y",s.intersect,r)}}};const Dm=["left","top","right","bottom"];function pr(t,e){return t.filter(s=>s.pos===e)}function th(t,e){return t.filter(s=>Dm.indexOf(s.pos)===-1&&s.box.axis===e)}function yr(t,e){return t.sort((s,r)=>{const n=e?r:s,i=e?s:r;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function z1(t){const e=[];let s,r,n,i,a,o;for(s=0,r=(t||[]).length;s<r;++s)n=t[s],{position:i,options:{stack:a,stackWeight:o=1}}=n,e.push({index:s,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:a&&i+a,stackWeight:o});return e}function H1(t){const e={};for(const s of t){const{stack:r,pos:n,stackWeight:i}=s;if(!r||!Dm.includes(n))continue;const a=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function W1(t,e){const s=H1(t),{vBoxMaxWidth:r,hBoxMaxHeight:n}=e;let i,a,o;for(i=0,a=t.length;i<a;++i){o=t[i];const{fullSize:l}=o.box,d=s[o.stack],h=d&&o.stackWeight/d.weight;o.horizontal?(o.width=h?h*r:l&&e.availableWidth,o.height=n):(o.width=r,o.height=h?h*n:l&&e.availableHeight)}return s}function q1(t){const e=z1(t),s=yr(e.filter(d=>d.box.fullSize),!0),r=yr(pr(e,"left"),!0),n=yr(pr(e,"right")),i=yr(pr(e,"top"),!0),a=yr(pr(e,"bottom")),o=th(e,"x"),l=th(e,"y");return{fullSize:s,leftAndTop:r.concat(i),rightAndBottom:n.concat(l).concat(a).concat(o),chartArea:pr(e,"chartArea"),vertical:r.concat(n).concat(l),horizontal:i.concat(a).concat(o)}}function sh(t,e,s,r){return Math.max(t[s],e[s])+Math.max(t[r],e[r])}function Mm(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function K1(t,e,s,r){const{pos:n,box:i}=s,a=t.maxPadding;if(!le(n)){s.size&&(t[n]-=s.size);const u=r[s.stack]||{size:0,count:1};u.size=Math.max(u.size,s.horizontal?i.height:i.width),s.size=u.size/u.count,t[n]+=s.size}i.getPadding&&Mm(a,i.getPadding());const o=Math.max(0,e.outerWidth-sh(a,t,"left","right")),l=Math.max(0,e.outerHeight-sh(a,t,"top","bottom")),d=o!==t.w,h=l!==t.h;return t.w=o,t.h=l,s.horizontal?{same:d,other:h}:{same:h,other:d}}function G1(t){const e=t.maxPadding;function s(r){const n=Math.max(e[r]-t[r],0);return t[r]+=n,n}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function Y1(t,e){const s=e.maxPadding;function r(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(a=>{i[a]=Math.max(e[a],s[a])}),i}return r(t?["left","right"]:["top","bottom"])}function Sr(t,e,s,r){const n=[];let i,a,o,l,d,h;for(i=0,a=t.length,d=0;i<a;++i){o=t[i],l=o.box,l.update(o.width||e.w,o.height||e.h,Y1(o.horizontal,e));const{same:u,other:f}=K1(e,s,o,r);d|=u&&n.length,h=h||f,l.fullSize||n.push(o)}return d&&Sr(n,e,s,r)||h}function An(t,e,s,r,n){t.top=s,t.left=e,t.right=e+r,t.bottom=s+n,t.width=r,t.height=n}function rh(t,e,s,r){const n=s.padding;let{x:i,y:a}=e;for(const o of t){const l=o.box,d=r[o.stack]||{count:1,placed:0,weight:1},h=o.stackWeight/d.weight||1;if(o.horizontal){const u=e.w*h,f=d.size||l.height;li(d.start)&&(a=d.start),l.fullSize?An(l,n.left,a,s.outerWidth-n.right-n.left,f):An(l,e.left+d.placed,a,u,f),d.start=a,d.placed+=u,a=l.bottom}else{const u=e.h*h,f=d.size||l.width;li(d.start)&&(i=d.start),l.fullSize?An(l,i,n.top,f,s.outerHeight-n.bottom-n.top):An(l,i,e.top+d.placed,f,u),d.start=i,d.placed+=u,i=l.right}}e.x=i,e.y=a}var tt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,r){if(!t)return;const n=rt(t.options.layout.padding),i=Math.max(e-n.width,0),a=Math.max(s-n.height,0),o=q1(t.boxes),l=o.vertical,d=o.horizontal;he(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const h=l.reduce((g,y)=>y.box.options&&y.box.options.display===!1?g:g+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:s,padding:n,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/h,hBoxMaxHeight:a/2}),f=Object.assign({},n);Mm(f,rt(r));const m=Object.assign({maxPadding:f,w:i,h:a,x:n.left,y:n.top},n),p=W1(l.concat(d),u);Sr(o.fullSize,m,u,p),Sr(l,m,u,p),Sr(d,m,u,p)&&Sr(l,m,u,p),G1(m),rh(o.leftAndTop,m,u,p),m.x+=m.w,m.y+=m.h,rh(o.rightAndBottom,m,u,p),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},he(o.chartArea,g=>{const y=g.box;Object.assign(y,t.chartArea),y.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Lm{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,r){}removeEventListener(e,s,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,r,n){return s=Math.max(0,s||e.width),r=r||e.height,{width:s,height:Math.max(0,n?Math.floor(s/n):r)}}isAttached(e){return!0}updateConfig(e){}}class X1 extends Lm{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Hn="$chartjs",J1={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},nh=t=>t===null||t==="";function Z1(t,e){const s=t.style,r=t.getAttribute("height"),n=t.getAttribute("width");if(t[Hn]={initial:{height:r,width:n,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",nh(n)){const i=qd(t,"width");i!==void 0&&(t.width=i)}if(nh(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=qd(t,"height");i!==void 0&&(t.height=i)}return t}const Im=v1?{passive:!0}:!1;function Q1(t,e,s){t.addEventListener(e,s,Im)}function eN(t,e,s){t.canvas.removeEventListener(e,s,Im)}function tN(t,e){const s=J1[t.type]||t.type,{x:r,y:n}=gs(t,e);return{type:s,chart:e,native:t,x:r!==void 0?r:null,y:n!==void 0?n:null}}function mi(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function sN(t,e,s){const r=t.canvas,n=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||mi(o.addedNodes,r),a=a&&!mi(o.removedNodes,r);a&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}function rN(t,e,s){const r=t.canvas,n=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||mi(o.removedNodes,r),a=a&&!mi(o.addedNodes,r);a&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}const Qr=new Map;let ih=0;function Fm(){const t=window.devicePixelRatio;t!==ih&&(ih=t,Qr.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function nN(t,e){Qr.size||window.addEventListener("resize",Fm),Qr.set(t,e)}function iN(t){Qr.delete(t),Qr.size||window.removeEventListener("resize",Fm)}function aN(t,e,s){const r=t.canvas,n=r&&pl(r);if(!n)return;const i=pm((o,l)=>{const d=n.clientWidth;s(o,l),d<n.clientWidth&&s()},window),a=new ResizeObserver(o=>{const l=o[0],d=l.contentRect.width,h=l.contentRect.height;d===0&&h===0||i(d,h)});return a.observe(n),nN(t,i),a}function wa(t,e,s){s&&s.disconnect(),e==="resize"&&iN(t)}function oN(t,e,s){const r=t.canvas,n=pm(i=>{t.ctx!==null&&s(tN(i,t))},t);return Q1(r,e,n),n}class lN extends Lm{acquireContext(e,s){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Z1(e,s),r):null}releaseContext(e){const s=e.canvas;if(!s[Hn])return!1;const r=s[Hn].initial;["height","width"].forEach(i=>{const a=r[i];ke(a)?s.removeAttribute(i):s.setAttribute(i,a)});const n=r.style||{};return Object.keys(n).forEach(i=>{s.style[i]=n[i]}),s.width=s.width,delete s[Hn],!0}addEventListener(e,s,r){this.removeEventListener(e,s);const n=e.$proxies||(e.$proxies={}),a={attach:sN,detach:rN,resize:aN}[s]||oN;n[s]=a(e,s,r)}removeEventListener(e,s){const r=e.$proxies||(e.$proxies={}),n=r[s];if(!n)return;({attach:wa,detach:wa,resize:wa}[s]||eN)(e,s,n),r[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,r,n){return b1(e,s,r,n)}isAttached(e){const s=pl(e);return!!(s&&s.isConnected)}}function cN(t){return!Pm()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?X1:lN}var Dn;let rr=(Dn=class{constructor(){ie(this,"x");ie(this,"y");ie(this,"active",!1);ie(this,"options");ie(this,"$animations")}tooltipPosition(e){const{x:s,y:r}=this.getProps(["x","y"],e);return{x:s,y:r}}hasValue(){return hi(this.x)&&hi(this.y)}getProps(e,s){const r=this.$animations;if(!s||!r)return this;const n={};return e.forEach(i=>{n[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),n}},ie(Dn,"defaults",{}),ie(Dn,"defaultRoutes"),Dn);function dN(t,e){const s=t.options.ticks,r=hN(t),n=Math.min(s.maxTicksLimit||r,r),i=s.major.enabled?fN(e):[],a=i.length,o=i[0],l=i[a-1],d=[];if(a>n)return mN(e,d,i,a/n),d;const h=uN(i,e,n);if(a>0){let u,f;const m=a>1?Math.round((l-o)/(a-1)):null;for(Pn(e,d,h,ke(m)?0:o-m,o),u=0,f=a-1;u<f;u++)Pn(e,d,h,i[u],i[u+1]);return Pn(e,d,h,l,ke(m)?e.length:l+m),d}return Pn(e,d,h),d}function hN(t){const e=t.options.offset,s=t._tickSize(),r=t._length/s+(e?0:1),n=t._maxLength/s;return Math.floor(Math.min(r,n))}function uN(t,e,s){const r=gN(t),n=e.length/s;if(!r)return Math.max(n,1);const i=AS(r);for(let a=0,o=i.length-1;a<o;a++){const l=i[a];if(l>n)return l}return Math.max(n,1)}function fN(t){const e=[];let s,r;for(s=0,r=t.length;s<r;s++)t[s].major&&e.push(s);return e}function mN(t,e,s,r){let n=0,i=s[0],a;for(r=Math.ceil(r),a=0;a<t.length;a++)a===i&&(e.push(t[a]),n++,i=s[n*r])}function Pn(t,e,s,r,n){const i=fe(r,0),a=Math.min(fe(n,t.length),t.length);let o=0,l,d,h;for(s=Math.ceil(s),n&&(l=n-r,s=l/Math.floor(l/s)),h=i;h<0;)o++,h=Math.round(i+o*s);for(d=Math.max(i,0);d<a;d++)d===h&&(e.push(t[d]),o++,h=Math.round(i+o*s))}function gN(t){const e=t.length;let s,r;if(e<2)return!1;for(r=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==r)return!1;return r}const pN=t=>t==="left"?"right":t==="right"?"left":t,ah=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,oh=(t,e)=>Math.min(e||t,t);function lh(t,e){const s=[],r=t.length/e,n=t.length;let i=0;for(;i<n;i+=r)s.push(t[Math.floor(i)]);return s}function yN(t,e,s){const r=t.ticks.length,n=Math.min(e,r-1),i=t._startPixel,a=t._endPixel,o=1e-6;let l=t.getPixelForTick(n),d;if(!(s&&(r===1?d=Math.max(l-i,a-l):e===0?d=(t.getPixelForTick(1)-l)/2:d=(l-t.getPixelForTick(n-1))/2,l+=n<e?d:-d,l<i-o||l>a+o)))return l}function xN(t,e){he(t,s=>{const r=s.gc,n=r.length/2;let i;if(n>e){for(i=0;i<n;++i)delete s.data[r[i]];r.splice(0,n)}})}function xr(t){return t.drawTicks?t.tickLength:0}function ch(t,e){if(!t.display)return 0;const s=Fe(t.font,e),r=rt(t.padding);return(Ae(t.text)?t.text.length:1)*s.lineHeight+r.height}function bN(t,e){return sr(t,{scale:e,type:"scale"})}function vN(t,e,s){return sr(t,{tick:s,index:e,type:"tick"})}function wN(t,e,s){let r=dl(t);return(s&&e!=="right"||!s&&e==="right")&&(r=pN(r)),r}function _N(t,e,s,r){const{top:n,left:i,bottom:a,right:o,chart:l}=t,{chartArea:d,scales:h}=l;let u=0,f,m,p;const g=a-n,y=o-i;if(t.isHorizontal()){if(m=Me(r,i,o),le(s)){const v=Object.keys(s)[0],k=s[v];p=h[v].getPixelForValue(k)+g-e}else s==="center"?p=(d.bottom+d.top)/2+g-e:p=ah(t,s,e);f=o-i}else{if(le(s)){const v=Object.keys(s)[0],k=s[v];m=h[v].getPixelForValue(k)-y+e}else s==="center"?m=(d.left+d.right)/2-y+e:m=ah(t,s,e);p=Me(r,a,n),u=s==="left"?-et:et}return{titleX:m,titleY:p,maxWidth:f,rotation:u}}class nr extends rr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:r,_suggestedMax:n}=this;return e=gt(e,Number.POSITIVE_INFINITY),s=gt(s,Number.NEGATIVE_INFINITY),r=gt(r,Number.POSITIVE_INFINITY),n=gt(n,Number.NEGATIVE_INFINITY),{min:gt(e,r),max:gt(s,n),minDefined:st(e),maxDefined:st(s)}}getMinMax(e){let{min:s,max:r,minDefined:n,maxDefined:i}=this.getUserBounds(),a;if(n&&i)return{min:s,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,d=o.length;l<d;++l)a=o[l].controller.getMinMax(this,e),n||(s=Math.min(s,a.min)),i||(r=Math.max(r,a.max));return s=i&&s>r?r:s,r=n&&s>r?s:r,{min:gt(s,gt(r,s)),max:gt(r,gt(s,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){pe(this.options.beforeUpdate,[this])}update(e,s,r){const{beginAtZero:n,grace:i,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=n1(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?lh(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=dN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,r;this.isHorizontal()?(s=this.left,r=this.right):(s=this.top,r=this.bottom,e=!e),this._startPixel=s,this._endPixel=r,this._reversePixels=e,this._length=r-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){pe(this.options.afterUpdate,[this])}beforeSetDimensions(){pe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){pe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),pe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){pe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let r,n,i;for(r=0,n=e.length;r<n;r++)i=e[r],i.label=pe(s.callback,[i.value,r,e],this)}afterTickToLabelConversion(){pe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){pe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,r=oh(this.ticks.length,e.ticks.maxTicksLimit),n=s.minRotation||0,i=s.maxRotation;let a=n,o,l,d;if(!this._isVisible()||!s.display||n>=i||r<=1||!this.isHorizontal()){this.labelRotation=n;return}const h=this._getLabelSizes(),u=h.widest.width,f=h.highest.height,m=lt(this.chart.width-u,0,this.maxWidth);o=e.offset?this.maxWidth/r:m/(r-1),u+6>o&&(o=m/(r-(e.offset?.5:1)),l=this.maxHeight-xr(e.grid)-s.padding-ch(e.title,this.chart.options.font),d=Math.sqrt(u*u+f*f),a=CS(Math.min(Math.asin(lt((h.highest.height+6)/o,-1,1)),Math.asin(lt(l/d,-1,1))-Math.asin(lt(f/d,-1,1)))),a=Math.max(n,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){pe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){pe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:r,title:n,grid:i}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=ch(n,s.options.font);if(o?(e.width=this.maxWidth,e.height=xr(i)+l):(e.height=this.maxHeight,e.width=xr(i)+l),r.display&&this.ticks.length){const{first:d,last:h,widest:u,highest:f}=this._getLabelSizes(),m=r.padding*2,p=vs(this.labelRotation),g=Math.cos(p),y=Math.sin(p);if(o){const v=r.mirror?0:y*u.width+g*f.height;e.height=Math.min(this.maxHeight,e.height+v+m)}else{const v=r.mirror?0:g*u.width+y*f.height;e.width=Math.min(this.maxWidth,e.width+v+m)}this._calculatePadding(d,h,y,g)}}this._handleMargins(),o?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,r,n){const{ticks:{align:i,padding:a},position:o}=this.options,l=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?d?(f=n*e.width,m=r*s.height):(f=r*e.height,m=n*s.width):i==="start"?m=s.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=s.width/2),this.paddingLeft=Math.max((f-h+a)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-u+a)*this.width/(this.width-u),0)}else{let h=s.height/2,u=e.height/2;i==="start"?(h=0,u=e.height):i==="end"&&(h=s.height,u=0),this.paddingTop=h+a,this.paddingBottom=u+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){pe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,r;for(s=0,r=e.length;s<r;s++)ke(e[s].label)&&(e.splice(s,1),r--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let r=this.ticks;s<r.length&&(r=lh(r,s)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,r){const{ctx:n,_longestTextCache:i}=this,a=[],o=[],l=Math.floor(s/oh(s,r));let d=0,h=0,u,f,m,p,g,y,v,k,S,C,T;for(u=0;u<s;u+=l){if(p=e[u].label,g=this._resolveTickFontOptions(u),n.font=y=g.string,v=i[y]=i[y]||{data:{},gc:[]},k=g.lineHeight,S=C=0,!ke(p)&&!Ae(p))S=$d(n,v.data,v.gc,S,p),C=k;else if(Ae(p))for(f=0,m=p.length;f<m;++f)T=p[f],!ke(T)&&!Ae(T)&&(S=$d(n,v.data,v.gc,S,T),C+=k);a.push(S),o.push(C),d=Math.max(S,d),h=Math.max(C,h)}xN(i,s);const O=a.indexOf(d),M=o.indexOf(h),b=x=>({width:a[x]||0,height:o[x]||0});return{first:b(0),last:b(s-1),widest:b(O),highest:b(M),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return MS(this._alignToPixels?ls(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const r=s[e];return r.$context||(r.$context=vN(this.getContext(),e,r))}return this.$context||(this.$context=bN(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=vs(this.labelRotation),r=Math.abs(Math.cos(s)),n=Math.abs(Math.sin(s)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,l=i?i.highest.height+a:0;return this.isHorizontal()?l*r>o*n?o/r:l/n:l*n<o*r?l/r:o/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,r=this.chart,n=this.options,{grid:i,position:a,border:o}=n,l=i.offset,d=this.isHorizontal(),u=this.ticks.length+(l?1:0),f=xr(i),m=[],p=o.setContext(this.getContext()),g=p.display?p.width:0,y=g/2,v=function(A){return ls(r,A,g)};let k,S,C,T,O,M,b,x,_,E,N,B;if(a==="top")k=v(this.bottom),M=this.bottom-f,x=k-y,E=v(e.top)+y,B=e.bottom;else if(a==="bottom")k=v(this.top),E=e.top,B=v(e.bottom)-y,M=k+y,x=this.top+f;else if(a==="left")k=v(this.right),O=this.right-f,b=k-y,_=v(e.left)+y,N=e.right;else if(a==="right")k=v(this.left),_=e.left,N=v(e.right)-y,O=k+y,b=this.left+f;else if(s==="x"){if(a==="center")k=v((e.top+e.bottom)/2+.5);else if(le(a)){const A=Object.keys(a)[0],R=a[A];k=v(this.chart.scales[A].getPixelForValue(R))}E=e.top,B=e.bottom,M=k+y,x=M+f}else if(s==="y"){if(a==="center")k=v((e.left+e.right)/2);else if(le(a)){const A=Object.keys(a)[0],R=a[A];k=v(this.chart.scales[A].getPixelForValue(R))}O=k-y,b=O-f,_=e.left,N=e.right}const L=fe(n.ticks.maxTicksLimit,u),w=Math.max(1,Math.ceil(u/L));for(S=0;S<u;S+=w){const A=this.getContext(S),R=i.setContext(A),V=o.setContext(A),I=R.lineWidth,$=R.color,z=V.dash||[],G=V.dashOffset,H=R.tickWidth,X=R.tickColor,se=R.tickBorderDash||[],P=R.tickBorderDashOffset;C=yN(this,S,l),C!==void 0&&(T=ls(r,C,I),d?O=b=_=N=T:M=x=E=B=T,m.push({tx1:O,ty1:M,tx2:b,ty2:x,x1:_,y1:E,x2:N,y2:B,width:I,color:$,borderDash:z,borderDashOffset:G,tickWidth:H,tickColor:X,tickBorderDash:se,tickBorderDashOffset:P}))}return this._ticksLength=u,this._borderValue=k,m}_computeLabelItems(e){const s=this.axis,r=this.options,{position:n,ticks:i}=r,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:d,padding:h,mirror:u}=i,f=xr(r.grid),m=f+h,p=u?-h:m,g=-vs(this.labelRotation),y=[];let v,k,S,C,T,O,M,b,x,_,E,N,B="middle";if(n==="top")O=this.bottom-p,M=this._getXAxisLabelAlignment();else if(n==="bottom")O=this.top+p,M=this._getXAxisLabelAlignment();else if(n==="left"){const w=this._getYAxisLabelAlignment(f);M=w.textAlign,T=w.x}else if(n==="right"){const w=this._getYAxisLabelAlignment(f);M=w.textAlign,T=w.x}else if(s==="x"){if(n==="center")O=(e.top+e.bottom)/2+m;else if(le(n)){const w=Object.keys(n)[0],A=n[w];O=this.chart.scales[w].getPixelForValue(A)+m}M=this._getXAxisLabelAlignment()}else if(s==="y"){if(n==="center")T=(e.left+e.right)/2-m;else if(le(n)){const w=Object.keys(n)[0],A=n[w];T=this.chart.scales[w].getPixelForValue(A)}M=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(l==="start"?B="top":l==="end"&&(B="bottom"));const L=this._getLabelSizes();for(v=0,k=o.length;v<k;++v){S=o[v],C=S.label;const w=i.setContext(this.getContext(v));b=this.getPixelForTick(v)+i.labelOffset,x=this._resolveTickFontOptions(v),_=x.lineHeight,E=Ae(C)?C.length:1;const A=E/2,R=w.color,V=w.textStrokeColor,I=w.textStrokeWidth;let $=M;a?(T=b,M==="inner"&&(v===k-1?$=this.options.reverse?"left":"right":v===0?$=this.options.reverse?"right":"left":$="center"),n==="top"?d==="near"||g!==0?N=-E*_+_/2:d==="center"?N=-L.highest.height/2-A*_+_:N=-L.highest.height+_/2:d==="near"||g!==0?N=_/2:d==="center"?N=L.highest.height/2-A*_:N=L.highest.height-E*_,u&&(N*=-1),g!==0&&!w.showLabelBackdrop&&(T+=_/2*Math.sin(g))):(O=b,N=(1-E)*_/2);let z;if(w.showLabelBackdrop){const G=rt(w.backdropPadding),H=L.heights[v],X=L.widths[v];let se=N-G.top,P=0-G.left;switch(B){case"middle":se-=H/2;break;case"bottom":se-=H;break}switch(M){case"center":P-=X/2;break;case"right":P-=X;break}z={left:P,top:se,width:X+G.width,height:H+G.height,color:w.backdropColor}}y.push({label:C,font:x,textOffset:N,options:{rotation:g,color:R,strokeColor:V,strokeWidth:I,textAlign:$,textBaseline:B,translation:[T,O],backdrop:z}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-vs(this.labelRotation))return e==="top"?"left":"right";let n="center";return s.align==="start"?n="left":s.align==="end"?n="right":s.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:r,mirror:n,padding:i}}=this.options,a=this._getLabelSizes(),o=e+i,l=a.widest.width;let d,h;return s==="left"?n?(h=this.right+i,r==="near"?d="left":r==="center"?(d="center",h+=l/2):(d="right",h+=l)):(h=this.right-o,r==="near"?d="right":r==="center"?(d="center",h-=l/2):(d="left",h=this.left)):s==="right"?n?(h=this.left+i,r==="near"?d="right":r==="center"?(d="center",h-=l/2):(d="left",h-=l)):(h=this.left+o,r==="near"?d="left":r==="center"?(d="center",h+=l/2):(d="right",h=this.right)):d="right",{textAlign:d,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:r,top:n,width:i,height:a}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(r,n,i,a),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const n=this.ticks.findIndex(i=>i.value===e);return n>=0?s.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const s=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const o=(l,d,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(s.display)for(i=0,a=n.length;i<a;++i){const l=n[i];s.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),s.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:r,grid:n}}=this,i=r.setContext(this.getContext()),a=r.display?i.width:0;if(!a)return;const o=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,h,u,f;this.isHorizontal()?(d=ls(e,this.left,a)-a/2,h=ls(e,this.right,o)+o/2,u=f=l):(u=ls(e,this.top,a)-a/2,f=ls(e,this.bottom,o)+o/2,d=h=l),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(d,u),s.lineTo(h,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,n=this._computeLabelArea();n&&hl(r,n);const i=this.getLabelItems(e);for(const a of i){const o=a.options,l=a.font,d=a.label,h=a.textOffset;Zr(r,d,0,h,l,o)}n&&ul(r)}drawTitle(){const{ctx:e,options:{position:s,title:r,reverse:n}}=this;if(!r.display)return;const i=Fe(r.font),a=rt(r.padding),o=r.align;let l=i.lineHeight/2;s==="bottom"||s==="center"||le(s)?(l+=a.bottom,Ae(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=a.top;const{titleX:d,titleY:h,maxWidth:u,rotation:f}=_N(this,l,s,o);Zr(e,r.text,0,0,i,{color:r.color,maxWidth:u,rotation:f,textAlign:wN(o,s,n),textBaseline:"middle",translation:[d,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,r=fe(e.grid&&e.grid.z,-1),n=fe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==nr.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let i,a;for(i=0,a=s.length;i<a;++i){const o=s[i];o[r]===this.id&&(!e||o.type===e)&&n.push(o)}return n}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Fe(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class En{constructor(e,s,r){this.type=e,this.scope=s,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let r;SN(s)&&(r=this.register(s));const n=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in n||(n[i]=e,kN(e,a,r),this.override&&je.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const s=this.items,r=e.id,n=this.scope;r in s&&delete s[r],n&&r in je[n]&&(delete je[n][r],this.override&&delete Ss[r])}}function kN(t,e,s){const r=Jr(Object.create(null),[s?je.get(s):{},je.get(e),t.defaults]);je.set(e,r),t.defaultRoutes&&jN(e,t.defaultRoutes),t.descriptors&&je.describe(e,t.descriptors)}function jN(t,e){Object.keys(e).forEach(s=>{const r=s.split("."),n=r.pop(),i=[t].concat(r).join("."),a=e[s].split("."),o=a.pop(),l=a.join(".");je.route(i,n,l,o)})}function SN(t){return"id"in t&&"defaults"in t}class NN{constructor(){this.controllers=new En(zn,"datasets",!0),this.elements=new En(rr,"elements"),this.plugins=new En(Object,"plugins"),this.scales=new En(nr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,r){[...s].forEach(n=>{const i=r||this._getRegistryForType(n);r||i.isForType(n)||i===this.plugins&&n.id?this._exec(e,i,n):he(n,a=>{const o=r||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,s,r){const n=ll(e);pe(r["before"+n],[],r),s[e](r),pe(r["after"+n],[],r)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const r=this._typedRegistries[s];if(r.isForType(e))return r}return this.plugins}_get(e,s,r){const n=s.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return n}}var xt=new NN;class TN{constructor(){this._init=[]}notify(e,s,r,n){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=n?this._descriptors(e).filter(n):this._descriptors(e),a=this._notify(i,e,s,r);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,s,r,n){n=n||{};for(const i of e){const a=i.plugin,o=a[r],l=[s,n,i.options];if(pe(o,l,a)===!1&&n.cancelable)return!1}return!0}invalidate(){ke(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const r=e&&e.config,n=fe(r.options&&r.options.plugins,{}),i=AN(r);return n===!1&&!s?[]:EN(e,i,n,s)}_notifyStateChanges(e){const s=this._oldCache||[],r=this._cache,n=(i,a)=>i.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(n(s,r),e,"stop"),this._notify(n(r,s),e,"start")}}function AN(t){const e={},s=[],r=Object.keys(xt.plugins.items);for(let i=0;i<r.length;i++)s.push(xt.getPlugin(r[i]));const n=t.plugins||[];for(let i=0;i<n.length;i++){const a=n[i];s.indexOf(a)===-1&&(s.push(a),e[a.id]=!0)}return{plugins:s,localIds:e}}function PN(t,e){return!e&&t===!1?null:t===!0?{}:t}function EN(t,{plugins:e,localIds:s},r,n){const i=[],a=t.getContext();for(const o of e){const l=o.id,d=PN(r[l],n);d!==null&&i.push({plugin:o,options:CN(t.config,{plugin:o,local:s[l]},d,a)})}return i}function CN(t,{plugin:e,local:s},r,n){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(r,i);return s&&e.defaults&&a.push(e.defaults),t.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function oo(t,e){const s=je.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function RN(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function ON(t,e){return t===e?"_index_":"_value_"}function dh(t){if(t==="x"||t==="y"||t==="r")return t}function DN(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function lo(t,...e){if(dh(t))return t;for(const s of e){const r=s.axis||DN(s.position)||t.length>1&&dh(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function hh(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function MN(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(s.length)return hh(t,"x",s[0])||hh(t,"y",s[0])}return{}}function LN(t,e){const s=Ss[t.type]||{scales:{}},r=e.scales||{},n=oo(t.type,e),i=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!le(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=lo(a,o,MN(a,t),je.scales[o.type]),d=ON(l,n),h=s.scales||{};i[a]=Ir(Object.create(null),[{axis:l},o,h[l],h[d]])}),t.data.datasets.forEach(a=>{const o=a.type||t.type,l=a.indexAxis||oo(o,e),h=(Ss[o]||{}).scales||{};Object.keys(h).forEach(u=>{const f=RN(u,l),m=a[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),Ir(i[m],[{axis:f},r[m],h[u]])})}),Object.keys(i).forEach(a=>{const o=i[a];Ir(o,[je.scales[o.type],je.scale])}),i}function Bm(t){const e=t.options||(t.options={});e.plugins=fe(e.plugins,{}),e.scales=LN(t,e)}function $m(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function IN(t){return t=t||{},t.data=$m(t.data),Bm(t),t}const uh=new Map,Vm=new Set;function Cn(t,e){let s=uh.get(t);return s||(s=e(),uh.set(t,s),Vm.add(s)),s}const br=(t,e,s)=>{const r=oi(e,s);r!==void 0&&t.add(r)};class FN{constructor(e){this._config=IN(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=$m(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Bm(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Cn(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Cn(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Cn(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,r=this.type;return Cn(`${r}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const r=this._scopeCache;let n=r.get(e);return(!n||s)&&(n=new Map,r.set(e,n)),n}getOptionScopes(e,s,r){const{options:n,type:i}=this,a=this._cachedScopes(e,r),o=a.get(s);if(o)return o;const l=new Set;s.forEach(h=>{e&&(l.add(e),h.forEach(u=>br(l,e,u))),h.forEach(u=>br(l,n,u)),h.forEach(u=>br(l,Ss[i]||{},u)),h.forEach(u=>br(l,je,u)),h.forEach(u=>br(l,ao,u))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),Vm.has(s)&&a.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,Ss[s]||{},je.datasets[s]||{},{type:s},je,ao]}resolveNamedOptions(e,s,r,n=[""]){const i={$shared:!0},{resolver:a,subPrefixes:o}=fh(this._resolverCache,e,n);let l=a;if($N(a,s)){i.$shared=!1,r=es(r)?r():r;const d=this.createResolver(e,r,o);l=Ys(a,r,d)}for(const d of s)i[d]=l[d];return i}createResolver(e,s,r=[""],n){const{resolver:i}=fh(this._resolverCache,e,r);return le(s)?Ys(i,s,void 0,n):i}}function fh(t,e,s){let r=t.get(e);r||(r=new Map,t.set(e,r));const n=s.join();let i=r.get(n);return i||(i={resolver:fl(e,s),subPrefixes:s.filter(o=>!o.toLowerCase().includes("hover"))},r.set(n,i)),i}const BN=t=>le(t)&&Object.getOwnPropertyNames(t).reduce((e,s)=>e||es(t[s]),!1);function $N(t,e){const{isScriptable:s,isIndexable:r}=Sm(t);for(const n of e){const i=s(n),a=r(n),o=(a||i)&&t[n];if(i&&(es(o)||BN(o))||a&&Ae(o))return!0}return!1}var VN="4.3.0";const UN=["top","bottom","left","right","chartArea"];function mh(t,e){return t==="top"||t==="bottom"||UN.indexOf(t)===-1&&e==="x"}function gh(t,e){return function(s,r){return s[t]===r[t]?s[e]-r[e]:s[t]-r[t]}}function ph(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),pe(s&&s.onComplete,[t],e)}function zN(t){const e=t.chart,s=e.options.animation;pe(s&&s.onProgress,[t],e)}function Um(t){return Pm()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Wn={},yh=t=>{const e=Um(t);return Object.values(Wn).filter(s=>s.canvas===e).pop()};function HN(t,e,s){const r=Object.keys(t);for(const n of r){const i=+n;if(i>=e){const a=t[n];delete t[n],(s>0||i>e)&&(t[i+s]=a)}}}function WN(t,e,s,r){return!s||t.type==="mouseout"?null:r?e:t}function qN(t){const{xScale:e,yScale:s}=t;if(e&&s)return{left:e.left,right:e.right,top:s.top,bottom:s.bottom}}class Ht{static register(...e){xt.add(...e),xh()}static unregister(...e){xt.remove(...e),xh()}constructor(e,s){const r=this.config=new FN(s),n=Um(e),i=yh(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||cN(n)),this.platform.updateConfig(r);const o=this.platform.acquireContext(n,a.aspectRatio),l=o&&o.canvas,d=l&&l.height,h=l&&l.width;if(this.id=vS(),this.ctx=o,this.canvas=l,this.width=h,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new TN,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=$S(u=>this.update(u),a.resizeDelay||0),this._dataChanges=[],Wn[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Nt.listen(this,"complete",ph),Nt.listen(this,"progress",zN),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:r,height:n,_aspectRatio:i}=this;return ke(e)?s&&i?i:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return xt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Wd(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Vd(this.canvas,this.ctx),this}stop(){return Nt.stop(this),this}resize(e,s){Nt.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const r=this.options,n=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(n,e,s,i),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Wd(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),pe(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};he(s,(r,n)=>{r.id=n})}buildOrUpdateScales(){const e=this.options,s=e.scales,r=this.scales,n=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let i=[];s&&(i=i.concat(Object.keys(s).map(a=>{const o=s[a],l=lo(a,o),d=l==="r",h=l==="x";return{options:o,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),he(i,a=>{const o=a.options,l=o.id,d=lo(l,o),h=fe(o.type,a.dtype);(o.position===void 0||mh(o.position,d)!==mh(a.dposition))&&(o.position=a.dposition),n[l]=!0;let u=null;if(l in r&&r[l].type===h)u=r[l];else{const f=xt.getScale(h);u=new f({id:l,type:h,ctx:this.ctx,chart:this}),r[u.id]=u}u.init(o,e)}),he(n,(a,o)=>{a||delete r[o]}),he(r,a=>{tt.configure(this,a,a.options),tt.addBox(this,a)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,r=e.length;if(e.sort((n,i)=>n.index-i.index),r>s){for(let n=s;n<r;++n)this._destroyDatasetMeta(n);e.splice(s,r-s)}this._sortedMetasets=e.slice(0).sort(gh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((r,n)=>{s.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=s.length;r<n;r++){const i=s[r];let a=this.getDatasetMeta(r);const o=i.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=i.indexAxis||oo(o,this.options),a.order=i.order||0,a.index=r,a.label=""+i.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const l=xt.getController(o),{datasetElementType:d,dataElementType:h}=je.datasets[o];Object.assign(l,{dataElementType:xt.getElement(h),datasetElementType:d&&xt.getElement(d)}),a.controller=new l(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){he(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const r=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,h=this.data.datasets.length;d<h;d++){const{controller:u}=this.getDatasetMeta(d),f=!n&&i.indexOf(u)===-1;u.buildOrUpdateElements(f),a=Math.max(+u.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),n||he(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(gh("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){he(this.scales,e=>{tt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Cd(s,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:i}of s){const a=r==="_removeElements"?-i:i;HN(e,n,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,r=i=>new Set(e.filter(a=>a[0]===i).map((a,o)=>o+","+a.splice(1).join(","))),n=r(0);for(let i=1;i<s;i++)if(!Cd(n,r(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;tt.update(this,this.width,this.height,e);const s=this.chartArea,r=s.width<=0||s.height<=0;this._layers=[],he(this.boxes,n=>{r&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,r=this.data.datasets.length;s<r;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,r=this.data.datasets.length;s<r;++s)this._updateDataset(s,es(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(r.controller._update(s),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Nt.has(this)?this.attached&&!Nt.running(this)&&Nt.start(this):(this.draw(),ph({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:n}=this._resizeBeforeDraw;this._resize(r,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,r=[];let n,i;for(n=0,i=s.length;n<i;++n){const a=s[n];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,r=e._clip,n=!r.disabled,i=qN(e)||this.chartArea,a={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(n&&hl(s,{left:r.left===!1?0:i.left-r.left,right:r.right===!1?this.width:i.right+r.right,top:r.top===!1?0:i.top-r.top,bottom:r.bottom===!1?this.height:i.bottom+r.bottom}),e.controller.draw(),n&&ul(s),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return _m(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,r,n){const i=U1.modes[s];return typeof i=="function"?i(this,e,r,n):[]}getDatasetMeta(e){const s=this.data.datasets[e],r=this._metasets;let n=r.filter(i=>i&&i._dataset===s).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=sr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!s.hidden}setDatasetVisibility(e,s){const r=this.getDatasetMeta(e);r.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,r){const n=r?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,n);li(s)?(i.data[s].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(i,{visible:r}),this.update(o=>o.datasetIndex===e?n:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Nt.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Vd(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Wn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,r=(i,a)=>{s.addEventListener(this,i,a),e[i]=a},n=(i,a,o)=>{i.offsetX=a,i.offsetY=o,this._eventHandler(i)};he(this.options.events,i=>r(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,r=(l,d)=>{s.addEventListener(this,l,d),e[l]=d},n=(l,d)=>{e[l]&&(s.removeEventListener(this,l,d),delete e[l])},i=(l,d)=>{this.canvas&&this.resize(l,d)};let a;const o=()=>{n("attach",o),this.attached=!0,this.resize(),r("resize",i),r("detach",a)};a=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),r("attach",o)},s.isAttached(this.canvas)?o():a()}unbindEvents(){he(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},he(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,r){const n=r?"set":"remove";let i,a,o,l;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],r=e.map(({datasetIndex:i,index:a})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[a],index:a}});!ii(r,s)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,s))}notifyPlugins(e,s,r){return this._plugins.notify(this,e,s,r)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,r){const n=this.options.hover,i=(l,d)=>l.filter(h=>!d.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),a=i(s,e),o=r?e:i(e,s);a.length&&this.updateHoverStyle(a,n.mode,!1),o.length&&n.mode&&this.updateHoverStyle(o,n.mode,!0)}_eventHandler(e,s){const r={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},n=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,n)===!1)return;const i=this._handleEvent(e,s,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(i||r.changed)&&this.render(),this}_handleEvent(e,s,r){const{_active:n=[],options:i}=this,a=s,o=this._getActiveElements(e,n,r,a),l=NS(e),d=WN(e,this._lastEvent,r,l);r&&(this._lastEvent=null,pe(i.onHover,[e,o,this],this),l&&pe(i.onClick,[e,o,this],this));const h=!ii(o,n);return(h||s)&&(this._active=o,this._updateHoverStyles(o,n,s)),this._lastEvent=d,h}_getActiveElements(e,s,r,n){if(e.type==="mouseout")return[];if(!r)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,n)}}ie(Ht,"defaults",je),ie(Ht,"instances",Wn),ie(Ht,"overrides",Ss),ie(Ht,"registry",xt),ie(Ht,"version",VN),ie(Ht,"getChart",yh);function xh(){return he(Ht.instances,t=>t._plugins.invalidate())}function zm(t,e){const{x:s,y:r,base:n,width:i,height:a}=t.getProps(["x","y","base","width","height"],e);let o,l,d,h,u;return t.horizontal?(u=a/2,o=Math.min(s,n),l=Math.max(s,n),d=r-u,h=r+u):(u=i/2,o=s-u,l=s+u,d=Math.min(r,n),h=Math.max(r,n)),{left:o,top:d,right:l,bottom:h}}function Yt(t,e,s,r){return t?0:lt(e,s,r)}function KN(t,e,s){const r=t.options.borderWidth,n=t.borderSkipped,i=jm(r);return{t:Yt(n.top,i.top,0,s),r:Yt(n.right,i.right,0,e),b:Yt(n.bottom,i.bottom,0,s),l:Yt(n.left,i.left,0,e)}}function GN(t,e,s){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,i=zs(n),a=Math.min(e,s),o=t.borderSkipped,l=r||le(n);return{topLeft:Yt(!l||o.top||o.left,i.topLeft,0,a),topRight:Yt(!l||o.top||o.right,i.topRight,0,a),bottomLeft:Yt(!l||o.bottom||o.left,i.bottomLeft,0,a),bottomRight:Yt(!l||o.bottom||o.right,i.bottomRight,0,a)}}function YN(t){const e=zm(t),s=e.right-e.left,r=e.bottom-e.top,n=KN(t,s/2,r/2),i=GN(t,s/2,r/2);return{outer:{x:e.left,y:e.top,w:s,h:r,radius:i},inner:{x:e.left+n.l,y:e.top+n.t,w:s-n.l-n.r,h:r-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function _a(t,e,s,r){const n=e===null,i=s===null,o=t&&!(n&&i)&&zm(t,r);return o&&(n||$s(e,o.left,o.right))&&(i||$s(s,o.top,o.bottom))}function XN(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function JN(t,e){t.rect(e.x,e.y,e.w,e.h)}function ka(t,e,s={}){const r=t.x!==s.x?-e:0,n=t.y!==s.y?-e:0,i=(t.x+t.w!==s.x+s.w?e:0)-r,a=(t.y+t.h!==s.y+s.h?e:0)-n;return{x:t.x+r,y:t.y+n,w:t.w+i,h:t.h+a,radius:t.radius}}class qn extends rr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:r,backgroundColor:n}}=this,{inner:i,outer:a}=YN(this),o=XN(a.radius)?ui:JN;e.save(),(a.w!==i.w||a.h!==i.h)&&(e.beginPath(),o(e,ka(a,s,i)),e.clip(),o(e,ka(i,-s,a)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),o(e,ka(i,s)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,s,r){return _a(this,e,s,r)}inXRange(e,s){return _a(this,e,null,s)}inYRange(e,s){return _a(this,null,e,s)}getCenterPoint(e){const{x:s,y:r,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(s+n)/2:s,y:i?r:(r+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ie(qn,"id","bar"),ie(qn,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ie(qn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const bh=(t,e)=>{let{boxHeight:s=e,boxWidth:r=e}=t;return t.usePointStyle&&(s=Math.min(s,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:s,itemHeight:Math.max(e,s)}},ZN=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class vh extends rr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,r){this.maxWidth=e,this.maxHeight=s,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=pe(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(r=>e.filter(r,this.chart.data))),e.sort&&(s=s.sort((r,n)=>e.sort(r,n,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,n=Fe(r.font),i=n.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=bh(r,i);let d,h;s.font=n.string,this.isHorizontal()?(d=this.maxWidth,h=this._fitRows(a,i,o,l)+10):(h=this.maxHeight,d=this._fitCols(a,n,o,l)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,s,r,n){const{ctx:i,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],h=n+o;let u=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((p,g)=>{const y=r+s/2+i.measureText(p.text).width;(g===0||d[d.length-1]+y+2*o>a)&&(u+=h,d[d.length-(g>0?0:1)]=0,m+=h,f++),l[g]={left:0,top:m,row:f,width:y,height:n},d[d.length-1]+=y+o}),u}_fitCols(e,s,r,n){const{ctx:i,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],h=a-e;let u=o,f=0,m=0,p=0,g=0;return this.legendItems.forEach((y,v)=>{const{itemWidth:k,itemHeight:S}=QN(r,s,i,y,n);v>0&&m+S+2*o>h&&(u+=f+o,d.push({width:f,height:m}),p+=f+o,g++,f=m=0),l[v]={left:p,top:m,col:g,width:k,height:S},f=Math.max(f,k),m+=S+o}),u+=f,d.push({width:f,height:m}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:r,labels:{padding:n},rtl:i}}=this,a=Hs(i,this.left,this.width);if(this.isHorizontal()){let o=0,l=Me(r,this.left+n,this.right-this.lineWidths[o]);for(const d of s)o!==d.row&&(o=d.row,l=Me(r,this.left+n,this.right-this.lineWidths[o])),d.top+=this.top+e+n,d.left=a.leftForLtr(a.x(l),d.width),l+=d.width+n}else{let o=0,l=Me(r,this.top+e+n,this.bottom-this.columnSizes[o].height);for(const d of s)d.col!==o&&(o=d.col,l=Me(r,this.top+e+n,this.bottom-this.columnSizes[o].height)),d.top=l,d.left+=this.left+n,d.left=a.leftForLtr(a.x(d.left),d.width),l+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;hl(e,this),this._draw(),ul(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:r,ctx:n}=this,{align:i,labels:a}=e,o=je.color,l=Hs(e.rtl,this.left,this.width),d=Fe(a.font),{padding:h}=a,u=d.size,f=u/2;let m;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:p,boxHeight:g,itemHeight:y}=bh(a,u),v=function(O,M,b){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();const x=fe(b.lineWidth,1);if(n.fillStyle=fe(b.fillStyle,o),n.lineCap=fe(b.lineCap,"butt"),n.lineDashOffset=fe(b.lineDashOffset,0),n.lineJoin=fe(b.lineJoin,"miter"),n.lineWidth=x,n.strokeStyle=fe(b.strokeStyle,o),n.setLineDash(fe(b.lineDash,[])),a.usePointStyle){const _={radius:g*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:x},E=l.xPlus(O,p/2),N=M+f;wm(n,_,E,N,a.pointStyleWidth&&p)}else{const _=M+Math.max((u-g)/2,0),E=l.leftForLtr(O,p),N=zs(b.borderRadius);n.beginPath(),Object.values(N).some(B=>B!==0)?ui(n,{x:E,y:_,w:p,h:g,radius:N}):n.rect(E,_,p,g),n.fill(),x!==0&&n.stroke()}n.restore()},k=function(O,M,b){Zr(n,b.text,O,M+y/2,d,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},S=this.isHorizontal(),C=this._computeTitleHeight();S?m={x:Me(i,this.left+h,this.right-r[0]),y:this.top+h+C,line:0}:m={x:this.left+h,y:Me(i,this.top+C+h,this.bottom-s[0].height),line:0},Em(this.ctx,e.textDirection);const T=y+h;this.legendItems.forEach((O,M)=>{n.strokeStyle=O.fontColor,n.fillStyle=O.fontColor;const b=n.measureText(O.text).width,x=l.textAlign(O.textAlign||(O.textAlign=a.textAlign)),_=p+f+b;let E=m.x,N=m.y;l.setWidth(this.width),S?M>0&&E+_+h>this.right&&(N=m.y+=T,m.line++,E=m.x=Me(i,this.left+h,this.right-r[m.line])):M>0&&N+T>this.bottom&&(E=m.x=E+s[m.line].width+h,m.line++,N=m.y=Me(i,this.top+C+h,this.bottom-s[m.line].height));const B=l.x(E);if(v(B,N,O),E=VS(x,E+p+f,S?E+_:this.right,e.rtl),k(l.x(E),N,O),S)m.x+=_+h;else if(typeof O.text!="string"){const L=d.lineHeight;m.y+=Hm(O,L)}else m.y+=T}),Cm(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,r=Fe(s.font),n=rt(s.padding);if(!s.display)return;const i=Hs(e.rtl,this.left,this.width),a=this.ctx,o=s.position,l=r.size/2,d=n.top+l;let h,u=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+d,u=Me(e.align,u,this.right-f);else{const p=this.columnSizes.reduce((g,y)=>Math.max(g,y.height),0);h=d+Me(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=Me(o,u,u+f);a.textAlign=i.textAlign(dl(o)),a.textBaseline="middle",a.strokeStyle=s.color,a.fillStyle=s.color,a.font=r.string,Zr(a,s.text,m,h,r)}_computeTitleHeight(){const e=this.options.title,s=Fe(e.font),r=rt(e.padding);return e.display?s.lineHeight+r.height:0}_getLegendItemAt(e,s){let r,n,i;if($s(e,this.left,this.right)&&$s(s,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(n=i[r],$s(e,n.left,n.left+n.width)&&$s(s,n.top,n.top+n.height))return this.legendItems[r]}return null}handleEvent(e){const s=this.options;if(!sT(e.type,s))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,i=ZN(n,r);n&&!i&&pe(s.onLeave,[e,n,this],this),this._hoveredItem=r,r&&!i&&pe(s.onHover,[e,r,this],this)}else r&&pe(s.onClick,[e,r,this],this)}}function QN(t,e,s,r,n){const i=eT(r,t,e,s),a=tT(n,r,e.lineHeight);return{itemWidth:i,itemHeight:a}}function eT(t,e,s,r){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((i,a)=>i.length>a.length?i:a)),e+s.size/2+r.measureText(n).width}function tT(t,e,s){let r=t;return typeof e.text!="string"&&(r=Hm(e,s)),r}function Hm(t,e){const s=t.text?t.text.length+.5:0;return e*s}function sT(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var rT={id:"legend",_element:vh,start(t,e,s){const r=t.legend=new vh({ctx:t.ctx,options:s,chart:t});tt.configure(t,r,s),tt.addBox(t,r)},stop(t){tt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const r=t.legend;tt.configure(t,r,s),r.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const r=e.datasetIndex,n=s.chart;n.isDatasetVisible(r)?(n.hide(r),e.hidden=!0):(n.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:r,textAlign:n,color:i,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const d=l.controller.getStyle(s?0:void 0),h=rt(d.borderWidth);return{text:e[l.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:a&&(o||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Wm extends rr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const n=Ae(r.text)?r.text.length:1;this._padding=rt(r.padding);const i=n*Fe(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:r,bottom:n,right:i,options:a}=this,o=a.align;let l=0,d,h,u;return this.isHorizontal()?(h=Me(o,r,i),u=s+e,d=i-r):(a.position==="left"?(h=r+e,u=Me(o,n,s),l=$e*-.5):(h=i-e,u=Me(o,s,n),l=$e*.5),d=n-s),{titleX:h,titleY:u,maxWidth:d,rotation:l}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const r=Fe(s.font),i=r.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:d}=this._drawArgs(i);Zr(e,s.text,0,0,r,{color:s.color,maxWidth:l,rotation:d,textAlign:dl(s.align),textBaseline:"middle",translation:[a,o]})}}function nT(t,e){const s=new Wm({ctx:t.ctx,options:e,chart:t});tt.configure(t,s,e),tt.addBox(t,s),t.titleBlock=s}var iT={id:"title",_element:Wm,start(t,e,s){nT(t,s)},stop(t){const e=t.titleBlock;tt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const r=t.titleBlock;tt.configure(t,r,s),r.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Nr={average(t){if(!t.length)return!1;let e,s,r=0,n=0,i=0;for(e=0,s=t.length;e<s;++e){const a=t[e].element;if(a&&a.hasValue()){const o=a.tooltipPosition();r+=o.x,n+=o.y,++i}}return{x:r/i,y:n/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,r=e.y,n=Number.POSITIVE_INFINITY,i,a,o;for(i=0,a=t.length;i<a;++i){const l=t[i].element;if(l&&l.hasValue()){const d=l.getCenterPoint(),h=OS(e,d);h<n&&(n=h,o=l)}}if(o){const l=o.tooltipPosition();s=l.x,r=l.y}return{x:s,y:r}}};function yt(t,e){return e&&(Ae(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Tt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function aT(t,e){const{element:s,datasetIndex:r,index:n}=e,i=t.getDatasetMeta(r).controller,{label:a,value:o}=i.getLabelAndValue(n);return{chart:t,label:a,parsed:i.getParsed(n),raw:t.data.datasets[r].data[n],formattedValue:o,dataset:i.getDataset(),dataIndex:n,datasetIndex:r,element:s}}function wh(t,e){const s=t.chart.ctx,{body:r,footer:n,title:i}=t,{boxWidth:a,boxHeight:o}=e,l=Fe(e.bodyFont),d=Fe(e.titleFont),h=Fe(e.footerFont),u=i.length,f=n.length,m=r.length,p=rt(e.padding);let g=p.height,y=0,v=r.reduce((C,T)=>C+T.before.length+T.lines.length+T.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*d.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),v){const C=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;g+=m*C+(v-m)*l.lineHeight+(v-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let k=0;const S=function(C){y=Math.max(y,s.measureText(C).width+k)};return s.save(),s.font=d.string,he(t.title,S),s.font=l.string,he(t.beforeBody.concat(t.afterBody),S),k=e.displayColors?a+2+e.boxPadding:0,he(r,C=>{he(C.before,S),he(C.lines,S),he(C.after,S)}),k=0,s.font=h.string,he(t.footer,S),s.restore(),y+=p.width,{width:y,height:g}}function oT(t,e){const{y:s,height:r}=e;return s<r/2?"top":s>t.height-r/2?"bottom":"center"}function lT(t,e,s,r){const{x:n,width:i}=r,a=s.caretSize+s.caretPadding;if(t==="left"&&n+i+a>e.width||t==="right"&&n-i-a<0)return!0}function cT(t,e,s,r){const{x:n,width:i}=s,{width:a,chartArea:{left:o,right:l}}=t;let d="center";return r==="center"?d=n<=(o+l)/2?"left":"right":n<=i/2?d="left":n>=a-i/2&&(d="right"),lT(d,t,e,s)&&(d="center"),d}function _h(t,e,s){const r=s.yAlign||e.yAlign||oT(t,s);return{xAlign:s.xAlign||e.xAlign||cT(t,e,s,r),yAlign:r}}function dT(t,e){let{x:s,width:r}=t;return e==="right"?s-=r:e==="center"&&(s-=r/2),s}function hT(t,e,s){let{y:r,height:n}=t;return e==="top"?r+=s:e==="bottom"?r-=n+s:r-=n/2,r}function kh(t,e,s,r){const{caretSize:n,caretPadding:i,cornerRadius:a}=t,{xAlign:o,yAlign:l}=s,d=n+i,{topLeft:h,topRight:u,bottomLeft:f,bottomRight:m}=zs(a);let p=dT(e,o);const g=hT(e,l,d);return l==="center"?o==="left"?p+=d:o==="right"&&(p-=d):o==="left"?p-=Math.max(h,f)+n:o==="right"&&(p+=Math.max(u,m)+n),{x:lt(p,0,r.width-e.width),y:lt(g,0,r.height-e.height)}}function Rn(t,e,s){const r=rt(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function jh(t){return yt([],Tt(t))}function uT(t,e,s){return sr(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Sh(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const qm={beforeTitle:St,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,r=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return s[e.dataIndex]}return""},afterTitle:St,beforeBody:St,beforeLabel:St,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ke(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:St,afterBody:St,beforeFooter:St,footer:St,afterFooter:St};function ze(t,e,s,r){const n=t[e].call(s,r);return typeof n>"u"?qm[e].call(s,r):n}class co extends rr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&s.options.animation&&r.animations,i=new Rm(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=uT(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:r}=s,n=ze(r,"beforeTitle",this,e),i=ze(r,"title",this,e),a=ze(r,"afterTitle",this,e);let o=[];return o=yt(o,Tt(n)),o=yt(o,Tt(i)),o=yt(o,Tt(a)),o}getBeforeBody(e,s){return jh(ze(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:r}=s,n=[];return he(e,i=>{const a={before:[],lines:[],after:[]},o=Sh(r,i);yt(a.before,Tt(ze(o,"beforeLabel",this,i))),yt(a.lines,ze(o,"label",this,i)),yt(a.after,Tt(ze(o,"afterLabel",this,i))),n.push(a)}),n}getAfterBody(e,s){return jh(ze(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:r}=s,n=ze(r,"beforeFooter",this,e),i=ze(r,"footer",this,e),a=ze(r,"afterFooter",this,e);let o=[];return o=yt(o,Tt(n)),o=yt(o,Tt(i)),o=yt(o,Tt(a)),o}_createItems(e){const s=this._active,r=this.chart.data,n=[],i=[],a=[];let o=[],l,d;for(l=0,d=s.length;l<d;++l)o.push(aT(this.chart,s[l]));return e.filter&&(o=o.filter((h,u,f)=>e.filter(h,u,f,r))),e.itemSort&&(o=o.sort((h,u)=>e.itemSort(h,u,r))),he(o,h=>{const u=Sh(e.callbacks,h);n.push(ze(u,"labelColor",this,h)),i.push(ze(u,"labelPointStyle",this,h)),a.push(ze(u,"labelTextColor",this,h))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=o,o}update(e,s){const r=this.options.setContext(this.getContext()),n=this._active;let i,a=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const o=Nr[r.position].call(this,n,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const l=this._size=wh(this,r),d=Object.assign({},o,l),h=_h(this.chart,r,d),u=kh(r,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,r,n){const i=this.getCaretPosition(e,r,n);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,r){const{xAlign:n,yAlign:i}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:l,topRight:d,bottomLeft:h,bottomRight:u}=zs(o),{x:f,y:m}=e,{width:p,height:g}=s;let y,v,k,S,C,T;return i==="center"?(C=m+g/2,n==="left"?(y=f,v=y-a,S=C+a,T=C-a):(y=f+p,v=y+a,S=C-a,T=C+a),k=y):(n==="left"?v=f+Math.max(l,h)+a:n==="right"?v=f+p-Math.max(d,u)-a:v=this.caretX,i==="top"?(S=m,C=S-a,y=v-a,k=v+a):(S=m+g,C=S+a,y=v+a,k=v-a),T=S),{x1:y,x2:v,x3:k,y1:S,y2:C,y3:T}}drawTitle(e,s,r){const n=this.title,i=n.length;let a,o,l;if(i){const d=Hs(r.rtl,this.x,this.width);for(e.x=Rn(this,r.titleAlign,r),s.textAlign=d.textAlign(r.titleAlign),s.textBaseline="middle",a=Fe(r.titleFont),o=r.titleSpacing,s.fillStyle=r.titleColor,s.font=a.string,l=0;l<i;++l)s.fillText(n[l],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,l+1===i&&(e.y+=r.titleMarginBottom-o)}}_drawColorBox(e,s,r,n,i){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:d}=i,h=Fe(i.bodyFont),u=Rn(this,"left",i),f=n.x(u),m=l<h.lineHeight?(h.lineHeight-l)/2:0,p=s.y+m;if(i.usePointStyle){const g={radius:Math.min(d,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},y=n.leftForLtr(f,d)+d/2,v=p+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Ud(e,g,y,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Ud(e,g,y,v)}else{e.lineWidth=le(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const g=n.leftForLtr(f,d),y=n.leftForLtr(n.xPlus(f,1),d-2),v=zs(a.borderRadius);Object.values(v).some(k=>k!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,ui(e,{x:g,y:p,w:d,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),ui(e,{x:y,y:p+1,w:d-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(g,p,d,l),e.strokeRect(g,p,d,l),e.fillStyle=a.backgroundColor,e.fillRect(y,p+1,d-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,s,r){const{body:n}=this,{bodySpacing:i,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:d,boxPadding:h}=r,u=Fe(r.bodyFont);let f=u.lineHeight,m=0;const p=Hs(r.rtl,this.x,this.width),g=function(b){s.fillText(b,p.x(e.x+m),e.y+f/2),e.y+=f+i},y=p.textAlign(a);let v,k,S,C,T,O,M;for(s.textAlign=a,s.textBaseline="middle",s.font=u.string,e.x=Rn(this,y,r),s.fillStyle=r.bodyColor,he(this.beforeBody,g),m=o&&y!=="right"?a==="center"?d/2+h:d+2+h:0,C=0,O=n.length;C<O;++C){for(v=n[C],k=this.labelTextColors[C],s.fillStyle=k,he(v.before,g),S=v.lines,o&&S.length&&(this._drawColorBox(s,e,C,p,r),f=Math.max(u.lineHeight,l)),T=0,M=S.length;T<M;++T)g(S[T]),f=u.lineHeight;he(v.after,g)}m=0,f=u.lineHeight,he(this.afterBody,g),e.y-=i}drawFooter(e,s,r){const n=this.footer,i=n.length;let a,o;if(i){const l=Hs(r.rtl,this.x,this.width);for(e.x=Rn(this,r.footerAlign,r),e.y+=r.footerMarginTop,s.textAlign=l.textAlign(r.footerAlign),s.textBaseline="middle",a=Fe(r.footerFont),s.fillStyle=r.footerColor,s.font=a.string,o=0;o<i;++o)s.fillText(n[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,s,r,n){const{xAlign:i,yAlign:a}=this,{x:o,y:l}=e,{width:d,height:h}=r,{topLeft:u,topRight:f,bottomLeft:m,bottomRight:p}=zs(n.cornerRadius);s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,s.lineWidth=n.borderWidth,s.beginPath(),s.moveTo(o+u,l),a==="top"&&this.drawCaret(e,s,r,n),s.lineTo(o+d-f,l),s.quadraticCurveTo(o+d,l,o+d,l+f),a==="center"&&i==="right"&&this.drawCaret(e,s,r,n),s.lineTo(o+d,l+h-p),s.quadraticCurveTo(o+d,l+h,o+d-p,l+h),a==="bottom"&&this.drawCaret(e,s,r,n),s.lineTo(o+m,l+h),s.quadraticCurveTo(o,l+h,o,l+h-m),a==="center"&&i==="left"&&this.drawCaret(e,s,r,n),s.lineTo(o,l+u),s.quadraticCurveTo(o,l,o+u,l),s.closePath(),s.fill(),n.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,r=this.$animations,n=r&&r.x,i=r&&r.y;if(n||i){const a=Nr[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=wh(this,e),l=Object.assign({},a,this._size),d=_h(s,e,l),h=kh(e,l,d,s);(n._to!==h.x||i._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(s);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=rt(s.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,n,s),Em(e,s.textDirection),i.y+=a.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),Cm(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const r=this._active,n=e.map(({datasetIndex:o,index:l})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[l],index:l}}),i=!ii(r,n),a=this._positionChanged(n,s);(i||a)&&(this._active=n,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,r=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],a=this._getActiveElements(e,i,s,r),o=this._positionChanged(a,e),l=s||!ii(a,i)||o;return l&&(this._active=a,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),l}_getActiveElements(e,s,r,n){const i=this.options;if(e.type==="mouseout")return[];if(!n)return s;const a=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&a.reverse(),a}_positionChanged(e,s){const{caretX:r,caretY:n,options:i}=this,a=Nr[i.position].call(this,e,s);return a!==!1&&(r!==a.x||n!==a.y)}}ie(co,"positioners",Nr);var fT={id:"tooltip",_element:co,positioners:Nr,afterInit(t,e,s){s&&(t.tooltip=new co({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qm},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const mT=(t,e,s,r)=>(typeof e=="string"?(s=t.push(e)-1,r.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function gT(t,e,s,r){const n=t.indexOf(e);if(n===-1)return mT(t,e,s,r);const i=t.lastIndexOf(e);return n!==i?s:n}const pT=(t,e)=>t===null?null:lt(Math.round(t),0,e);function Nh(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ho extends nr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const r=this.getLabels();for(const{index:n,label:i}of s)r[n]===i&&r.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ke(e))return null;const r=this.getLabels();return s=isFinite(s)&&r[s]===e?s:gT(r,e,fe(s,e),this._addedLabels),pT(s,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),s||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,s=this.max,r=this.options.offset,n=[];let i=this.getLabels();i=e===0&&s===i.length-1?i:i.slice(e,s+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=s;a++)n.push({value:a});return n}getLabelForValue(e){return Nh.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ie(ho,"id","category"),ie(ho,"defaults",{ticks:{callback:Nh}});function yT(t,e){const s=[],{bounds:n,step:i,min:a,max:o,precision:l,count:d,maxTicks:h,maxDigits:u,includeBounds:f}=t,m=i||1,p=h-1,{min:g,max:y}=e,v=!ke(a),k=!ke(o),S=!ke(d),C=(y-g)/(u+1);let T=Od((y-g)/p/m)*m,O,M,b,x;if(T<1e-14&&!v&&!k)return[{value:g},{value:y}];x=Math.ceil(y/T)-Math.floor(g/T),x>p&&(T=Od(x*T/p/m)*m),ke(l)||(O=Math.pow(10,l),T=Math.ceil(T*O)/O),n==="ticks"?(M=Math.floor(g/T)*T,b=Math.ceil(y/T)*T):(M=g,b=y),v&&k&&i&&PS((o-a)/i,T/1e3)?(x=Math.round(Math.min((o-a)/T,h)),T=(o-a)/x,M=a,b=o):S?(M=v?a:M,b=k?o:b,x=d-1,T=(b-M)/x):(x=(b-M)/T,Un(x,Math.round(x),T/1e3)?x=Math.round(x):x=Math.ceil(x));const _=Math.max(Dd(T),Dd(M));O=Math.pow(10,ke(l)?_:l),M=Math.round(M*O)/O,b=Math.round(b*O)/O;let E=0;for(v&&(f&&M!==a?(s.push({value:a}),M<a&&E++,Un(Math.round((M+E*T)*O)/O,a,Th(a,C,t))&&E++):M<a&&E++);E<x;++E){const N=Math.round((M+E*T)*O)/O;if(k&&N>o)break;s.push({value:N})}return k&&f&&b!==o?s.length&&Un(s[s.length-1].value,o,Th(o,C,t))?s[s.length-1].value=o:s.push({value:o}):(!k||b===o)&&s.push({value:b}),s}function Th(t,e,{horizontal:s,minRotation:r}){const n=vs(r),i=(s?Math.sin(n):Math.cos(n))||.001,a=.75*e*(""+t).length;return Math.min(e/i,a)}class xT extends nr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ke(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this;const a=l=>n=s?n:l,o=l=>i=r?i:l;if(e){const l=di(n),d=di(i);l<0&&d<0?o(0):l>0&&d>0&&a(0)}if(n===i){let l=i===0?1:Math.abs(i*.05);o(i+l),e||a(n-l)}this.min=n,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:r}=e,n;return r?(n=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),s=s||11),s&&(n=Math.min(s,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,a=yT(n,i);return e.bounds==="ticks"&&ES(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let s=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-s)/Math.max(e.length-1,1)/2;s-=n,r+=n}this._startValue=s,this._endValue=r,this._valueRange=r-s}getLabelForValue(e){return xm(e,this.chart.options.locale,this.options.ticks.format)}}class uo extends xT{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=st(e)?e:0,this.max=st(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,r=vs(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,i.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ie(uo,"id","linear"),ie(uo,"defaults",{ticks:{callback:vm.formatters.numeric}});const Vi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},We=Object.keys(Vi);function bT(t,e){return t-e}function Ah(t,e){if(ke(e))return null;const s=t._adapter,{parser:r,round:n,isoWeekday:i}=t._parseOpts;let a=e;return typeof r=="function"&&(a=r(a)),st(a)||(a=typeof r=="string"?s.parse(a,r):s.parse(a)),a===null?null:(n&&(a=n==="week"&&(hi(i)||i===!0)?s.startOf(a,"isoWeek",i):s.startOf(a,n)),+a)}function Ph(t,e,s,r){const n=We.length;for(let i=We.indexOf(t);i<n-1;++i){const a=Vi[We[i]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((s-e)/(o*a.size))<=r)return We[i]}return We[n-1]}function vT(t,e,s,r,n){for(let i=We.length-1;i>=We.indexOf(s);i--){const a=We[i];if(Vi[a].common&&t._adapter.diff(n,r,a)>=e-1)return a}return We[s?We.indexOf(s):0]}function wT(t){for(let e=We.indexOf(t)+1,s=We.length;e<s;++e)if(Vi[We[e]].common)return We[e]}function Eh(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:r,hi:n}=cl(s,e),i=s[r]>=e?s[r]:s[n];t[i]=!0}}function _T(t,e,s,r){const n=t._adapter,i=+n.startOf(e[0].value,r),a=e[e.length-1].value;let o,l;for(o=i;o<=a;o=+n.add(o,1,r))l=s[o],l>=0&&(e[l].major=!0);return e}function Ch(t,e,s){const r=[],n={},i=e.length;let a,o;for(a=0;a<i;++a)o=e[a],n[o]=a,r.push({value:o,major:!1});return i===0||!s?r:_T(t,r,n,s)}class gi extends nr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const r=e.time||(e.time={}),n=this._adapter=new I1._date(e.adapters.date);n.init(s),Ir(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Ah(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,r=e.time.unit||"day";let{min:n,max:i,minDefined:a,maxDefined:o}=this.getUserBounds();function l(d){!a&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!o&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!a||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=st(n)&&!isNaN(n)?n:+s.startOf(Date.now(),r),i=st(i)&&!isNaN(i)?i:+s.endOf(Date.now(),r)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],r=e[e.length-1]),{min:s,max:r}}buildTicks(){const e=this.options,s=e.time,r=e.ticks,n=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,a=this.max,o=IS(n,i,a);return this._unit=s.unit||(r.autoSkip?Ph(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):vT(this,o.length,s.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:wT(this._unit),this.initOffsets(n),e.reverse&&o.reverse(),Ch(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,r=0,n,i;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?s=1-n:s=(this.getDecimalForValue(e[1])-n)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;s=lt(s,0,a),r=lt(r,0,a),this._offsets={start:s,end:r,factor:1/(s+1+r)}}_generate(){const e=this._adapter,s=this.min,r=this.max,n=this.options,i=n.time,a=i.unit||Ph(i.minUnit,s,r,this._getLabelCapacity(s)),o=fe(n.ticks.stepSize,1),l=a==="week"?i.isoWeekday:!1,d=hi(l)||l===!0,h={};let u=s,f,m;if(d&&(u=+e.startOf(u,"isoWeek",l)),u=+e.startOf(u,d?"day":a),e.diff(r,s,a)>1e5*o)throw new Error(s+" and "+r+" are too far apart with stepSize of "+o+" "+a);const p=n.ticks.source==="data"&&this.getDataTimestamps();for(f=u,m=0;f<r;f=+e.add(f,o,a),m++)Eh(h,f,p);return(f===r||n.bounds==="ticks"||m===1)&&Eh(h,f,p),Object.keys(h).sort((g,y)=>g-y).map(g=>+g)}getLabelForValue(e){const s=this._adapter,r=this.options.time;return r.tooltipFormat?s.format(e,r.tooltipFormat):s.format(e,r.displayFormats.datetime)}format(e,s){const n=this.options.time.displayFormats,i=this._unit,a=s||n[i];return this._adapter.format(e,a)}_tickFormatFunction(e,s,r,n){const i=this.options,a=i.ticks.callback;if(a)return pe(a,[e,s,r],this);const o=i.time.displayFormats,l=this._unit,d=this._majorUnit,h=l&&o[l],u=d&&o[d],f=r[s],m=d&&u&&f&&f.major;return this._adapter.format(e,n||(m?u:h))}generateTickLabels(e){let s,r,n;for(s=0,r=e.length;s<r;++s)n=e[s],n.label=this._tickFormatFunction(n.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+r)*s.factor)}getValueForPixel(e){const s=this._offsets,r=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,r=this.ctx.measureText(e).width,n=vs(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(n),a=Math.sin(n),o=this._resolveTickFontOptions(0).size;return{w:r*i+o*a,h:r*a+o*i}}_getLabelCapacity(e){const s=this.options.time,r=s.displayFormats,n=r[s.unit]||r.millisecond,i=this._tickFormatFunction(e,0,Ch(this,[e],this._majorUnit),n),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],s,r;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(s=0,r=n.length;s<r;++s)e=e.concat(n[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,r;if(e.length)return e;const n=this.getLabels();for(s=0,r=n.length;s<r;++s)e.push(Ah(this,n[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return BS(e.sort(bT))}}ie(gi,"id","time"),ie(gi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function On(t,e,s){let r=0,n=t.length-1,i,a,o,l;s?(e>=t[r].pos&&e<=t[n].pos&&({lo:r,hi:n}=io(t,"pos",e)),{pos:i,time:o}=t[r],{pos:a,time:l}=t[n]):(e>=t[r].time&&e<=t[n].time&&({lo:r,hi:n}=io(t,"time",e)),{time:i,pos:o}=t[r],{time:a,pos:l}=t[n]);const d=a-i;return d?o+(l-o)*(e-i)/d:o}class Rh extends gi{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=On(s,this.min),this._tableRange=On(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:r}=this,n=[],i=[];let a,o,l,d,h;for(a=0,o=e.length;a<o;++a)d=e[a],d>=s&&d<=r&&n.push(d);if(n.length<2)return[{time:s,pos:0},{time:r,pos:1}];for(a=0,o=n.length;a<o;++a)h=n[a+1],l=n[a-1],d=n[a],Math.round((h+l)/2)!==d&&i.push({time:d,pos:a/(o-1)});return i}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),r=this.getLabelTimestamps();return s.length&&r.length?e=this.normalize(s.concat(r)):e=s.length?s:r,e=this._cache.all=e,e}getDecimalForValue(e){return(On(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,r=this.getDecimalForPixel(e)/s.factor-s.end;return On(this._table,r*this._tableRange+this._minPos,!0)}}ie(Rh,"id","timeseries"),ie(Rh,"defaults",gi.defaults);Ht.register(ho,uo,qn,iT,fT,rT);const kT=({showDebugPanel:t=!1})=>{const[e,s]=j.useState(null),[r,n]=j.useState(!0),[i,a]=j.useState(null),[o,l]=j.useState({key:"realPercentage",direction:"descending"}),[d,h]=j.useState(!1),[u,f]=j.useState(null),[m,p]=j.useState(!1),[g,y]=j.useState({url:"",class:"1"}),[v,k]=j.useState(!1),[S,C]=j.useState(null),T=L=>{try{if(!L||typeof L!="string")return"unknown";let w=L;!L.startsWith("http://")&&!L.startsWith("https://")&&(w="https://"+L);const A=new URL(w).hostname,R=A.split(".");if(R.length>=3){const V=R[R.length-2]+"."+R[R.length-1];if(["co.uk","co.in","com.au","co.nz"].includes(V))return R[R.length-3]+"."+V}return R.length>=2?R[R.length-2]+"."+R[R.length-1]:A}catch{return"invalid-url"}},O=L=>L<=5?.5:L<=10?.7:L<=20?.8:L<=50?.9:1,M=(L,w)=>{const A=L*w;return A>=90?"Very High":A>=70?"High":A>=50?"Moderate":A>=30?"Low":"Very Low"},b=L=>{switch(L){case"Very High":return"text-green-600 dark:text-green-400";case"High":return"text-blue-600 dark:text-blue-400";case"Moderate":return"text-yellow-600 dark:text-yellow-400";case"Low":return"text-orange-600 dark:text-orange-400";case"Very Low":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}},x=L=>{switch(L){case"Very High":return"rgba(34, 197, 94, 0.7)";case"High":return"rgba(59, 130, 246, 0.7)";case"Moderate":return"rgba(234, 179, 8, 0.7)";case"Low":return"rgba(249, 115, 22, 0.7)";case"Very Low":return"rgba(239, 68, 68, 0.7)";default:return"rgba(156, 163, 175, 0.7)"}};j.useEffect(()=>{(async()=>{n(!0),a(null);try{const w=await fetch("/mal_train.csv");if(!w.ok)throw new Error(`Failed to fetch CSV file: ${w.statusText}`);const A=await w.text(),R=A.substring(0,200);console.log("First 200 characters of CSV:",R);const I=A.split(`
`).filter($=>!$.trim().startsWith("#")&&!$.trim().startsWith("//")).join(`
`);cm.parse(I,{header:!0,skipEmptyLines:!0,transformHeader:$=>$.trim(),complete:$=>{const z=$.data,G=$.meta.fields||[],H=z.slice(0,5);if(console.log("CSV headers:",G),console.log("Sample data (first 5 rows):",H),f({csvSample:R,headers:G,sampleRows:H}),z.length===0){a("No data found in CSV file or format is invalid"),n(!1);return}const X=z[0],se=["News Url","News_Url","url","URL","link","Link"],P=se.find(Q=>X[Q]!==void 0),U=["Class","class","label","Label","is_real","is_fake"],q=U.find(Q=>X[Q]!==void 0);if(!P){a("Could not find URL column in CSV data. Expected column names: "+se.join(", ")),n(!1);return}if(!q){a("Could not find Class column in CSV data. Expected column names: "+U.join(", ")),n(!1);return}console.log(`Found URL field: "${P}", Class field: "${q}"`);const K=z.length;let ae=0,W=0;const oe={};z.forEach((Q,re)=>{if(Q[P]===void 0||Q[q]===void 0){console.warn(`Skipping row ${re} due to missing fields:`,Q);return}const J=Q[q];let ve;if(typeof J=="number")ve=J;else if(typeof J=="string"){if(ve=parseInt(J.trim()),isNaN(ve)){const nt=J.toLowerCase().trim();nt==="real"||nt==="true"||nt==="yes"||nt==="1"?ve=1:ve=0}}else ve=0;const Z=ve===1;Z?ae++:W++;const ue=Q[P];if(!ue||typeof ue!="string"){console.warn(`Skipping row ${re} due to invalid URL:`,ue);return}const qe=T(ue);oe[qe]||(oe[qe]={total:0,real:0}),oe[qe].total+=1,Z&&(oe[qe].real+=1)}),console.log("Real News Count:",ae),console.log("Fake News Count:",W),console.log("Total Articles:",K),console.log("Domain Stats Summary:",Object.keys(oe).length,"domains found");const ye=Object.entries(oe).filter(([Q,re])=>re.total>=2).map(([Q,re])=>{const J=re.real/re.total*100,ve=O(re.total);return{domain:Q,total:re.total,real:re.real,realPercentage:J,confidenceScore:ve,credibilityRating:M(J,ve)}});s({totalArticles:K,realNews:ae,fakeNews:W,domains:ye}),n(!1)},error:$=>{a(`Failed to parse CSV data: ${$.message}`),n(!1)}})}catch(w){a(`Error loading data: ${w instanceof Error?w.message:String(w)}`),n(!1)}})()},[]);const _=Ar.useMemo(()=>e?[...e.domains].sort((L,w)=>L[o.key]<w[o.key]?o.direction==="ascending"?-1:1:L[o.key]>w[o.key]?o.direction==="ascending"?1:-1:0):[],[e,o]),E=L=>{l(w=>({key:L,direction:w.key===L&&w.direction==="descending"?"ascending":"descending"}))};Ar.useMemo(()=>{if(!e)return null;const L=[...e.domains].filter(w=>w.total>=5).sort((w,A)=>A.realPercentage-w.realPercentage).slice(0,10);return{labels:L.map(w=>w.domain),datasets:[{label:"Credibility Score (%)",data:L.map(w=>w.realPercentage),backgroundColor:L.map(w=>x(w.credibilityRating)),borderWidth:1}]}},[e]),Ar.useMemo(()=>{if(!e)return null;const L=[...e.domains].filter(w=>w.total>=5).sort((w,A)=>w.realPercentage-A.realPercentage).slice(0,10);return{labels:L.map(w=>w.domain),datasets:[{label:"Credibility Score (%)",data:L.map(w=>w.realPercentage),backgroundColor:L.map(w=>x(w.credibilityRating)),borderWidth:1}]}},[e]);const N=()=>!t||!u?null:c.jsxs(ot,{className:"p-6 mt-6 bg-slate-50 dark:bg-slate-900 border border-yellow-200 dark:border-yellow-900",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-yellow-700 dark:text-yellow-400 flex items-center",children:[c.jsx(bg,{className:"w-5 h-5 mr-2"}),"CSV Parsing Debug Information"]}),c.jsx("button",{onClick:()=>h(!d),className:"text-sm px-3 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-md",children:d?"Hide Details":"Show Details"})]}),d&&c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium mb-1 text-yellow-800 dark:text-yellow-300",children:"CSV Sample (first 200 chars):"}),c.jsx("pre",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded overflow-x-auto text-xs",children:u.csvSample})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium mb-1 text-yellow-800 dark:text-yellow-300",children:"Detected Headers:"}),c.jsx("pre",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded overflow-x-auto text-xs",children:JSON.stringify(u.headers,null,2)})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium mb-1 text-yellow-800 dark:text-yellow-300",children:"Sample Rows (first 5):"}),c.jsx("pre",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded overflow-x-auto text-xs max-h-64",children:JSON.stringify(u.sampleRows,null,2)})]})]})]}),B=async()=>{if(!g.url){C("Please enter a URL");return}k(!0),C(null);try{const L=await fetch(`/api/analyze?url=${encodeURIComponent(g.url)}`);if(!L.ok)throw new Error(`Failed to analyze URL: ${L.statusText}`);const w=await L.json(),A=T(g.url),R=g.class==="1";if(e){const V=e.domains.findIndex(I=>I.domain===A);if(V>=0){const I=[...e.domains],$=I[V],z={...$,total:$.total+1,real:$.real+(R?1:0),realPercentage:($.real+(R?1:0))/($.total+1)*100,confidenceScore:O($.total+1)};z.credibilityRating=M(z.realPercentage,z.confidenceScore),I[V]=z,s({...e,domains:I,totalArticles:e.totalArticles+1,realNews:e.realNews+(R?1:0),fakeNews:e.fakeNews+(R?0:1)})}else{const I={domain:A,total:1,real:R?1:0,realPercentage:R?100:0,confidenceScore:O(1),credibilityRating:M(R?100:0,O(1))};s({...e,domains:[...e.domains,I],totalArticles:e.totalArticles+1,realNews:e.realNews+(R?1:0),fakeNews:e.fakeNews+(R?0:1)})}}y({url:"",class:"1"}),p(!1)}catch(L){C(`Error analyzing URL: ${L instanceof Error?L.message:String(L)}`)}finally{k(!1)}};return i?c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 p-4 rounded-lg flex items-start",children:[c.jsx(Kt,{className:"w-5 h-5 mr-3 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium",children:"Error Loading Data"}),c.jsx("p",{className:"mt-1 text-sm",children:i})]})]}):r?c.jsxs("div",{className:"flex justify-center items-center h-40",children:[c.jsx($r,{className:"w-8 h-8 animate-spin text-blue-500"}),c.jsx("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"Loading credibility data..."})]}):e?c.jsxs("div",{className:"space-y-6",children:[c.jsx(ot,{children:c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Dataset Summary"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Total Articles"}),c.jsx("p",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200",children:e.totalArticles.toLocaleString()})]}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Real News"}),c.jsxs("p",{className:"text-2xl font-bold text-green-800 dark:text-green-200",children:[e.realNews.toLocaleString(),c.jsxs("span",{className:"text-sm font-normal ml-1",children:["(",(e.realNews/e.totalArticles*100).toFixed(1),"%)"]})]})]}),c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Fake News"}),c.jsxs("p",{className:"text-2xl font-bold text-red-800 dark:text-red-200",children:[e.fakeNews.toLocaleString(),c.jsxs("span",{className:"text-sm font-normal ml-1",children:["(",(e.fakeNews/e.totalArticles*100).toFixed(1),"%)"]})]})]})]})]})}),c.jsx(ot,{children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-semibold",children:"Domain Credibility Rankings"}),c.jsxs("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add New"]})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"The table below shows all domains in the dataset with at least 2 articles. Click on column headers to sort the table."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:c.jsxs("tr",{children:[c.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>E("domain"),children:["Domain",o.key==="domain"&&c.jsx("span",{className:"ml-1",children:o.direction==="ascending"?"↑":"↓"})]}),c.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>E("realPercentage"),children:["Credibility Score",o.key==="realPercentage"&&c.jsx("span",{className:"ml-1",children:o.direction==="ascending"?"↑":"↓"})]}),c.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>E("credibilityRating"),children:["Rating",o.key==="credibilityRating"&&c.jsx("span",{className:"ml-1",children:o.direction==="ascending"?"↑":"↓"})]}),c.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>E("total"),children:["Articles",o.key==="total"&&c.jsx("span",{className:"ml-1",children:o.direction==="ascending"?"↑":"↓"})]}),c.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>E("confidenceScore"),children:["Confidence",o.key==="confidenceScore"&&c.jsx("span",{className:"ml-1",children:o.direction==="ascending"?"↑":"↓"})]})]})}),c.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:_.map(L=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:L.domain}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mr-2",children:c.jsx("div",{className:D("h-2 rounded-full",L.realPercentage>=90?"bg-green-500":L.realPercentage>=70?"bg-blue-500":L.realPercentage>=50?"bg-yellow-500":L.realPercentage>=30?"bg-orange-500":"bg-red-500"),style:{width:`${L.realPercentage}%`}})}),c.jsxs("span",{className:D("text-sm font-medium",L.realPercentage>=90?"text-green-600 dark:text-green-400":L.realPercentage>=70?"text-blue-600 dark:text-blue-400":L.realPercentage>=50?"text-yellow-600 dark:text-yellow-400":L.realPercentage>=30?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"),children:[L.realPercentage.toFixed(2),"%"]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:D("px-2 py-1 rounded-full text-xs font-medium",b(L.credibilityRating)),children:L.credibilityRating})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[L.total," (",L.real," real, ",L.total-L.real," fake)"]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[(L.confidenceScore*100).toFixed(0),"%"]})]},L.domain))})]})})]})}),N(),c.jsxs(ot,{className:"p-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Methodology"}),c.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-3",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Data Classification:"})," In the dataset, articles are classified as follows:"]}),c.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Class 1:"})," Real news (factually accurate)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Class 0:"})," Fake news (contains misinformation)"]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Credibility Score:"})," Percentage of articles from a domain classified as real news."]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Confidence Score:"})," Measure of statistical reliability based on sample size. Domains with more articles have higher confidence scores."]}),c.jsx("p",{children:c.jsx("strong",{children:"Rating System:"})}),c.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[c.jsx("li",{className:"text-green-600 dark:text-green-400",children:"Very High: 90-100% credibility with high confidence"}),c.jsx("li",{className:"text-blue-600 dark:text-blue-400",children:"High: 70-90% credibility"}),c.jsx("li",{className:"text-yellow-600 dark:text-yellow-400",children:"Moderate: 50-70% credibility"}),c.jsx("li",{className:"text-orange-600 dark:text-orange-400",children:"Low: 30-50% credibility"}),c.jsx("li",{className:"text-red-600 dark:text-red-400",children:"Very Low: 0-30% credibility"})]})]})]}),m&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Article"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"URL"}),c.jsx("input",{type:"text",value:g.url,onChange:L=>y({...g,url:L.target.value}),placeholder:"https://example.com/article",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Class"}),c.jsxs("select",{value:g.class,onChange:L=>y({...g,class:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v,children:[c.jsx("option",{value:"1",children:"Real News (1)"}),c.jsx("option",{value:"0",children:"Fake News (0)"})]})]}),S&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 p-3 rounded-md text-sm",children:c.jsx("p",{children:S})}),c.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:c.jsx("p",{children:"Enter a news article URL and classify it as real or fake news. Other data will be fetched automatically."})}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",disabled:v,children:"Cancel"}),c.jsx("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",disabled:!g.url||v,children:v?c.jsxs(c.Fragment,{children:[c.jsx($r,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyzing..."]}):"Add Article"})]})]})]})})]}):c.jsxs("div",{className:"flex items-center gap-2 text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[c.jsx(xg,{className:"w-5 h-5"}),c.jsx("p",{children:"No data available for analysis."})]})},jT=({isVisible:t,onLogin:e,error:s,language:r})=>{const[n,i]=j.useState({email:"",password:""}),[a,o]=j.useState({email:"",password:""}),[l,d]=j.useState(!1),h=()=>{const m={email:"",password:""};let p=!0;return n.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(n.email)||(m.email=r==="ml"?"സാധുവായ ഇമെയിൽ നൽകുക":"Invalid email address",p=!1):(m.email=r==="ml"?"ഇമെയിൽ നൽകേണ്ടതാണ്":"Email is required",p=!1),n.password?n.password.length<6&&(m.password=r==="ml"?"പാസ്‌വേഡ് 6 അക്ഷരങ്ങളെങ്കിലും ഉണ്ടായിരിക്കണം":"Password must be at least 6 characters",p=!1):(m.password=r==="ml"?"പാസ്‌വേഡ് നൽകേണ്ടതാണ്":"Password is required",p=!1),o(m),p},u=async m=>{if(m.preventDefault(),d(!0),h())try{await e(n.email,n.password)}catch(p){console.error("Login error:",p)}d(!1)},f=m=>{const{name:p,value:g}=m.target;i(y=>({...y,[p]:g})),a[p]&&o(y=>({...y,[p]:""}))};return t?c.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 flex items-center justify-center",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),c.jsxs(F.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.2},className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 w-full max-w-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-900 dark:text-white",children:r==="ml"?"അഡ്മിൻ ലോഗിൻ":"Admin Login"}),s&&c.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-lg flex items-center",children:[c.jsx(en,{className:"w-5 h-5 mr-2"}),s]}),c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r==="ml"?"ഇമെയിൽ":"Email"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(fo,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:f,className:D("block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",a.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"),placeholder:"admin@example.com"})]}),a.email&&c.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r==="ml"?"പാസ്‌വേഡ്":"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(mo,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n.password,onChange:f,className:D("block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",a.password?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"),placeholder:"••••••••"})]}),a.password&&c.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.password})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:l,className:D("w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white",l?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800"),children:l?c.jsxs(c.Fragment,{children:[c.jsx($r,{className:"w-5 h-5 mr-2 animate-spin"}),r==="ml"?"ലോഗിൻ ചെയ്യുന്നു...":"Logging in..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Lh,{className:"w-5 h-5 mr-2"}),r==="ml"?"ലോഗിൻ":"Login"]})})})]})]})]}):null};function ST(){const{language:t}=be(),e=Oe[t],[s,r]=j.useState("dashboard"),[n,i]=j.useState(!1),[a,o]=j.useState(null),[l,d]=j.useState([]),[h,u]=j.useState([]),[f,m]=j.useState([]),[p,g]=j.useState(!0),[y,v]=j.useState([{label:e.totalAnalyses,value:"0"},{label:e.userFeedback,value:"0"}]),[k,S]=j.useState(null);j.useState([{id:"1",url:"https://www.manoramaonline.com",name:"Manorama Online",credibilityScore:85,politicalBias:"Center-Right",notes:"One of the largest Malayalam news outlets with generally reliable reporting.",lastUpdated:"2023-12-01"},{id:"2",url:"https://www.mathrubhumi.com",name:"Mathrubhumi",credibilityScore:82,politicalBias:"Center",notes:"Well-established newspaper with a strong focus on cultural reporting.",lastUpdated:"2023-12-05"},{id:"3",url:"https://www.madhyamam.com",name:"Madhyamam",credibilityScore:75,politicalBias:"Center-Left",notes:"Generally reliable reporting with some bias in political coverage.",lastUpdated:"2023-12-10"},{id:"4",url:"https://www.asianetnews.com",name:"Asianet News",credibilityScore:78,politicalBias:"Center-Right",notes:"Popular TV news channel with online presence, some sensationalism in reporting.",lastUpdated:"2023-12-15"},{id:"5",url:"https://www.janamtv.com",name:"Janam TV",credibilityScore:62,politicalBias:"Right",notes:"Known for right-leaning political coverage with occasional misinformation.",lastUpdated:"2023-12-20"}]),j.useState(!1),j.useState(null),j.useState({url:"",name:"",credibilityScore:50,politicalBias:"Center",notes:""});const[C,T]=j.useState(null),[O,M]=j.useState(!1),[b,x]=j.useState(null);j.useState(null),j.useState({realNewsPercentage:0,articleCount:0}),j.useEffect(()=>{(async()=>{g(!0);try{const{data:U,error:q}=await ua.from("analysis_result").select("*").order("created_at",{ascending:!1}),{data:K,error:ae}=await ua.from("feedback").select("*").order("created_at",{ascending:!1}),{data:{users:W},error:oe}=await ua.auth.admin.listUsers();q&&console.error("Error fetching analyses:",q),ae&&console.error("Error fetching feedback:",ae),oe&&console.error("Error fetching users:",oe),console.log("Fetched analyses:",U),console.log("Fetched feedback:",K),console.log("Fetched users:",W),U&&d(U),K&&m(K),W&&u(W);const ye=(U==null?void 0:U.length)||0,Q=(K==null?void 0:K.length)||0;v([{label:e.totalAnalyses,value:ye.toString()},{label:e.userFeedback,value:Q.toString()}])}catch(U){console.error("Error fetching admin data:",U)}finally{g(!1)}})()},[e]),j.useEffect(()=>{s==="url-rankings"&&_()},[s]);const _=async()=>{M(!0),x(null);try{const P=await Jj.getCredibilityAnalysis();T(P)}catch(P){x("Failed to load credibility data"),console.error("Error loading credibility data:",P)}finally{M(!1)}},E=[{id:"dashboard",icon:Fh,label:e.dashboard},{id:"users",icon:vg,label:e.users},{id:"feedback",icon:wg,label:e.feedback},{id:"url-rankings",icon:Ot,label:"URL Rankings"}],N=P=>{try{return qj(new Date(P),"PPP")}catch{return"Invalid date"}},B=P=>{if(!P)return"No input";if(typeof P=="string")return P.length>50?P.substring(0,50)+"...":P;if(typeof P=="object"){if(P.text)return'"'+(P.text.length>50?P.text.substring(0,50)+'..."':P.text+'"');if(P.url)return`URL: ${P.url}`;if(P.image_url)return`Image: ${P.image_url}`}return"Complex input"},L=P=>{if(!P)return{verdict:"No results",explanation:"No explanation available",confidence:"N/A"};const U=P.is_fake!==void 0?P.is_fake?"FAKE":"NOT FAKE":P.ISFAKE!==void 0?P.ISFAKE>.5?"FAKE":"NOT FAKE":"Unknown",q=P.EXPLANATION_EN||P.explanation||"No explanation provided",K=P.score!==void 0?`${(P.score*100).toFixed(1)}%`:P.CONFIDENCE!==void 0?`${P.CONFIDENCE.toFixed(1)}%`:"N/A";return{verdict:U,explanation:q,confidence:K}},w=P=>{var q;if(!P)return"Anonymous";const U=h.find(K=>K.id===P);return U?((q=U.user_metadata)==null?void 0:q.full_name)||U.email||"No email":"Unknown User"},A=P=>{var ae;const{verdict:U,explanation:q,confidence:K}=L(P.result);return c.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Analysis Details"}),c.jsx("button",{onClick:()=>S(null),className:"text-sm text-blue-500 hover:text-blue-700",children:"Back to list"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400",children:"Type"}),c.jsx("p",{className:"text-gray-900 dark:text-white",children:P.type})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400",children:"Date"}),c.jsx("p",{className:"text-gray-900 dark:text-white",children:P.created_at?N(P.created_at):"Unknown date"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400",children:"User"}),c.jsx("p",{className:"text-gray-900 dark:text-white",children:w(P.user_id)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400",children:"Analysis ID"}),c.jsx("p",{className:"text-gray-900 dark:text-white",children:P.id})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Input"}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:typeof P.input=="object"&&P.input.text?c.jsx("div",{className:"border-l-4 border-gray-300 dark:border-gray-500 pl-4 py-2 italic text-gray-800 dark:text-gray-200",children:P.input.text}):typeof P.input=="object"&&P.input.url?c.jsxs("div",{children:[c.jsx("p",{className:"mb-2 font-medium",children:"URL Input:"}),c.jsx("a",{href:P.input.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline break-all",children:P.input.url})]}):typeof P.input=="object"&&P.input.image_url?c.jsxs("div",{children:[c.jsx("p",{className:"mb-2 font-medium",children:"Image Input:"}),c.jsx("div",{className:"mt-2",children:c.jsx("img",{src:P.input.image_url,alt:"Analysis input",className:"max-w-full max-h-64 object-contain rounded-lg border border-gray-200 dark:border-gray-600"})})]}):c.jsx("div",{className:"whitespace-pre-wrap text-gray-900 dark:text-white",children:typeof P.input=="string"?P.input:JSON.stringify(P.input,null,2)})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Analysis Results"}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg space-y-4",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-6 space-y-4 md:space-y-0",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h5",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Verdict"}),c.jsx("div",{className:`text-lg font-bold ${U==="FAKE"?"text-red-600 dark:text-red-400":U==="NOT FAKE"?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:U})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h5",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Confidence"}),c.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:K})]})]}),c.jsxs("div",{children:[c.jsx("h5",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Explanation"}),c.jsx("div",{className:"bg-gray-100 dark:bg-gray-600 p-3 rounded-lg text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:q})]}),((ae=P.result)==null?void 0:ae.details)&&c.jsxs("div",{children:[c.jsx("h5",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Technical Details"}),c.jsx("div",{className:"bg-gray-100 dark:bg-gray-600 p-3 rounded-lg overflow-auto",children:c.jsx("pre",{className:"text-sm text-gray-800 dark:text-gray-200",children:JSON.stringify(P.result.details,null,2)})})]}),c.jsxs("details",{className:"mt-4",children:[c.jsx("summary",{className:"cursor-pointer text-sm font-medium text-blue-600 dark:text-blue-400",children:"Show all raw analysis data"}),c.jsx("div",{className:"mt-2 bg-gray-100 dark:bg-gray-600 p-3 rounded-lg overflow-auto",children:c.jsx("pre",{className:"text-xs text-gray-800 dark:text-gray-200",children:JSON.stringify(P.result,null,2)})})]})]})]}),f.some(W=>W.analysis_result_id===P.id)&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2",children:"Related Feedback"}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:f.filter(W=>W.analysis_result_id===P.id).map(W=>c.jsxs("div",{className:"mb-4 last:mb-0",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-semibold",children:w(W.user_id)}),c.jsx("span",{className:"text-sm text-gray-500",children:N(W.created_at)})]}),W.rating&&c.jsxs("div",{className:"text-yellow-500",children:["★".repeat(W.rating),"☆".repeat(5-W.rating)]}),c.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:W.feedback_text||W.comment||"-"})]},W.id))})]})]})]})},R=P=>{const{verdict:U,explanation:q}=L(P.result);return c.jsxs("tr",{onClick:()=>S(P),className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:P.type||"Unknown"}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300 max-w-xs truncate",children:B(P.input)}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300 max-w-md truncate",children:q.substring(0,80)+(q.length>80?"...":"")}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${U==="FAKE"?"text-red-600 dark:text-red-400":U==="NOT FAKE"?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"}`,children:U}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:w(P.user_id)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:P.created_at?N(P.created_at):"Unknown date"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c.jsx("button",{onClick:K=>{K.stopPropagation(),S(P)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"View"})})]},P.id)},V=P=>P===void 0?"Unknown":P>3?"Positive":P===3?"Neutral":"Negative",I=P=>P===void 0?"text-gray-500":P>3?"text-green-500 dark:text-green-400":P===3?"text-yellow-500 dark:text-yellow-400":"text-red-500 dark:text-red-400",$=P=>P?l.find(U=>U.id===P):null,z=P=>{if(!P.analysis_result_id)return null;const U=l.find(K=>K.id===P.analysis_result_id);if(!U)return null;const{verdict:q}=L(U.result);return{type:U.type,input:B(U.input),verdict:q,date:U.created_at,id:U.id}},G=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:t==="ml"?"വെബ്സൈറ്റ് വിശ്വസനീയത റാങ്കിംഗ്":"Website Credibility Rankings"})}),c.jsx(kT,{showDebugPanel:!1})]}),H=()=>{switch(s){case"dashboard":return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:e.dashboard}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:y.map((P,U)=>c.jsx(Ik,{label:P.label,value:P.value,index:U},U))}),k?A(k):c.jsxs("div",{className:"mt-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Recent Analyses"}),c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Input"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Explanation"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Verdict"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Action"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:l.length>0?l.slice(0,10).map(P=>R(P)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-300",children:"No analyses found"})})})]})})]})]});case"users":return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:e.users}),c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Joined"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Sign In"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Analyses"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.length>0?h.map(P=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:P.email||"No email"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:P.created_at?N(P.created_at):"Unknown date"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:P.last_sign_in_at?N(P.last_sign_in_at):"Never"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:l.filter(U=>U.user_id===P.id).length})]},P.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-300",children:"No users found"})})})]})}),c.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:[c.jsx("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200",children:"Anonymous Usage"}),c.jsxs("p",{className:"text-blue-700 dark:text-blue-300 mt-2",children:[l.filter(P=>!P.user_id).length," analyses were performed by non-logged in users."]})]})]});case"feedback":return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:e.feedback}),c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Feedback"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Rating"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Related Analysis"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Verdict"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"From"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),c.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Action"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.length>0?f.map(P=>{const U=z(P);return c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[c.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white max-w-md truncate",children:P.feedback_text||P.comment||"-"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:P.rating!==void 0?c.jsx("span",{className:P.rating>=1?"text-green-500 dark:text-green-400 font-medium":"text-red-500 dark:text-red-400 font-medium",children:P.rating>=1?c.jsxs("div",{className:"flex items-center",children:[c.jsx(Bh,{className:"w-4 h-4 mr-1"}),c.jsx("span",{children:"Positive"})]}):c.jsxs("div",{className:"flex items-center",children:[c.jsx($h,{className:"w-4 h-4 mr-1"}),c.jsx("span",{children:"Negative"})]})}):"-"}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300 max-w-xs truncate",children:U?c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:U.type}),c.jsx("div",{className:"text-xs text-gray-500",children:U.input})]}):c.jsx("span",{className:"text-gray-400",children:"No related analysis"})}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${(U==null?void 0:U.verdict)==="FAKE"?"text-red-600 dark:text-red-400":(U==null?void 0:U.verdict)==="NOT FAKE"?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"}`,children:(U==null?void 0:U.verdict)||"N/A"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:w(P.user_id)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:P.created_at?N(P.created_at):"Unknown date"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c.jsx("button",{onClick:()=>{const q=$(P.analysis_result_id);q&&(S(q),r("dashboard"))},className:`text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 ${P.analysis_result_id?"":"opacity-50 cursor-not-allowed"}`,disabled:!P.analysis_result_id,children:P.analysis_result_id?"View Details":"No Analysis"})})]},P.id)}):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-300",children:"No feedback found"})})})]})}),c.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Feedback Statistics"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Feedback"}),c.jsx("p",{className:"text-2xl font-bold",children:f.length})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average Rating"}),c.jsx("p",{className:"text-2xl font-bold",children:f.filter(P=>P.rating!==void 0).length>0?(f.reduce((P,U)=>P+(U.rating||0),0)/f.filter(P=>P.rating!==void 0).length).toFixed(1):"N/A"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:"bg-green-50 dark:bg-green-900 p-3 rounded-lg",children:[c.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Positive"}),c.jsx("p",{className:"text-xl font-bold text-green-700 dark:text-green-300",children:f.filter(P=>P.rating!==void 0&&P.rating>3).length})]}),c.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900 p-3 rounded-lg",children:[c.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Neutral"}),c.jsx("p",{className:"text-xl font-bold text-yellow-700 dark:text-yellow-300",children:f.filter(P=>P.rating!==void 0&&P.rating===3).length})]}),c.jsxs("div",{className:"bg-red-50 dark:bg-red-900 p-3 rounded-lg",children:[c.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Negative"}),c.jsx("p",{className:"text-xl font-bold text-red-700 dark:text-red-300",children:f.filter(P=>P.rating!==void 0&&P.rating<3).length})]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Comments"}),c.jsxs("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:[f.filter(P=>P.feedback_text||P.comment).slice(0,5).map(P=>{const U=z(P);return c.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(P.rating)}`,children:V(P.rating)}),c.jsx("span",{className:"text-sm text-gray-500",children:N(P.created_at)})]}),c.jsxs("p",{className:"mt-2 text-gray-800 dark:text-gray-200",children:['"',P.feedback_text||P.comment,'"']}),c.jsxs("div",{className:"mt-3 border-t border-gray-200 dark:border-gray-600 pt-2",children:[c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["From: ",w(P.user_id)]}),U&&c.jsxs("div",{className:"mt-2 text-sm",children:[c.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Related Analysis:"}),c.jsxs("div",{className:"bg-gray-100 dark:bg-gray-600 px-3 py-2 rounded-lg mt-1",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:U.type}),c.jsx("span",{className:`font-semibold ${U.verdict==="FAKE"?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:U.verdict})]}),c.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate",children:["Input: ",U.input]}),c.jsx("button",{onClick:()=>{const q=$(P.analysis_result_id);q&&(S(q),r("dashboard"))},className:"mt-2 text-xs text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"View full analysis"})]})]})]})]},P.id)}),f.filter(P=>P.feedback_text||P.comment).length===0&&c.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"No comments found"})]})]})]})]});case"url-rankings":return G();default:return null}},X=j.useCallback((P,U)=>{P.toLowerCase()==="vkharikrishnan45@gmail.com".toLowerCase()&&U==="Hkvk@2003"?(i(!0),o(null),sessionStorage.setItem("adminLoggedIn","true")):o("Invalid email or password")},[]);j.useEffect(()=>{sessionStorage.getItem("adminLoggedIn")==="true"&&i(!0)},[]);const se=j.useCallback(()=>{i(!1),sessionStorage.removeItem("adminLoggedIn")},[]);return c.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"space-y-6",children:[c.jsx(jT,{isVisible:!n,onLogin:X,error:a,language:t}),c.jsx(F.div,{animate:{filter:n?"blur(0px)":"blur(4px)",opacity:n?1:.5},transition:{duration:.2},className:"pointer-events-none",style:{pointerEvents:n?"auto":"none"},children:c.jsxs(ot,{children:[c.jsx(ot.Header,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.adminDashboard}),n&&c.jsxs("button",{onClick:se,className:"flex items-center px-4 py-2 text-sm font-medium text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 focus:outline-none",children:[c.jsx(Ih,{className:"w-4 h-4 mr-2"}),t==="ml"?"ലോഗൗട്ട്":"Logout"]})]})}),c.jsxs(ot.Body,{children:[c.jsx("div",{className:"flex space-x-4 mb-6",children:E.map(({id:P,icon:U,label:q})=>c.jsx(Fk,{id:P,icon:U,label:q,isActive:s===P,onClick:()=>r(P)},P))}),p?c.jsx("div",{className:"flex justify-center items-center h-48",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):c.jsx(ot,{className:"bg-gray-50 dark:bg-gray-700 p-6",children:H()})]})]})})]})}const NT=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-700 rounded mr-2 animate-pulse"}),c.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),c.jsx(dt,{children:c.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[1,2,3,4,5].map(t=>c.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:t*.1},className:"p-4 flex items-center",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),c.jsxs("div",{className:"flex-grow px-4 space-y-2",children:[c.jsx("div",{className:"h-5 w-3/4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),c.jsx("div",{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),c.jsx("div",{className:"w-20 h-6 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"})]},t))})})]}),TT=({trendingNews:t,isLoading:e,onItemClick:s})=>{const{language:r}=be(),n=r==="ml";return e?c.jsx(NT,{}):t.length?c.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx(Yn,{className:"w-6 h-6 text-blue-500 dark:text-blue-400 mr-2"}),c.jsx("h2",{className:D("text-xl font-semibold text-gray-800 dark:text-gray-100",n&&"text-2xl"),children:Oe[r].trendingTitle})]}),c.jsx(dt,{children:c.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.jsx(er,{children:t.map((i,a)=>c.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:a*.1},onClick:()=>s==null?void 0:s(i),className:D("flex items-center p-4 group cursor-pointer","hover:bg-blue-50/50 dark:hover:bg-blue-900/20","transition-colors duration-200"),role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),s==null||s(i))},children:[c.jsx("div",{className:D("flex-shrink-0 w-12 h-12 flex items-center justify-center","rounded-full bg-blue-50 dark:bg-blue-900/30","text-xl font-bold text-blue-600 dark:text-blue-400"),children:a+1}),c.jsxs("div",{className:"flex-grow px-4",children:[c.jsx("h3",{className:D("font-semibold text-gray-800 dark:text-gray-100",n?"text-lg leading-relaxed":"text-base"),children:i.title}),c.jsxs("p",{className:D("text-gray-600 dark:text-gray-400",n?"text-base":"text-sm"),children:[Oe[r].searchCount,": ",i.searchCount]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:D("px-3 py-1 rounded-full text-sm font-medium",i.reliability==="reliable"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"),children:Oe[r][i.reliability]}),c.jsx(go,{className:`w-5 h-5 text-gray-400 dark:text-gray-600 \r
                    opacity-0 group-hover:opacity-100 transition-opacity`})]})]},i.id))})})})]}):c.jsx(dt,{className:"py-12 text-center",children:c.jsx("p",{className:D("text-gray-600 dark:text-gray-400",n&&"text-lg"),children:Oe[r].noTrendingData})})},AT=()=>{const[t,e]=j.useState([]),[s,r]=j.useState([]),[n,i]=j.useState(!0),[a,o]=j.useState(null),[l,d]=j.useState(""),{language:h}=be(),u=h==="ml";return j.useEffect(()=>{(async()=>{try{i(!0),o(null);const m=await Gr.getTrendingNews();e(m),r(m)}catch(m){console.error("Error fetching trending news:",m),o(h==="ml"?"വിവരങ്ങൾ ലഭ്യമാക്കുന്നതിൽ പിശക് സംഭവിച്ചു":"Error fetching trending news")}finally{i(!1)}})()},[h]),j.useEffect(()=>{if(!l.trim()){r(t);return}const f=l.toLowerCase(),m=t.filter(p=>p.title.toLowerCase().includes(f));r(m)},[l,t]),c.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},className:`min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-indigo-50 
        dark:from-gray-900 dark:via-gray-900 dark:to-gray-900`,children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[c.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[c.jsx("div",{className:`inline-flex items-center justify-center p-2 bg-blue-100 dark:bg-blue-900/30 
            rounded-full mb-4`,children:c.jsx(Yn,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),c.jsx("h1",{className:D("text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent","dark:from-blue-400 dark:to-purple-400",u&&"text-5xl leading-relaxed"),children:Oe[h].trendingTitle}),c.jsx("p",{className:D("mt-4 text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",u?"text-lg leading-relaxed":"text-base"),children:Oe[h].trendingDescription})]}),c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:c.jsx(dt,{className:"p-2",children:c.jsxs("div",{className:"relative",children:[c.jsx(Kn,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 
                text-gray-400 dark:text-gray-600 w-5 h-5`}),c.jsx("input",{type:"text",value:l,onChange:f=>d(f.target.value),placeholder:Oe[h].searchInTrending,className:D("w-full pl-10 pr-4 py-2 rounded-lg","bg-transparent border border-gray-200 dark:border-gray-700","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","placeholder-gray-400 dark:placeholder-gray-600","text-gray-800 dark:text-gray-200",u&&"text-lg")})]})})}),c.jsx("div",{className:"fixed inset-0 -z-10",children:c.jsx(F.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 via-purple-500/5 to-indigo-500/5",animate:{scale:[1,1.1,1],rotate:[0,2,0]},transition:{duration:5,repeat:1/0,repeatType:"reverse"}})}),c.jsx("div",{className:"relative",children:a?c.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center p-8",children:c.jsx("p",{className:D("text-red-500 dark:text-red-400",u&&"text-lg"),children:a})}):c.jsx(TT,{trendingNews:s,isLoading:n,onItemClick:f=>{console.log("Clicked news:",f)}})})]})})};function PT(){return c.jsx(c.Fragment,{children:c.jsx(Qm,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:c.jsx(Ag,{children:c.jsx(Pg,{children:c.jsx(vy,{children:c.jsx(nk,{children:c.jsxs(eg,{children:[c.jsx(un,{path:"/",element:c.jsx(ck,{})}),c.jsx(un,{path:"/analyze",element:c.jsx(Lk,{})}),c.jsx(un,{path:"/admin",element:c.jsx(ST,{})}),c.jsx(un,{path:"/trending",element:c.jsx(AT,{})})]})})})})})})})}const Km=document.getElementById("root");if(!Km)throw new Error("Failed to find the root element");zh(Km).render(c.jsx(j.StrictMode,{children:c.jsx(PT,{})}));
//# sourceMappingURL=main-5EJOCLVl.js.map
